import{i as zs,g as Vs,a as Gs,b as Ks,L as Js,S as Ys,O as qt,F as Xs,c as Nt,T as ne,C as Zs,j as e,W as el,d as tl,e as sl,r as ue,s as bt,f as N,o as Xt,h as jt,k as Zt,u as At,l as ie,M as Be,B as Ut,P as Ge,m as Ct,n as Se,A as ut,D as Me,p as ll,q as nt,R as it,t as Pt,v as $t,X as Et,Y as Bt,w as dt,x as Lt,y as es,z as ts,E as ss,G as ls,H as Ye,I as De,J as T,K as te,N as Fe,Q as de,U as qe,V as Ft,Z as kt,_ as vt,$ as al,a0 as Rt,a1 as Qe,a2 as xs,a3 as rl,a4 as nl,a5 as ms,a6 as as,a7 as mt,a8 as ol,a9 as cl,aa as il,ab as Ie,ac as dl,ad as xl,ae as St,af as ml,ag as wt,ah as pl,ai as bl,aj as ps,ak as ul,al as hl,am as _t,an as Ht,ao as Je,ap as rs,aq as gl,ar as Qt,as as fl,at as Nl,au as ot,av as yt,aw as jl,ax as ns,ay as vl,az as wl,aA as yl,aB as os,aC as Cl,aD as kl,aE as Rl,aF as Sl}from"./vendor-keLE2MpI.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function c(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=c(t);fetch(t.href,s)}})();var re=(a=>(a.DASHBOARD="DASHBOARD",a.OPERATIONS="OPERATIONS",a.NCR="NCR",a.NCR_REPORT="NCR_REPORT",a.INVENTORY="INVENTORY",a.COLLECTION="COLLECTION",a.COL_REPORT="COL_REPORT",a))(re||{});const Dl={apiKey:"AIzaSyCu4-qBECAiA2Bqgzt0JB52dBx3d4WKsFo",authDomain:"returnneosiam.firebaseapp.com",databaseURL:"https://returnneosiam-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"returnneosiam",storageBucket:"returnneosiam.firebasestorage.app",messagingSenderId:"46662606762",appId:"1:46662606762:web:29d41bf680226753f4d5d3",measurementId:"G-38PCJ8VXLS"},Dt=zs(Dl);Vs(Dt);console.log("‚úÖ Firebase App Initialized (RTDB):",Dt.name);const he=Gs(Dt),cs=Ks(Dt),Il=({currentView:a,onChangeView:d})=>{const c=[{id:re.DASHBOARD,label:"‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Dashboard)",icon:Js},{id:re.OPERATIONS,label:"‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ (Operations)",icon:Ys},{id:re.NCR,label:"NCR (‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏µ‡∏Å‡∏•‡∏±‡∏ö)",icon:qt},{id:re.NCR_REPORT,label:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR",icon:Xs},{id:re.INVENTORY,label:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)",icon:Nt},{id:re.COLLECTION,label:"‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Tasks)",icon:ne},{id:re.COL_REPORT,label:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL",icon:Zs}],o=async()=>{try{const t=ue(he,"connection_test");await bt(t,{status:"online",timestamp:new Date().toISOString(),message:"System is connected to Realtime Database"}),alert(`‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Realtime Database ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (Connection Successful)
‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á path: /connection_test`)}catch(t){alert(`‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (Failed): ${t.message}
‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Config ‡∏´‡∏£‡∏∑‡∏≠ Security Rules`)}};return e.jsxs("div",{className:"w-64 bg-slate-900 text-white h-screen flex flex-col shadow-xl print:hidden",children:[e.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-800",children:[e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-10 h-10 object-contain bg-white rounded-lg p-1"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"ReturnNeosiam"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Management System"})]})]}),e.jsx("nav",{className:"flex-1 px-3 py-6 space-y-1",children:c.map(t=>{const s=t.icon,n=a===t.id;return e.jsxs("button",{onClick:()=>d(t.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200
                ${n?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"}
              `,children:[e.jsx(s,{className:`w-5 h-5 ${n?"text-white":"text-slate-400"}`}),t.label]},t.id)})}),e.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-1",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-3 text-green-400 hover:text-green-300 hover:bg-slate-800 px-4 py-2 w-full text-sm rounded transition-colors",children:[e.jsx(el,{className:"w-4 h-4"}),"‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ DB"]}),e.jsxs("button",{className:"flex items-center gap-3 text-slate-400 hover:text-white px-4 py-2 w-full text-sm transition-colors",children:[e.jsx(tl,{className:"w-4 h-4"}),"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö"]}),e.jsxs("button",{className:"flex items-center gap-3 text-red-400 hover:text-red-300 px-4 py-2 w-full text-sm transition-colors",children:[e.jsx(sl,{className:"w-4 h-4"}),"‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö"]})]})]})},bs=N.createContext({items:[],ncrReports:[],loading:!0,addReturnRecord:async()=>!1,updateReturnRecord:async()=>!1,deleteReturnRecord:async()=>!1,addNCRReport:async()=>!1,updateNCRReport:async()=>!1,deleteNCRReport:async()=>!1,getNextNCRNumber:async()=>"NCR-ERROR-0000",getNextReturnNumber:async()=>"RT-ERROR-0000",runDataIntegrityCheck:async()=>0}),ge=()=>N.useContext(bs),Tl=({children:a})=>{const[d,c]=N.useState([]),[o,t]=N.useState([]),[s,n]=N.useState(!0);N.useEffect(()=>{console.log("üîÑ Connecting to Realtime Database...");const w=ue(he,"return_records"),v=Xt(w,i=>{const O=i.val(),B=O?Object.values(O).map(D=>({...D,date:D.date||new Date().toISOString().split("T")[0],productName:D.productName||"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})).filter(D=>{if(!D||typeof D!="object")return!1;const F=["id","date","status","branch","customerName","productCode"];for(const Y of F)if(typeof D[Y]!="string")return console.warn(`üõ°Ô∏è Data Hardening: Filtering out invalid ReturnRecord (missing/bad ${Y})`,D),!1;if(typeof D.quantity!="number")if(typeof D.quantity=="string"&&!isNaN(parseFloat(D.quantity)))D.quantity=parseFloat(D.quantity);else return console.warn("üõ°Ô∏è Data Hardening: Filtering out invalid ReturnRecord (bad quantity)",D),!1;return!0}):[];c(B.sort((D,F)=>new Date(F.date).getTime()-new Date(D.date).getTime())),n(!1),console.log(`‚úÖ RTDB Connected: Loaded ${B.length} valid Return Records`)},i=>{console.warn("‚ö†Ô∏è RTDB Permission/Connection Error (Returns).",i.message),c([]),n(!1)}),k=ue(he,"ncr_reports"),y=Xt(k,i=>{const O=i.val(),B=O?Object.values(O).filter(D=>{if(!D||typeof D!="object")return!1;if(typeof D.id!="string"||typeof D.date!="string"||typeof D.status!="string")return console.warn("üõ°Ô∏è Data Hardening: Filtering out invalid NCR (missing header fields).",D),!1;const F=D.item||D;return!F||typeof F!="object"?(console.warn("üõ°Ô∏è Data Hardening: Invalid NCR Item structure.",D),!1):(typeof F.productName!="string"&&console.warn("‚ö†Ô∏è Data Warning: NCR report missing valid productName.",D),!0)}):[];t(B.sort((D,F)=>new Date(F.date).getTime()-new Date(D.date).getTime())),console.log(`‚úÖ RTDB Connected: Loaded ${B.length} valid NCR Reports`)},i=>{console.warn("‚ö†Ô∏è RTDB Permission/Connection Error (NCR).",i.message),t([])});return()=>{v(),y()}},[]);const b=async w=>{try{return await bt(ue(he,"return_records/"+w.id),w),!0}catch(v){return v.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Write Permission Denied: Cannot save return record."),alert("Access Denied: Check Firebase Realtime Database Rules. Developer tip: Set rules to 'allow read, write: if true;' for testing.")):(console.error("Error adding return record:",v),alert("Failed to save record.")),!1}},j=async(w,v)=>{try{return await At(ue(he,"return_records/"+w),v),!0}catch(k){return k.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Update Permission Denied."),alert("Access Denied: Cannot update record.")):(console.error("Error updating return record:",k),alert("Failed to update record.")),!1}},g=async w=>{try{return await jt(ue(he,"return_records/"+w)),!0}catch(v){return v.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Delete Permission Denied."),alert("Access Denied: Cannot delete this return record.")):(console.error("Error deleting return record:",v),alert("Failed to delete this return record.")),!1}},m=async w=>{try{return await bt(ue(he,"ncr_reports/"+w.id),w),!0}catch(v){return v.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Write Permission Denied: Cannot save NCR report."),alert("Access Denied: Check Firebase Realtime Database Rules. Developer tip: Set rules to 'allow read, write: if true;' for testing.")):(console.error("Error adding NCR report:",v),alert("Failed to save NCR report.")),!1}},h=async(w,v)=>{try{return await At(ue(he,"ncr_reports/"+w),v),!0}catch(k){return k.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Update Permission Denied."),alert("Access Denied: Cannot update NCR report.")):(console.error("Error updating NCR report:",k),alert("Failed to update NCR report.")),!1}},p=async w=>{try{return await At(ue(he,"ncr_reports/"+w),{status:"Canceled"}),!0}catch(v){return v.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Cancel Permission Denied."),alert("Access Denied: Cannot cancel NCR report.")):(console.error("Error canceling NCR report:",v),alert("Failed to cancel NCR report.")),!1}},r=async()=>{const w=ue(he,"counters/ncr_counter"),v=new Date().getFullYear();try{const{committed:k,snapshot:y}=await Zt(w,i=>i===null?{year:v,lastNumber:1}:(i.year===v?i.lastNumber++:(i.year=v,i.lastNumber=1),i));if(k){const i=y.val(),O=String(i.lastNumber).padStart(4,"0");return`NCR-${i.year}-${O}`}else throw new Error("Failed to get next NCR number, transaction aborted.")}catch(k){return console.error("Error getting next NCR number:",k),`NCR-${v}-ERR${Math.floor(Math.random()*100)}`}},I=async()=>{const w=ue(he,"counters/return_counter"),v=new Date().getFullYear();try{const{committed:k,snapshot:y}=await Zt(w,i=>i===null?{year:v,lastNumber:1}:(i.year===v?i.lastNumber++:(i.year=v,i.lastNumber=1),i));if(k){const i=y.val(),O=String(i.lastNumber).padStart(4,"0");return`RT-${i.year}-${O}`}else throw new Error("Failed to get next Return number, transaction aborted.")}catch(k){return console.error("Error getting next Return number:",k),`RT-${v}-ERR${Math.floor(Math.random()*100)}`}},l=async()=>{console.log("üîÑ Starting Data Integrity Check...");const w=d.filter(k=>{if(!k.ncrNumber&&!k.id.startsWith("NCR"))return!1;let y=k.ncrNumber;if(!y&&k.id.startsWith("NCR")&&(y=k.id),!y)return!1;y=y.trim();const i=o.find(O=>O.ncrNo===y||O.id===y);return!i||i.status==="Canceled"});if(w.length===0)return console.log("‚úÖ System Integrity Verified: No orphans found."),0;console.warn(`‚ö†Ô∏è Found ${w.length} orphaned records. Cleaning up...`,w);let v=0;for(const k of w)try{await jt(ue(he,`return_records/${k.id}`)),v++}catch(y){console.error(`‚ùå Failed to delete orphan ${k.id}`,y)}return console.log(`üßπ Cleanup Complete. Removed ${v} records.`),v};return e.jsx(bs.Provider,{value:{items:d,ncrReports:o,loading:s,addReturnRecord:b,updateReturnRecord:j,deleteReturnRecord:g,addNCRReport:m,updateNCRReport:h,deleteNCRReport:p,getNextNCRNumber:r,getNextReturnNumber:I,runDataIntegrityCheck:l},children:a})},xt={Restock:"#22c55e",RTV:"#f59e0b",Recycle:"#ef4444",Claim:"#3b82f6",InternalUse:"#a855f7"},is=()=>{const{items:a,ncrReports:d,runDataIntegrityCheck:c}=ge(),o=async()=>{const{value:p}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Authentication)",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",input:"password",inputPlaceholder:"Enter password",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Verify)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(!p)return;if(p!=="1234"){await T.fire({title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"Access Denied",icon:"error",confirmButtonColor:"#ef4444"});return}if((await T.fire({title:"‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?",text:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏ñ‡∏≤‡∏ß‡∏£ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ! ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"‡πÉ‡∏ä‡πà, ‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed)try{T.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...",text:"Please wait while we reset the system",allowOutsideClick:!1,didOpen:()=>{T.showLoading()}}),await jt(ue(he,"return_records")),await jt(ue(he,"ncr_reports")),await bt(ue(he,"ncr_counter"),0),await T.fire("‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!","‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß","success"),location.reload()}catch(I){console.error(I),T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà","error")}},t=async()=>{const{value:p}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Authentication)",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞",input:"password",inputPlaceholder:"Enter password",icon:"question",showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#64748b",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Verify)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(p){if(p!=="1234"){await T.fire({title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"Access Denied",icon:"error",confirmButtonColor:"#ef4444"});return}T.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö...",text:"Scanning for orphaned records...",allowOutsideClick:!1,didOpen:()=>{T.showLoading()}});try{const r=await c();r>0?await T.fire("‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",`‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á (Orphaned Records) ‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô ${r} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,"success"):await T.fire("‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥","‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö","success")}catch(r){console.error(r),T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ","error")}}},s=N.useMemo(()=>({requests:a.filter(p=>p.status==="Draft"||p.status==="Requested").length,logistics:a.filter(p=>p.status==="InTransitHub").length,receiving:a.filter(p=>p.status==="ReceivedAtHub"||p.status==="Received").length,qc:a.filter(p=>p.status==="QCPassed"||p.status==="QCFailed"||p.status==="Graded").length,disposition:a.filter(p=>p.status==="ReturnToSupplier"||p.status==="Documented").length,completed:a.filter(p=>p.status==="Completed").length}),[a]),n=N.useMemo(()=>{const p=r=>{let I=0,l=0;return a.filter(w=>w.disposition===r).forEach(w=>{w.dateGraded&&(I++,(w.dateDocumented||w.dateCompleted)&&l++)}),I-l};return{restock:p("Restock"),rtv:p("RTV"),claim:p("Claim"),internal:p("InternalUse"),scrap:p("Recycle"),directReturn:a.filter(r=>r.disposition==="RTV"&&!r.dateGraded&&(r.dateDocumented||r.dateCompleted)).length}},[a]),b=N.useMemo(()=>{const p=a.filter(r=>!(r.documentType==="NCR"||r.ncrNumber&&r.documentType!=="LOGISTICS"));return{requests:p.filter(r=>r.status==="Requested").length,assigned:p.filter(r=>r.status==="COL_JobAccepted").length,collected:p.filter(r=>r.status==="COL_BranchReceived").length,consolidated:p.filter(r=>r.status==="COL_Consolidated").length,transit:p.filter(r=>r.status==="COL_InTransit").length,pendingCompletion:p.filter(r=>r.status==="COL_HubReceived"||r.status==="COL_Documented").length,completed:p.filter(r=>r.status==="Completed").length}},[a]),j=N.useMemo(()=>{let p=0,r=0,I=0,l=0;const w={},v={};a.forEach(y=>{const i=y.quantity||0,O=y.priceBill||0;if(p+=O*i,y.disposition==="Restock"&&(r+=(y.priceSell||0)*i),y.disposition==="RTV"&&(I+=O*i),y.hasCost&&y.costAmount){const B=y.costResponsible||"Unassigned",D=y.problemSource||"Other";w[B]=(w[B]||0)+y.costAmount,v[D]=(v[D]||0)+y.costAmount}}),d.filter(y=>y.status!=="Canceled").forEach(y=>{var O;const i=((O=y.item)==null?void 0:O.costAmount)||y.costAmount||0;l+=i});const k=Object.entries(w).map(([y,i])=>({name:y,value:i})).sort((y,i)=>i.value-y.value).slice(0,5);return{totalIntakeValue:p,recoveryValue:r,rtvValue:I,ncrCost:l,costResponsibleData:k}},[a,d]),g=N.useMemo(()=>{const p={Restock:0,RTV:0,Recycle:0,Claim:0,InternalUse:0};return a.forEach(r=>{r.disposition&&r.disposition!=="Pending"&&p[r.disposition]!==void 0&&p[r.disposition]++}),[{name:"‡∏Ç‡∏≤‡∏¢ (Restock)",value:p.Restock,color:xt.Restock},{name:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (RTV)",value:p.RTV,color:xt.RTV},{name:"‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",value:p.Claim,color:xt.Claim},{name:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)",value:p.Recycle,color:xt.Recycle},{name:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",value:p.InternalUse,color:xt.InternalUse}].filter(r=>r.value>0)},[a]),m=N.useMemo(()=>{const p={};return a.forEach(r=>{if(r.problemAnalysis){const I=r.problemAnalysis;p[I]=(p[I]||0)+1}}),Object.entries(p).map(([r,I])=>({name:{Customer:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",DestinationCustomer:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",Accounting:"‡∏ö‡∏±‡∏ç‡∏ä‡∏µ",Keying:"‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",Warehouse:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",Transport:"‡∏Ç‡∏ô‡∏™‡πà‡∏á",Other:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}[r]||r,value:I})).sort((r,I)=>I.value-r.value)},[a]),h=N.useMemo(()=>{const p={},r={Packaging:0,Transport:0,Operation:0,Environment:0};d.filter(w=>w.status!=="Canceled").forEach(w=>{var k;let v=((k=w.item)==null?void 0:k.problemSource)||w.problemSource||"Other";p[v]=(p[v]||0)+1,w.causePackaging&&r.Packaging++,w.causeTransport&&r.Transport++,w.causeOperation&&r.Operation++,w.causeEnv&&r.Environment++});const I=Object.entries(p).map(([w,v])=>({name:w,value:v})).sort((w,v)=>v.value-w.value),l=[{name:"Packaging",value:r.Packaging},{name:"Transport",value:r.Transport},{name:"Operation",value:r.Operation},{name:"Environment",value:r.Environment}].filter(w=>w.value>0);return{rootCauseData:I,causeData:l}},[d]);return e.jsxs("div",{className:"p-6 space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô (Operation Performance)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô‡∏Ñ‡∏á‡∏Ñ‡πâ‡∏≤‡∏á (Pipeline), ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (Inventory), ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Analysis)"})]}),e.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg border border-blue-100 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-bold text-blue-700",children:"Live Status"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-teal-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inbound Collection System)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[e.jsx(Ce,{step:"1",title:"‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô (Request)",count:b.requests,icon:ie,color:"bg-teal-50 text-teal-600 border-teal-200",desc:"‡∏£‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsx(Ce,{step:"2",title:"‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job)",count:b.assigned,icon:Be,color:"bg-teal-50 text-teal-600 border-teal-200",desc:"‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏±‡∏ö"}),e.jsx(Ce,{step:"3",title:"‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á (Collected)",count:b.collected,icon:Ut,color:"bg-teal-50 text-teal-600 border-teal-200",desc:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx(Ce,{step:"4",title:"‡∏à‡∏∏‡∏î‡∏û‡∏±‡∏Å (Hub)",count:b.consolidated,icon:Ge,color:"bg-indigo-50 text-indigo-600 border-indigo-200",desc:"‡∏£‡∏≠‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx(Ce,{step:"5",title:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transit)",count:b.transit,icon:ne,color:"bg-blue-50 text-blue-600 border-blue-200",desc:"‡πÄ‡∏Ç‡πâ‡∏≤ Ops Hub"}),e.jsx(Ce,{step:"6",title:"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending)",count:b.pendingCompletion,icon:Ct,color:"bg-orange-50 text-orange-600 border-orange-200",desc:"Direct/Docs"}),e.jsx(Ce,{step:"7",title:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô (Completed)",count:b.completed,icon:Se,color:"bg-green-50 text-green-600 border-green-200",desc:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(ut,{className:"w-4 h-4"})," ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Operations Hub)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[e.jsx(Ce,{step:"1",title:"‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô (Request)",count:s.requests,icon:ie,color:"bg-slate-100 text-slate-600",desc:"‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx(Ce,{step:"2",title:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (Logistics)",count:s.logistics,icon:ne,color:"bg-amber-50 text-amber-600 border-amber-200",desc:"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á"}),e.jsx(Ce,{step:"3",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (Receive)",count:s.receiving,icon:Ge,color:"bg-blue-50 text-blue-600 border-blue-200",desc:"‡∏ñ‡∏∂‡∏á Hub",isAlert:s.receiving>20}),e.jsx(Ce,{step:"4",title:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (QC)",count:s.qc,icon:ut,color:"bg-purple-50 text-purple-600 border-purple-200",desc:"‡∏£‡∏≠‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"}),e.jsx(Ce,{step:"5",title:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",count:s.disposition,icon:ie,color:"bg-indigo-50 text-indigo-600 border-indigo-200",desc:"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx(Ce,{step:"6",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",count:s.completed,icon:Se,color:"bg-green-50 text-green-600 border-green-200",desc:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"})," ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á (Inventory On-Hand)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsx(tt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢ (Sellable)",count:n.restock,color:"bg-green-100 text-green-800 border-green-200"}),e.jsx(tt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô (RTV)",count:n.rtv,color:"bg-amber-100 text-amber-800 border-amber-200"}),e.jsx(tt,{title:"‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",count:n.claim,color:"bg-blue-100 text-blue-800 border-blue-200"}),e.jsx(tt,{title:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",count:n.internal,color:"bg-purple-100 text-purple-800 border-purple-200"}),e.jsx(tt,{title:"‡∏ã‡∏≤‡∏Å (Scrap)",count:n.scrap,color:"bg-red-100 text-red-800 border-red-200"}),e.jsx(tt,{title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ï‡∏£‡∏á (Direct)",count:n.directReturn,color:"bg-slate-100 text-slate-800 border-slate-200"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"})," ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Financial Impact)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ft,{title:"Total Intake",value:`‡∏ø${j.totalIntakeValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö",icon:Ge,color:"bg-slate-700"}),e.jsx(ft,{title:"Recovery Value",value:`‡∏ø${j.recoveryValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏ô (Restock)",icon:ll,color:"bg-green-600"}),e.jsx(ft,{title:"RTV Credit",value:`‡∏ø${j.rtvValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (RTV)",icon:ne,color:"bg-amber-500"}),e.jsx(ft,{title:"Cost Impact",value:`‡∏ø${j.ncrCost.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (NCR & Costs)",icon:qt,color:"bg-red-500",isAlert:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(nt,{className:"w-5 h-5 text-amber-500"}),"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Analysis)"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (‡∏à‡∏≤‡∏Å Return)"})]}),e.jsx("div",{className:"flex-1 min-h-[200px]",children:m.length>0?e.jsx("div",{style:{width:"100%",height:"100%",minHeight:"300px"},children:e.jsx(it,{width:"100%",height:"100%",children:e.jsxs(Pt,{data:m,layout:"vertical",margin:{left:10},children:[e.jsx($t,{strokeDasharray:"3 3",horizontal:!1}),e.jsx(Et,{type:"number",hide:!0}),e.jsx(Bt,{dataKey:"name",type:"category",width:100,tick:{fontSize:11}}),e.jsx(dt,{}),e.jsx(Lt,{dataKey:"value",fill:"#f59e0b",radius:[0,4,4,0],barSize:20})]})})}):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏ç‡∏´‡∏≤"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-blue-600"}),"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition Mix)"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsx("div",{className:"flex-1 min-h-[200px] relative",style:{minHeight:"300px"},children:e.jsx(it,{width:"100%",height:"100%",children:e.jsxs(es,{children:[e.jsx(ts,{data:g,innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:g.map((p,r)=>e.jsx(ss,{fill:p.color},`cell-${r}`))}),e.jsx(dt,{}),e.jsx(ls,{verticalAlign:"bottom",height:36,iconSize:8,wrapperStyle:{fontSize:"11px"}})]})})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-red-500"}),"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Tracking)"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Top 5 ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"})]}),e.jsx("div",{className:"flex-1 min-h-[200px]",children:j.costResponsibleData.length>0?e.jsx("div",{style:{width:"100%",height:"100%",minHeight:"300px"},children:e.jsx(it,{width:"100%",height:"100%",children:e.jsxs(Pt,{data:j.costResponsibleData,layout:"vertical",margin:{left:10},children:[e.jsx($t,{strokeDasharray:"3 3",horizontal:!1}),e.jsx(Et,{type:"number",hide:!0}),e.jsx(Bt,{dataKey:"name",type:"category",width:80,tick:{fontSize:11}}),e.jsx(dt,{formatter:p=>`‡∏ø${p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`}),e.jsx(Lt,{dataKey:"value",fill:"#ef4444",radius:[0,4,4,0],barSize:20})]})})}):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5 text-purple-600"}),"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (NCR Root Cause & Prevention)"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö NCR"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"h-[250px]",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-2",children:"Problem Source Breakdown"}),e.jsx(it,{width:"100%",height:"100%",children:e.jsxs(Pt,{data:h.rootCauseData,children:[e.jsx($t,{strokeDasharray:"3 3",vertical:!1}),e.jsx(Et,{dataKey:"name",tick:{fontSize:10},interval:0,angle:-45,textAnchor:"end",height:60}),e.jsx(Bt,{hide:!0}),e.jsx(dt,{}),e.jsx(Lt,{dataKey:"value",fill:"#8b5cf6",radius:[4,4,0,0],barSize:30})]})})]}),e.jsxs("div",{className:"h-[250px]",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-2",children:"Process Issues (Causes)"}),e.jsx(it,{width:"100%",height:"100%",children:e.jsxs(es,{children:[e.jsx(ts,{data:h.causeData,outerRadius:80,dataKey:"value",label:({name:p,percent:r})=>`${p} ${(r*100).toFixed(0)}%`,children:h.causeData.map((p,r)=>e.jsx(ss,{fill:["#ef4444","#f59e0b","#3b82f6","#10b981"][r%4]},`cell-${r}`))}),e.jsx(dt,{}),e.jsx(ls,{})]})})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center mt-12 mb-8 opacity-70 hover:opacity-100 transition-opacity",children:[e.jsxs("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-6 flex flex-col items-center w-64 hover:shadow-md transition-shadow",children:[e.jsxs("h3",{className:"text-blue-700 font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"})," Sync & Cleanup Data"]}),e.jsx("button",{onClick:t,className:"text-blue-600 underline text-xs cursor-pointer hover:text-blue-800 font-semibold",children:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞"}),e.jsx("div",{className:"text-[10px] text-blue-400 mt-1",children:"Remove orphaned NCR records"})]}),e.jsxs("div",{className:"border border-red-200 bg-red-50 rounded-lg p-6 flex flex-col items-center w-64 hover:shadow-md transition-shadow",children:[e.jsxs("h3",{className:"text-red-700 font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"})," Data Factory Reset"]}),e.jsx("button",{onClick:o,className:"text-red-600 underline text-xs cursor-pointer hover:text-red-800",children:"‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Reset All)"}),e.jsx("div",{className:"text-[10px] text-red-300 mt-1",children:"Delete all 100%"})]})]})]})},Ce=({step:a,title:d,count:c,icon:o,color:t,desc:s,isAlert:n})=>e.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center text-center transition-all ${t} ${n?"ring-2 ring-red-400 bg-red-50":""}`,children:[e.jsxs("div",{className:"text-[10px] font-bold opacity-60 uppercase mb-1",children:["Step ",a]}),e.jsx("div",{className:"mb-2 p-2 bg-white bg-opacity-50 rounded-full",children:e.jsx(o,{className:"w-5 h-5"})}),e.jsx("div",{className:`text-2xl font-bold mb-1 ${n?"text-red-600":""}`,children:c}),e.jsx("div",{className:"text-xs font-bold truncate w-full",children:d}),e.jsx("div",{className:"text-[10px] opacity-70 mt-1",children:s})]}),ft=({title:a,value:d,subText:c,icon:o,color:t,isAlert:s})=>e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-5 flex items-start justify-between transition-transform hover:-translate-y-1 duration-200 ${s?"border-red-200 bg-red-50/10":"border-slate-100"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-slate-500 mb-1",children:a}),e.jsx("h3",{className:`text-2xl font-bold mb-1 ${s?"text-red-600":"text-slate-800"}`,children:d}),e.jsx("p",{className:"text-xs text-slate-400",children:c})]}),e.jsx("div",{className:`p-3 rounded-lg shadow-sm ${t} text-white`,children:e.jsx(o,{className:"w-5 h-5"})})]}),tt=({title:a,count:d,color:c})=>e.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center text-center transition-all ${c}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:d}),e.jsx("div",{className:"text-xs font-bold uppercase opacity-80",children:a})]}),ds=a=>{if(isNaN(a)||a===0)return"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô";const d=["‡∏®‡∏π‡∏ô‡∏¢‡πå","‡∏´‡∏ô‡∏∂‡πà‡∏á","‡∏™‡∏≠‡∏á","‡∏™‡∏≤‡∏°","‡∏™‡∏µ‡πà","‡∏´‡πâ‡∏≤","‡∏´‡∏Å","‡πÄ‡∏à‡πá‡∏î","‡πÅ‡∏õ‡∏î","‡πÄ‡∏Å‡πâ‡∏≤"],c=["","‡∏™‡∏¥‡∏ö","‡∏£‡πâ‡∏≠‡∏¢","‡∏û‡∏±‡∏ô","‡∏´‡∏°‡∏∑‡πà‡∏ô","‡πÅ‡∏™‡∏ô","‡∏•‡πâ‡∏≤‡∏ô"],o=Math.abs(a),t=Math.floor(o).toString(),s=Math.round(o*100%100).toString().padStart(2,"0");let n="";const b=g=>{let m="";for(let h=0;h<g.length;h++){let p=parseInt(g.charAt(h)),r=g.length-h-1;p!==0&&(r===1&&p===2?m+="‡∏¢‡∏µ‡πà":r===1&&p===1||(r===0&&p===1&&g.length>1?m+="‡πÄ‡∏≠‡πá‡∏î":m+=d[p]),m+=c[r])}return m};if(parseInt(t)>0){let g=parseInt(t),m="",h=0;for(;g>0;){const p=(g%1e6).toString(),r=b(p);r&&(m=r+(h>0?"‡∏•‡πâ‡∏≤‡∏ô":"")+m),g=Math.floor(g/1e6),h++}n=m}else n="‡∏®‡∏π‡∏ô‡∏¢‡πå";if(n+="‡∏ö‡∏≤‡∏ó",parseInt(s)===0)n+="‡∏ñ‡πâ‡∏ß‡∏ô";else{let g="",m=parseInt(s.charAt(0)),h=parseInt(s.charAt(1));m>0&&(m===2?g+="‡∏¢‡∏µ‡πà":m===1||(g+=d[m]),g+="‡∏™‡∏¥‡∏ö"),h>0&&(h===1&&m!==1?g+="‡πÄ‡∏≠‡πá‡∏î":h>1&&(g+=d[h])),n+=g+"‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå"}return(a<0?"‡∏•‡∏ö":"")+n},at=a=>{switch(a){case"RTV":return{code:"FM-LOG-05",rev:"00",th:"‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",en:"GOODS RETURN NOTE"};case"Restock":return{code:"FM-SAL-02",rev:"00",th:"‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ",en:"SALES DISPOSAL APPROVAL FORM"};case"Claim":return{code:"FM-CLM-01",rev:"00",th:"‡πÉ‡∏ö‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô",en:"INSURANCE CLAIM DELIVERY NOTE"};case"InternalUse":return{code:"FM-ADM-09",rev:"00",th:"‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô",en:"INTERNAL REQUISITION FORM"};case"Recycle":return{code:"FM-AST-04",rev:"00",th:"‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏±‡∏î‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢/‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô",en:"ASSET WRITE-OFF / SCRAP AUTHORIZATION FORM"};default:return{code:"FM-GEN-00",rev:"00",th:"‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô",en:"RETURN MANAGEMENT DOCUMENT"}}},st={New:"‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ (Good)",BoxDamage:"‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ö‡∏∏‡∏ö (Box Dmg)",WetBox:"‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å (Wet Box)",LabelDefect:"‡∏â‡∏•‡∏≤‡∏Å‡∏•‡∏≠‡∏Å (Label)",Expired:"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (Expired)",Damaged:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î/‡∏ã‡∏≤‡∏Å (Damaged)",Defective:"‡πÄ‡∏™‡∏µ‡∏¢ (Defective)"},Ke={RTV:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return)",Restock:"‡∏Ç‡∏≤‡∏¢ (Sell)",Recycle:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)",InternalUse:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",Claim:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (Claim)"},It={‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏ö‡∏ô‡∏£‡∏ñ:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏±‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏°‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÑ‡∏°‡πà‡∏î‡∏µ:"‡πÄ‡∏Ñ‡∏•‡∏°‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏±‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö‡∏£‡∏∏‡πà‡∏ô‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö‡∏£‡∏∏‡πà‡∏ô‡∏à‡∏≤‡∏Å‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Å‡∏±‡∏î:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏°‡∏π‡∏•‡∏ô‡∏Å:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡∏•‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤"},Ol=(a,d,c=7,o=0)=>{const t=a.reduce((g,m)=>g+(m.priceBill||0),0),s=t*(o/100),n=t-s,b=d?n*(c/100):0,j=n+b;return{subtotal:t,discount:s,afterDiscount:n,vat:b,net:j}},us=(a,d)=>{const{items:c,addReturnRecord:o,updateReturnRecord:t,addNCRReport:s,getNextNCRNumber:n,getNextReturnNumber:b}=ge(),[j,g]=N.useState(1),[m,h]=N.useState(!1),[p,r]=N.useState(null),[I,l]=N.useState(null),[w,v]=N.useState(!1),[k,y]=N.useState(0),[i,O]=N.useState("Damaged"),[B,D]=N.useState(!1),[F,Y]=N.useState(1),[R,$]=N.useState(""),[X,ce]=N.useState(null),[H,f]=N.useState(null),[M,U]=N.useState({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),[K,C]=N.useState(!1),[Z,le]=N.useState(!1),[me,z]=N.useState(null),[xe,we]=N.useState(!0),[fe,se]=N.useState(7),[Ne,Oe]=N.useState(0),[Ae,Re]=N.useState(!1),[_e,Q]=N.useState({companyNameTH:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î",companyNameEN:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD.",address:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000",contact:"Tel: 056-275-841 Email: info_nw@neosiamlogistics.com",titleTH:"",titleEN:"",remarks:"1. ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 7 ‡∏ß‡∏±‡∏ô",signatory1:"‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥ (Prepared By)",signatory2:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Checked By)",signatory3:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Approved By)"}),[u,L]=N.useState(!1),[q,je]=N.useState(null),[Pe,Te]=N.useState([]),[x,P]=N.useState(new Set),[G,J]=N.useState(!1),[oe,ae]=N.useState(null),[pe,Le]=N.useState(!1),[He,We]=N.useState(null),Xe={branch:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å",date:new Date().toISOString().split("T")[0],quantity:1,unit:"‡∏ä‡∏¥‡πâ‡∏ô",pricePerUnit:0,priceBill:0,priceSell:0,status:"Draft",disposition:"Pending",condition:"Unknown",productCode:"",productName:"",expiryDate:"",notes:"",ncrNumber:"",refNo:"",neoRefNo:"",customerName:"",destinationCustomer:"",problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionScrapReplace:!1,actionScrapReplaceQty:0,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",images:[],hasCost:!1,costAmount:0,costResponsible:"",problemSource:"",problemAnalysis:void 0,problemAnalysisSub:"",problemAnalysisCause:"",problemAnalysisDetail:"",preliminaryDecision:void 0,preliminaryRoute:""},[$e,Ee]=N.useState(Xe),[ve,ht]=N.useState([]),[ys,zt]=N.useState(""),[Cs,Vt]=N.useState(""),Gt=c.filter(S=>S.status==="Requested"&&S.documentType!=="NCR"),ks=c.filter(S=>S.documentType==="NCR"||!!S.ncrNumber?S.status==="Requested"||S.status==="COL_JobAccepted":S.status==="COL_Consolidated"),Rs=c.filter(S=>S.status==="JobAccepted"),Ss=c.filter(S=>S.status==="BranchReceived"),Kt=c.filter(S=>S.status==="ReadyForLogistics"),Tt=c.filter(S=>S.status==="InTransitToHub"||S.status==="NCR_InTransit"||S.status==="COL_InTransit"),gt=c.filter(S=>{const E=S.documentType==="NCR"||!!S.ncrNumber||S.status.startsWith("NCR_");return E?E?S.status==="NCR_QCPassed"||S.status==="QCPassed"||S.status==="QCCompleted":!1:S.status==="COL_HubReceived"||S.status==="ReceivedAtHub"||S.status==="HubReceived"||S.status==="QCCompleted"}),Jt=c.filter(S=>S.status==="DocsCompleted"||S.status==="ReturnToSupplier"||S.status==="DirectReturn"),Ds=c.filter(S=>S.status==="Completed"),Is=Kt,Ts=Tt,Os=gt,As=Jt,Ps=Gt,$s=Tt,Es=[],Bs=gt,Ls=te.useMemo(()=>{const S=c.map(_=>_.customerName).filter(Boolean),E=ve.map(_=>_.customerName).filter(Boolean);return Array.from(new Set([...S,...E])).sort()},[c,ve]),Ms=te.useMemo(()=>{const S=c.map(_=>_.destinationCustomer).filter(Boolean),E=ve.map(_=>_.destinationCustomer).filter(Boolean);return Array.from(new Set([...S,...E])).sort()},[c,ve]),qs=te.useMemo(()=>{const S=c.map(_=>_.founder).filter(Boolean),E=ve.map(_=>_.founder).filter(Boolean);return Array.from(new Set([...S,...E])).sort()},[c,ve]),Fs=te.useMemo(()=>{const S=c.map(_=>_.productCode).filter(Boolean),E=ve.map(_=>_.productCode).filter(Boolean);return Array.from(new Set([...S,...E])).sort()},[c,ve]),_s=te.useMemo(()=>{const S=c.map(_=>_.productName).filter(Boolean),E=ve.map(_=>_.productName).filter(Boolean);return Array.from(new Set([...S,...E])).sort()},[c,ve]);N.useEffect(()=>{a&&(g(1),Ee(S=>({...S,...a,date:a.date||S.date,branch:a.branch||S.branch})),d&&d())},[a,d]);const Hs=(S,E)=>{U(_=>({..._,[S]:E}))};return N.useEffect(()=>{if($e.hasCost&&$e.problemSource){const S=It[$e.problemSource];S&&Ee(E=>({...E,costResponsible:S}))}},[$e.problemSource,$e.hasCost]),{state:{activeStep:j,isCustomBranch:m,qcSelectedItem:p,customInputType:I,showSplitMode:w,splitQty:k,splitCondition:i,isBreakdownUnit:B,conversionRate:F,newUnitName:R,splitDisposition:X,selectedDisposition:H,dispositionDetails:M,isCustomRoute:K,showDocModal:Z,docData:me,includeVat:xe,vatRate:fe,discountRate:Ne,isDocEditable:Ae,docConfig:_e,showSelectionModal:u,selectionStatus:q,selectionItems:Pe,selectedItemIds:x,formData:$e,requestItems:ve,customProblemType:ys,customRootCause:Cs,docSelectedItem:oe,showStep4SplitModal:pe},derived:{uniqueCustomers:Ls,uniqueDestinations:Ms,uniqueFounders:qs,uniqueProductCodes:Fs,uniqueProductNames:_s,step2Items:Gt,step3Items:Rs,step4Items:Ss,step5Items:Kt,step6Items:Tt,step7Items:gt,step8Items:Jt,ncrStep2Items:ks,completedItems:Ds,logisticItems:Is,hubReceiveItems:Ts,hubDocItems:Os,closureItems:As,requestedItems:Ps,receivedItems:$s,gradedItems:Es,docItems:Bs,processedItems:gt},actions:{setActiveStep:g,setIsCustomBranch:h,setFormData:Ee,setRequestItems:ht,handleImageUpload:S=>{S.target.files&&Array.from(S.target.files).forEach(_=>{const ee=new FileReader;ee.onloadend=()=>{Ee(W=>({...W,images:[...W.images||[],ee.result]}))},ee.readAsDataURL(_)})},handleRemoveImage:S=>{Ee(E=>({...E,images:(E.images||[]).filter((_,ee)=>ee!==S)}))},handleAddItem:(S,E)=>{S&&S.preventDefault();const ee={...E||$e};ht(W=>[...W,ee]),Ee(W=>({...Xe,founder:W.founder,branch:W.branch,date:W.date,customerName:W.customerName,destinationCustomer:W.destinationCustomer,neoRefNo:W.neoRefNo,refNo:W.refNo,problemAnalysis:W.problemAnalysis})),zt(""),Vt("")},handleRemoveItem:S=>{ht(E=>E.filter((_,ee)=>ee!==S))},handleRequestSubmit:async S=>{let E=S&&S.length>0?S:[...ve];if(E.length===0){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",confirmButtonColor:"#3085d6"});return}if(!G){J(!0);try{let _=0,ee=[];for(const W of E){let be=W.ncrNumber;W.documentType==="NCR"&&!be&&(be=await n());const ye=await b(),A={...W,id:ye,refNo:ye,amount:(W.quantity||0)*(W.priceBill||0),reason:W.problemDetail||W.notes||"‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",status:"Requested",dateRequested:W.date||new Date().toISOString().split("T")[0],disposition:"Pending",condition:"Unknown",productName:W.productName||"Unknown Product",productCode:W.productCode||"N/A",customerName:W.customerName||"Unknown Customer",category:"General",ncrNumber:be},Ue=JSON.parse(JSON.stringify(A));if(await o(Ue)){if(A.documentType==="NCR"){const Ze={id:be+"-"+A.id,ncrNo:be,date:A.dateRequested,toDept:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",founder:A.founder||"Operations Hub",poNo:"",copyTo:"",problemDamaged:A.problemDamaged,problemDamagedInBox:A.problemDamagedInBox,problemLost:A.problemLost,problemMixed:A.problemMixed,problemWrongInv:A.problemWrongInv,problemLate:A.problemLate,problemDuplicate:A.problemDuplicate,problemWrong:A.problemWrong,problemIncomplete:A.problemIncomplete,problemOver:A.problemOver,problemWrongInfo:A.problemWrongInfo,problemShortExpiry:A.problemShortExpiry,problemTransportDamage:A.problemTransportDamage,problemAccident:A.problemAccident,problemPOExpired:A.problemPOExpired,problemNoBarcode:A.problemNoBarcode,problemNotOrdered:A.problemNotOrdered,problemOther:A.problemOther,problemOtherText:A.problemOtherText,problemDetail:A.problemDetail||A.reason||"",problemAnalysis:A.problemAnalysis,problemAnalysisSub:A.problemAnalysisSub,problemAnalysisCause:A.problemAnalysisCause,problemAnalysisDetail:A.problemAnalysisDetail,item:{id:A.id,branch:A.branch,refNo:A.refNo,neoRefNo:A.neoRefNo,productCode:A.productCode,productName:A.productName,customerName:A.customerName,destinationCustomer:A.destinationCustomer,quantity:A.quantity,unit:A.unit||"PCS",priceBill:A.priceBill,pricePerUnit:A.pricePerUnit||0,expiryDate:A.expiryDate,hasCost:A.hasCost,costAmount:A.costAmount,costResponsible:A.costResponsible,problemSource:A.problemSource||A.problemAnalysis||"-"},actionReject:A.actionReject,actionRejectQty:A.actionRejectQty,actionRejectSort:A.actionRejectSort,actionRejectSortQty:A.actionRejectSortQty,actionRework:A.actionRework,actionReworkQty:A.actionReworkQty,actionReworkMethod:A.actionReworkMethod,actionSpecialAccept:A.actionSpecialAcceptance,actionSpecialAcceptQty:A.actionSpecialAcceptanceQty,actionSpecialAcceptReason:A.actionSpecialAcceptanceReason,actionScrap:A.actionScrap,actionScrapQty:A.actionScrapQty,actionReplace:A.actionScrapReplace,actionReplaceQty:A.actionScrapReplaceQty,causePackaging:A.causePackaging,causeTransport:A.causeTransport,causeOperation:A.causeOperation,causeEnv:A.causeEnv,causeDetail:A.causeDetail,preventionDetail:A.preventionDetail,preventionDueDate:"",responsiblePerson:"",responsiblePosition:"",qaAccept:!1,qaReject:!1,qaReason:"",dueDate:"",approver:"",approverPosition:"",approverDate:"",status:"Open"},et=JSON.parse(JSON.stringify(Ze));await s(et)}_++}}_>0&&(await T.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ",timer:2e3,showConfirmButton:!1}),Ee(Xe),ht([]),zt(""),Vt(""),h(!1),g(2))}catch(_){console.error("Submission error:",_),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà",confirmButtonColor:"#d33"})}finally{J(!1)}}},handleLogisticsSubmit:async(S,E,_)=>{try{if(console.log(`[Logistics] HandleSubmit Called. IDs: ${S.length}, Route: ${E}`),!S||S.length===0){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"});return}const ee=_.destination||(E==="Hub"?"Hub (Nakhon Sawan)":"Unknown"),W=_.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?_.driverName:"-",be=_.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?_.plateNumber:"-",ye=_.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó":_.transportCompany,A=`[Transport] Driver: ${W}, Plate: ${be}, Company: ${ye} | Dest: ${ee}`,Ue=E==="Hub"?{status:"NCR_InTransit",notes:A,dispositionRoute:ee,dateInTransit:new Date().toISOString(),transportPlate:be,transportDriver:W,transportCompany:ye,disposition:null}:{status:"DirectReturn",notes:A,dispositionRoute:ee,disposition:"RTV",destinationCustomer:ee,dateInTransit:new Date().toISOString(),transportPlate:be,transportDriver:W,transportCompany:ye},ze=c.filter(Ve=>S.includes(String(Ve.id)));if(!ze||ze.length===0){console.error("Critical Error: Items not found for IDs:",S),console.log("Current Items:",c.map(Ve=>Ve.id)),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:`‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
Selected: ${S.join(", ")}`});return}We({ids:S,updatePayload:Ue});const Ze=E==="Hub"?"‡πÉ‡∏ö‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Transfer Note)":"‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Note)",et=E==="Hub"?"TRANSFER NOTE":"RETURN NOTE";Q(Ve=>({...Ve,titleTH:Ze,titleEN:et})),z({type:"RTV",items:ze}),we(!0),Re(!1),console.log("Opening Document Modal for Logistics..."),le(!0)}catch(ee){console.error("HandleLogisticsSubmit Error:",ee),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö",text:String(ee)})}},handleIntakeReceive:async S=>{var W,be,ye,A,Ue;const E=c.find(ze=>ze.id===S);if(!E)return;const _=new Date().toISOString().split("T")[0];((W=E.refNo)==null?void 0:W.startsWith("R-"))||((be=E.refNo)==null?void 0:be.startsWith("COL-"))||((ye=E.refNo)==null?void 0:ye.startsWith("RT-"))||((A=E.neoRefNo)==null?void 0:A.startsWith("R-"))||((Ue=E.neoRefNo)==null?void 0:Ue.startsWith("COL-"))?(await t(S,{status:"Graded",dateReceived:_,dateGraded:_,disposition:"RTV",condition:"Good",notes:(E.notes||"")+" [Auto-Pass QC: Collection Item]"}),await T.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!",text:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Collection ‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô QC ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",timer:2e3,showConfirmButton:!1})):await t(S,{status:"ReceivedAtHub",dateReceived:_})},selectQCItem:S=>{r(S),l(null),f(null),U({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),C(!1)},handleConditionSelect:(S,E)=>{p&&(S==="Other"?(l(E||null),r({...p,condition:""})):(l(null),r({...p,condition:S})))},setQcSelectedItem:r,setCustomInputType:l,setSelectedDisposition:f,setIsCustomRoute:C,handleDispositionDetailChange:Hs,handleQCSubmit:async()=>{if(!p||!H)return;if(!p.condition||p.condition==="Unknown"){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","","warning");return}const S=new Date().toISOString().split("T")[0];await t(p.id,{condition:p.condition,disposition:H,status:"QCPassed",dateGraded:S,dispositionRoute:M.route,sellerName:M.sellerName,contactPhone:M.contactPhone,internalUseDetail:M.internalUseDetail,claimCompany:M.claimCompany,claimCoordinator:M.claimCoordinator,claimPhone:M.claimPhone})&&(r(null),f(null),l(null),C(!1),T.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• QC ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"Ready for Docs",timer:1500,showConfirmButton:!1}))},setShowSplitMode:v,setIsBreakdownUnit:D,setConversionRate:Y,setNewUnitName:$,setSplitQty:y,setSplitCondition:O,setSplitDisposition:ce,handleSplitSubmit:async()=>{const S=(p==null?void 0:p.quantity)||0,E=B?S*F:S;if(!Number.isInteger(k)){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°","","warning");return}if(!p||k<=0||k>=E){T.fire("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",`‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0 ‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${E})`,"warning");return}if(!p.condition||p.condition==="Unknown"){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å","","warning");return}if(!H){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)","","warning");return}const _=p.priceBill||0,ee=p.pricePerUnit||_/(p.quantity||1);let W=ee;B&&F>1&&(W=ee/F);const be=B?R||"Sub-unit":p.unit,ye=E-k,A=ye*W,Ue=k*W,Ze=(p.priceSell||0)/(p.quantity||1),et=B&&F>1?Ze/F:Ze,Yt=ye*et,Ve=k*et,Ot=new Date().toISOString().split("T")[0],Us=await t(p.id,{quantity:ye,unit:be,priceBill:A,pricePerUnit:W,priceSell:Yt,condition:p.condition,disposition:H,status:"QCPassed",dateGraded:Ot,dispositionRoute:M.route,sellerName:M.sellerName,contactPhone:M.contactPhone,internalUseDetail:M.internalUseDetail,claimCompany:M.claimCompany,claimCoordinator:M.claimCoordinator,claimPhone:M.claimPhone}),Qs=`${p.id}-S${Math.floor(Math.random()*100)}`,ct={...p,id:Qs,quantity:k,unit:be,priceBill:Ue,pricePerUnit:W,priceSell:Ve,condition:i,status:X?"QCPassed":"ReceivedAtHub",refNo:`${p.refNo} (Split)`,dateReceived:Ot};X?(ct.disposition=X,ct.dateGraded=Ot):(delete ct.disposition,delete ct.dateGraded);const Ws=await o(ct);Us&&Ws?(r(null),f(null),l(null),C(!1),v(!1),y(0),D(!1),Y(1),$(""),ce(null),T.fire({icon:"success",title:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})):T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","","error")},toggleSplitMode:()=>{w||(y(0),ce(null),O("New"),D(!1),Y(1),$("")),v(!w)},handlePrintClick:(S,E)=>{if(!E||E.length===0){T.fire("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡∏µ‡πâ","","info");return}je(S),Te(E),P(new Set(E.map(_=>_.id))),L(!0)},toggleSelection:S=>{const E=new Set(x);E.has(S)?E.delete(S):E.add(S),P(E)},setShowSelectionModal:L,handleGenerateDoc:()=>{if(!q)return;const S=Pe.filter(_=>x.has(_.id));if(S.length===0){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£","","warning");return}const E=at(q);Q(_=>({..._,titleTH:E.th,titleEN:E.en})),z({type:q,items:S}),we(!0),L(!1),le(!0),Re(!1)},setIncludeVat:we,setVatRate:se,setDiscountRate:Oe,setIsDocEditable:Re,setDocConfig:Q,setShowDocModal:le,handleConfirmDocGeneration:async()=>{if(!me)return;const S=new Date().toISOString().split("T")[0];if(He){let _=0;for(const ee of He.ids)await t(ee,{...He.updatePayload})&&_++;_>0?(T.fire({icon:"success",title:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:`‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! (${_} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`,timer:2e3,showConfirmButton:!1}),le(!1),We(null)):T.fire("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ (Update Failed)","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console","error");return}let E=0;for(const _ of me.items)await t(_.id,{status:"ReturnToSupplier",dateDocumented:S})&&E++;E>0&&(T.fire({icon:"success",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:`${E} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -> ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô "‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"`,timer:2e3,showConfirmButton:!1}),le(!1))},handleUpdateDocItem:async(S,E)=>{await t(S,E),z(_=>_?{..._,items:_.items.map(ee=>ee.id===S?{...ee,...E}:ee)}:null)},setDocSelectedItem:ae,setShowStep4SplitModal:Le,handleDocItemClick:S=>{ae(S),Le(!0)},handleStep4SplitSubmit:async(S,E,_=!1,ee=1,W="",be)=>{oe&&(oe.quantity,T.fire("Split functionality pending","This feature is pending implementation for Step 4 direct usage.","info"))}}}},Al=({isOpen:a,onClose:d,onConfirm:c,itemCount:o})=>a?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-scale-in",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Fe,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"}),e.jsxs("p",{className:"text-slate-500 mb-6",children:["‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ",e.jsx("span",{className:"font-bold text-slate-800",children:o})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-slate-400",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ"})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:d,className:"px-5 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-colors w-full",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:c,className:"px-5 py-2.5 rounded-xl bg-green-600 text-white font-bold hover:bg-green-700 shadow-lg shadow-green-200 transition-all w-full",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"})]})]})})}):null,rt=["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","‡∏Ñ‡∏•‡∏≠‡∏á 13","‡∏ã‡∏µ‡πÇ‡∏ô‡πà","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"],Pl=["‡∏™‡∏≤‡∏¢ 3","Sino Pacific Trading","NEO CORPORATE"],$l=new Date,V=a=>{const d=new Date($l);return d.setDate(d.getDate()-a),d.toISOString().split("T")[0]};V(0),V(0),V(1),V(2),V(1),V(1),V(3),V(2),V(1),V(2),V(4),V(3),V(2),V(3),V(6),V(5),V(4),V(3),V(4),V(8),V(7),V(6),V(5),V(4),V(5),V(7),V(6),V(6),V(5),V(5),V(6),V(6),V(6);V(1),V(2),V(1);const El=({isOpen:a,onClose:d,item:c,onSave:o})=>{const[t,s]=N.useState({}),[n,b]=N.useState("problem"),[j,g]=N.useState(""),[m,h]=N.useState(""),[p,r]=N.useState("");N.useEffect(()=>{a&&c&&(s({...c}),g(c.preliminaryDecision||""),h(c.preliminaryRoute||""),c.preliminaryRoute&&!["‡∏™‡∏≤‡∏¢ 3","Sino Pacific Trading","NEO CORPORATE","Other"].includes(c.preliminaryRoute)?(h("Other"),r(c.preliminaryRoute)):c.preliminaryRoute==="Other"&&r(""))},[a,c]);const I=i=>{s(O=>O[i]?{...O,[i]:!1}:{...O,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,[i]:!0})},l=i=>{s(O=>O[i]?{...O,[i]:!1}:{...O,problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,[i]:!0})},w=i=>{s(O=>O[i]?{...O,[i]:!1}:{...O,actionReject:!1,actionRejectSort:!1,actionRework:!1,actionSpecialAcceptance:!1,actionScrap:!1,actionScrapReplace:!1,[i]:!0})},v=i=>{if(i.target.files&&i.target.files.length>0){const B=Array.from(i.target.files).map(D=>new Promise((F,Y)=>{const R=new FileReader;R.onloadend=()=>F(R.result),R.onerror=Y,R.readAsDataURL(D)}));Promise.all(B).then(D=>{s(F=>({...F,images:[...F.images||[],...D]}))})}},k=i=>{s(O=>({...O,images:(O.images||[]).filter((B,D)=>D!==i)}))},y=()=>{if(!t.problemAnalysis){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Analysis)"});return}if(!j){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (Preliminary Decision)"});return}if(j==="Return"&&!m){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"});return}if(j==="Return"&&m==="Other"&&!p){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ"});return}o({...t,preliminaryDecision:j,preliminaryRoute:m==="Other"?p:m}),d()};return a?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full h-full shadow-2xl flex flex-col animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-100 bg-slate-50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ & ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[c.productCode," - ",c.productName]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:e.jsx(de,{className:"w-5 h-5 text-slate-500"})})]}),e.jsxs("div",{className:"flex border-b border-slate-200 bg-white sticky top-0 z-10",children:[e.jsxs("button",{onClick:()=>b("problem"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${n==="problem"?"border-red-500 text-red-600 bg-red-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(nt,{className:"w-4 h-4"})," ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö"]}),e.jsxs("button",{onClick:()=>b("analysis"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${n==="analysis"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(qe,{className:"w-4 h-4"})," ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå & ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à"]}),e.jsxs("button",{onClick:()=>b("action"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${n==="action"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Ft,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("button",{onClick:()=>b("cost"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${n==="cost"?"border-amber-500 text-amber-600 bg-amber-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Me,{className:"w-4 h-4"})," ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 bg-slate-50/50",children:[n==="problem"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-red-50 px-4 py-2 border-b border-red-100 font-bold text-red-700 flex items-center gap-2 text-sm",children:[e.jsx(nt,{className:"w-4 h-4"})," ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border-r border-slate-100 pr-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 min-h-[150px] border-2 border-dashed border-slate-300 rounded-lg hover:bg-slate-50 transition-colors relative",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:v,className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx(kt,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("span",{className:"text-xs font-bold",children:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"})]}),t.images&&t.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-4",children:t.images.map((i,O)=>e.jsxs("div",{className:"relative group aspect-square bg-slate-100 rounded overflow-hidden border border-slate-200",children:[e.jsx("img",{src:i,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>k(O),type:"button",className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(De,{className:"w-3 h-3"})})]},O))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"mb-2 font-bold underline text-slate-800 text-sm",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-slate-700 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDamaged,onChange:()=>l("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDamagedInBox,onChange:()=>l("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemLost,onChange:()=>l("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemMixed,onChange:()=>l("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrongInv,onChange:()=>l("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemLate,onChange:()=>l("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDuplicate,onChange:()=>l("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrong,onChange:()=>l("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemIncomplete,onChange:()=>l("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemOver,onChange:()=>l("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrongInfo,onChange:()=>l("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemShortExpiry,onChange:()=>l("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemTransportDamage,onChange:()=>l("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemAccident,onChange:()=>l("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemPOExpired,onChange:()=>l("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemNoBarcode,onChange:()=>l("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemNotOrdered,onChange:()=>l("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox",checked:t.problemOther,onChange:()=>l("problemOther")})," ",e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700",value:t.problemOtherText||"",onChange:i=>s({...t,problemOtherText:i.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold underline text-sm text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{value:t.problemDetail||"",onChange:i=>s({...t,problemDetail:i.target.value}),className:"w-full mt-1 p-2 bg-slate-50 border rounded text-sm min-h-[80px]",placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."})]})]})]})]})}),n==="analysis"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-200 font-bold text-slate-700 flex items-center gap-2 text-sm",children:[e.jsx(vt,{className:"w-4 h-4 text-indigo-500"})," ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Analysis)"]}),e.jsxs("div",{className:"p-4 bg-white space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Customer",onChange:()=>s({...t,problemAnalysis:"Customer"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="DestinationCustomer",onChange:()=>s({...t,problemAnalysis:"DestinationCustomer"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Accounting",onChange:()=>s({...t,problemAnalysis:"Accounting"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Keying",onChange:()=>s({...t,problemAnalysis:"Keying"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ñ‡∏µ‡∏¢‡πå‡∏ú‡∏¥‡∏î"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Warehouse",onChange:()=>s({...t,problemAnalysis:"Warehouse"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Transport",onChange:()=>s({...t,problemAnalysis:"Transport"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ç‡∏ô‡∏™‡πà‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Other",onChange:()=>s({...t,problemAnalysis:"Other"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]}),t.problemAnalysis==="Warehouse"&&e.jsx("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsxs("select",{value:t.problemAnalysisSub||"",onChange:i=>s({...t,problemAnalysisSub:i.target.value}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --"}),rt.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"whCause",checked:t.problemAnalysisCause==="Checker",onChange:()=>s({...t,problemAnalysisCause:"Checker"})})," ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"whCause",checked:t.problemAnalysisCause==="Unloader",onChange:()=>s({...t,problemAnalysisCause:"Unloader"})})," ‡∏•‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]})]})]})]})}),t.problemAnalysis==="Transport"&&e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-sm",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="CompanyDriver",onChange:()=>s({...t,problemAnalysisSub:"CompanyDriver"})})," ‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="JointTransport",onChange:()=>s({...t,problemAnalysisSub:"JointTransport"})})," ‡∏£‡∏ñ‡∏£‡πà‡∏ß‡∏°"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="Other",onChange:()=>s({...t,problemAnalysisSub:"Other"})})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]})]}),t.problemAnalysis==="Other"&&e.jsx("input",{type:"text",value:t.problemAnalysisDetail||"",onChange:i=>s({...t,problemAnalysisDetail:i.target.value}),className:"w-full p-2 border rounded text-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..."})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-indigo-50/30",children:[e.jsxs("div",{className:"bg-indigo-100 px-4 py-2 border-b border-indigo-200 font-bold text-indigo-800 flex items-center gap-2 text-sm",children:[e.jsx(al,{className:"w-4 h-4"})," ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (Preliminary Decision)"]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{g("Return"),h("")},className:`p-2 rounded border flex flex-col items-center gap-1 text-xs font-bold transition-all ${j==="Return"?"bg-indigo-100 border-indigo-500 text-indigo-700":"bg-white hover:bg-indigo-50"}`,children:[e.jsx(ne,{className:"w-5 h-5"})," Return"]}),e.jsxs("button",{type:"button",onClick:()=>g("Sell"),className:`p-2 rounded border flex flex-col items-center gap-1 text-xs font-bold transition-all ${j==="Sell"?"bg-green-100 border-green-500 text-green-700":"bg-white hover:bg-green-50"}`,children:[e.jsx(Me,{className:"w-5 h-5"})," Sell"]}),e.jsxs("button",{type:"button",onClick:()=>g("Scrap"),className:`p-2 rounded border flex flex-col items-center gap-1 text-xs font-bold transition-all ${j==="Scrap"?"bg-red-100 border-red-500 text-red-700":"bg-white hover:bg-red-50"}`,children:[e.jsx(De,{className:"w-5 h-5"})," Scrap"]}),e.jsxs("button",{type:"button",onClick:()=>g("Internal"),className:`p-2 rounded border flex flex-col items-center gap-1 text-xs font-bold transition-all ${j==="Internal"?"bg-amber-100 border-amber-500 text-amber-700":"bg-white hover:bg-amber-50"}`,children:[e.jsx(Rt,{className:"w-5 h-5"})," Internal"]}),e.jsxs("button",{type:"button",onClick:()=>g("Claim"),className:`p-2 rounded border flex flex-col items-center gap-1 text-xs font-bold transition-all ${j==="Claim"?"bg-blue-100 border-blue-500 text-blue-700":"bg-white hover:bg-blue-50"}`,children:[e.jsx(ie,{className:"w-5 h-5"})," Claim"]})]}),j==="Return"&&e.jsxs("div",{className:"mt-3 p-3 bg-white rounded border border-indigo-100 animate-fade-in text-sm",children:[e.jsx("label",{className:"block font-bold mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["‡∏™‡∏≤‡∏¢ 3","Sino Pacific Trading","NEO CORPORATE","Other"].map(i=>e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer ${m===i?"bg-indigo-50 border-indigo-500 text-indigo-700":"bg-slate-50"}`,children:[e.jsx("input",{type:"radio",name:"route",value:i,checked:m===i,onChange:O=>h(O.target.value),className:"hidden"}),i]},i))}),m==="Other"&&e.jsx("input",{type:"text",value:p,onChange:i=>r(i.target.value),className:"w-full mt-2 p-2 border rounded text-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á..."})]})]})]})]}),n==="action"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-blue-50 px-4 py-2 border-b border-blue-100 font-bold text-blue-700 flex items-center gap-2 text-sm",children:[e.jsx(Ft,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("div",{className:"p-4 bg-white space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-b border-slate-100 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.actionReject,onChange:()=>w("actionReject"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:t.actionRejectQty,onChange:i=>s({...t,actionRejectQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.actionRejectSort,onChange:()=>w("actionRejectSort"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-40",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:t.actionRejectSortQty,onChange:i=>s({...t,actionRejectSortQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.actionRework,onChange:()=>w("actionRework"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:t.actionReworkQty,onChange:i=>s({...t,actionReworkQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:"}),e.jsx("input",{type:"text",value:t.actionReworkMethod,onChange:i=>s({...t,actionReworkMethod:i.target.value}),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.actionSpecialAcceptance,onChange:()=>w("actionSpecialAcceptance"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:t.actionSpecialAcceptanceQty,onChange:i=>s({...t,actionSpecialAcceptanceQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö:"}),e.jsx("input",{type:"text",value:t.actionSpecialAcceptanceReason,onChange:i=>s({...t,actionSpecialAcceptanceReason:i.target.value}),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.actionScrap,onChange:()=>w("actionScrap"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:t.actionScrapQty,onChange:i=>s({...t,actionScrapQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.actionScrapReplace,onChange:()=>w("actionScrapReplace"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:t.actionScrapReplaceQty,onChange:i=>s({...t,actionScrapReplaceQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]})]})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm mt-6",children:[e.jsxs("div",{className:"bg-purple-50 px-4 py-2 border-b border-purple-100 font-bold text-purple-700 flex items-center gap-2 text-sm",children:[e.jsx(qe,{className:"w-4 h-4"})," ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold underline text-slate-800",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å:"}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causePackaging,onChange:()=>I("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeTransport,onChange:()=>I("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeOperation,onChange:()=>I("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeEnv,onChange:()=>I("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("textarea",{value:t.causeDetail||"",onChange:i=>s({...t,causeDetail:i.target.value}),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("textarea",{value:t.preventionDetail||"",onChange:i=>s({...t,preventionDetail:i.target.value}),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô..."})]})]})]})]})]}),n==="cost"&&e.jsx("div",{className:"animate-fade-in",children:e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-amber-50 px-4 py-2 border-b border-amber-100 font-bold text-amber-700 flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Tracking)"]}),e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.hasCost||!1,onChange:i=>s({...t,hasCost:i.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500 border-slate-300"}),e.jsx("span",{className:"font-bold text-amber-600",children:"‚ö† ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Has Cost)"})]}),t.hasCost&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in bg-amber-50 p-4 rounded-lg border border-amber-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Problem Source)"}),e.jsxs("select",{value:t.problemSource||"",onChange:i=>s({...t,problemSource:i.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"-- ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ --"}),Object.keys(It).map(i=>e.jsx("option",{value:i,children:i},i)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"}),e.jsx("input",{type:"number",step:"0.01",value:t.costAmount||"",onChange:i=>s({...t,costAmount:Number(i.target.value)}),onBlur:i=>s({...t,costAmount:parseFloat(parseFloat(i.target.value).toFixed(2))}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsx("input",{type:"text",value:t.costResponsible||"",onChange:i=>s({...t,costResponsible:i.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg bg-white text-slate-800 font-bold",placeholder:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á"})]})]})]})]})})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-end gap-3 bg-slate-50",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:y,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 flex items-center gap-2 shadow-sm",children:[e.jsx(Fe,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"]})]})]})}):null},Bl=({formData:a,updateField:d,isCustomBranch:c,setIsCustomBranch:o})=>e.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (To Dept)"}),e.jsx("input",{type:"text",value:a.toDept||"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",onChange:t=>d("toDept",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",required:!0,value:a.date,onChange:t=>d("date",t.target.value),className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm"}),e.jsx(Qe,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤ (Copy To)"}),e.jsx("input",{type:"text",value:a.copyTo||"",onChange:t=>d("copyTo",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏≥‡πÄ‡∏ô‡∏≤..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),c?e.jsxs("div",{className:"flex gap-2 animate-fade-in relative",children:[e.jsx("input",{type:"text",required:!0,value:a.branch,onChange:t=>d("branch",t.target.value),className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤...",autoFocus:!0}),e.jsx(Be,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"text-xs text-blue-600 hover:underline absolute right-3 top-3 bg-white px-2",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("select",{required:!0,value:a.branch,onChange:t=>{t.target.value==="Other"?o(!0):d("branch",t.target.value)},className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm appearance-none",children:[e.jsx("option",{value:"",disabled:!0,children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),rt.map(t=>e.jsx("option",{value:t,children:t},t)),e.jsx("option",{value:"Other",children:"+ ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏≠‡∏á..."})]}),e.jsx(Be,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï (PO No.)"}),e.jsx("input",{type:"text",value:a.poNo||"",onChange:t=>d("poNo",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà PO..."})]})]})]}),pt=({label:a,value:d,onChange:c,options:o,placeholder:t,required:s})=>{const[n,b]=N.useState(!1),j=N.useRef(null);N.useEffect(()=>{function m(h){j.current&&!j.current.contains(h.target)&&b(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const g=o.filter(m=>m.toLowerCase().includes((d||"").toLowerCase()));return e.jsxs("div",{className:"relative",ref:j,children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[a," ",s&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:d,onChange:m=>{c(m.target.value),b(!0)},onFocus:()=>b(!0),placeholder:t,required:s}),n&&g.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:g.map((m,h)=>e.jsx("button",{type:"button",className:"w-full text-left px-4 py-2 text-sm hover:bg-blue-50 text-slate-700 block border-b border-slate-50 last:border-0",onClick:()=>{c(m),b(!1)},children:m},h))})]})},Ll=({formData:a,updateField:d,uniqueCustomers:c,uniqueDestinations:o,uniqueFounders:t})=>e.jsxs("div",{className:"border border-slate-200 rounded-xl p-6 bg-white shadow-sm relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500 rounded-tl-xl rounded-bl-xl"}),e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2",children:[e.jsx(xs,{className:"w-5 h-5 text-blue-500"})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (Header Info)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Founder) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(pt,{label:"",required:!0,value:a.founder||"",onChange:s=>d("founder",s),options:t,placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer Name)"}),e.jsx(pt,{label:"",value:a.customerName||"",onChange:s=>d("customerName",s),options:c,placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (Destination / Site) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(pt,{label:"",required:!0,value:a.destinationCustomer||"",onChange:s=>d("destinationCustomer",s),options:o,placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á..."})]})]})]}),Ml=({formData:a,updateField:d,uniqueProductCodes:c,uniqueProductNames:o})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.refNo||"",onChange:t=>d("refNo",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-mono",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Neo Ref No. (Optional)"}),e.jsx("input",{type:"text",value:a.neoRefNo||"",onChange:t=>d("neoRefNo",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-mono",placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Neo..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Code) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(pt,{label:"",required:!0,value:a.productCode||"",onChange:t=>d("productCode",t),options:c})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Name) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(pt,{label:"",required:!0,value:a.productName||"",onChange:t=>d("productName",t),options:o})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",required:!0,min:"1",value:a.quantity||"",onChange:t=>{const s=parseFloat(t.target.value)||0;d("quantity",s);const n=a.pricePerUnit||0;d("priceBill",s*n)},className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-bold text-blue-600 text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("input",{type:"text",value:a.unit||"‡∏ä‡∏¥‡πâ‡∏ô",onChange:t=>d("unit",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-blue-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Price/Unit)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:a.pricePerUnit||"",onChange:t=>{const s=parseFloat(t.target.value)||0;d("pricePerUnit",s);const n=a.quantity||0;d("priceBill",n*s)},className:"w-full p-2.5 pl-9 bg-white border border-blue-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-blue-700",placeholder:"0.00"}),e.jsx(Me,{className:"w-4 h-4 text-blue-500 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("input",{type:"date",value:a.expiryDate||"",onChange:t=>d("expiryDate",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏° (Total Price Bill)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:a.priceBill||0,readOnly:!0,className:"w-full p-2.5 pl-9 bg-slate-100 border border-slate-300 rounded text-sm outline-none font-bold text-slate-700",placeholder:"Auto-calculated"}),e.jsx(Me,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ (Price Sell)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:a.priceSell||"",onChange:t=>d("priceSell",parseFloat(t.target.value)),onBlur:t=>d("priceSell",parseFloat(parseFloat(t.target.value).toFixed(2))),className:"w-full p-2.5 pl-9 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all",placeholder:"0.00"}),e.jsx(Me,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]})]})]}),ql=["‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå","‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏•‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏≠‡∏∑‡πà‡∏ô‡πÜ"],Fl=({formData:a,updateField:d,handleCheckboxToggle:c,handleImageUpload:o,handleRemoveImage:t})=>e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(nt,{className:"w-4 h-4 text-red-500"})," ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border-r border-slate-200 pr-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 min-h-[200px] border-2 border-dashed border-slate-300 rounded-lg hover:bg-slate-50 transition-colors relative",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:o,className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx(kt,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("span",{className:"text-sm font-bold",children:"‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"}),e.jsx("span",{className:"text-xs text-slate-400 mt-1",children:"‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"})]}),a.images&&a.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-4",children:a.images.map((s,n)=>e.jsxs("div",{className:"relative group aspect-square bg-slate-100 rounded overflow-hidden border border-slate-200",children:[e.jsx("img",{src:s,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>t(n),type:"button",className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(De,{className:"w-3 h-3"})})]},n))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"mb-4 bg-slate-50 p-3 rounded border border-slate-200",children:[e.jsxs("div",{className:"mb-3 font-bold text-slate-800 text-sm border-b border-slate-200 pb-2",children:["‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Source) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-3 gap-x-2 text-sm text-slate-700",children:[[{value:"Customer",label:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer)"},{value:"DestinationCustomer",label:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination Customer)"},{value:"Accounting",label:"‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Accounting)"},{value:"Keying",label:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î (Keying)"}].map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",required:!0,checked:a.problemAnalysis===s.value,onChange:()=>d("problemAnalysis",s.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.label]},s.value)),e.jsxs("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors mb-2",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:a.problemAnalysis==="Warehouse",onChange:()=>d("problemAnalysis","Warehouse"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Warehouse)"]}),a.problemAnalysis==="Warehouse"&&e.jsxs("div",{className:"ml-6 p-3 bg-slate-50 border border-slate-200 rounded grid grid-cols-1 md:grid-cols-2 gap-3 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsxs("select",{className:"w-full border rounded p-1.5 text-sm",value:a.problemAnalysisSub||"",onChange:s=>d("problemAnalysisSub",s.target.value),children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),rt.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ (Cause)"}),e.jsx("div",{className:"flex flex-wrap gap-2 text-sm mt-1",children:ql.map(s=>e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"whCause",checked:a.problemAnalysisCause===s,onChange:()=>d("problemAnalysisCause",s)}),s]},s))}),a.problemAnalysisCause==="‡∏≠‡∏∑‡πà‡∏ô‡πÜ"&&e.jsx("input",{type:"text",className:"border-b border-slate-400 outline-none text-sm w-full mt-1",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏...",value:a.problemAnalysisDetail||"",onChange:s=>d("problemAnalysisDetail",s.target.value)})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors mb-2",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:a.problemAnalysis==="Transport",onChange:()=>d("problemAnalysis","Transport"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)"]}),a.problemAnalysis==="Transport"&&e.jsxs("div",{className:"ml-6 p-3 bg-slate-50 border border-slate-200 rounded animate-fade-in",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"flex gap-4 mb-2",children:[e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:a.problemAnalysisSub==="CompanyDriver",onChange:()=>d("problemAnalysisSub","CompanyDriver")})," ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:a.problemAnalysisSub==="JointTransport",onChange:()=>d("problemAnalysisSub","JointTransport")})," ‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏°"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:a.problemAnalysisSub==="Other",onChange:()=>d("problemAnalysisSub","Other")})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]}),a.problemAnalysisSub==="Other"&&e.jsx("input",{type:"text",className:"border-b border-slate-400 outline-none text-sm w-full",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:a.problemAnalysisDetail||"",onChange:s=>d("problemAnalysisDetail",s.target.value)})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:a.problemAnalysis==="Other",onChange:()=>d("problemAnalysis","Other"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]}),a.problemAnalysis==="Other"&&e.jsx("input",{type:"text",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700 ml-2",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏...",value:a.problemAnalysisDetail||"",onChange:s=>d("problemAnalysisDetail",s.target.value)})]})})]})]}),e.jsxs("div",{className:"mb-2 font-bold underline text-slate-800 text-sm",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-slate-700 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemDamaged,onChange:()=>c("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemDamagedInBox,onChange:()=>c("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemLost,onChange:()=>c("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemMixed,onChange:()=>c("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemWrongInv,onChange:()=>c("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemLate,onChange:()=>c("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemDuplicate,onChange:()=>c("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemWrong,onChange:()=>c("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemIncomplete,onChange:()=>c("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemOver,onChange:()=>c("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemWrongInfo,onChange:()=>c("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemShortExpiry,onChange:()=>c("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemTransportDamage,onChange:()=>c("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemAccident,onChange:()=>c("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemPOExpired,onChange:()=>c("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemNoBarcode,onChange:()=>c("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:a.problemNotOrdered,onChange:()=>c("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox",checked:a.problemOther,onChange:()=>c("problemOther")}),e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700",value:a.problemOtherText||"",onChange:s=>d("problemOtherText",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold underline text-sm text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{value:a.problemDetail||"",onChange:s=>d("problemDetail",s.target.value),className:"w-full mt-1 p-2 bg-slate-50 border rounded text-sm min-h-[80px]",placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."})]})]})]})]}),_l=({formData:a,updateField:d,handleCheckboxToggle:c})=>{const o=["actionReject","actionRejectSort","actionRework","actionSpecialAcceptance","actionScrap","actionScrapReplace"],t=s=>{const n=o.filter(b=>b!==s);c(s,n)};return e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4 text-blue-500"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("div",{className:"p-4 bg-white space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-b border-slate-100 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.actionReject,onChange:()=>t("actionReject"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:a.actionRejectQty,onChange:s=>d("actionRejectQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.actionRejectSort,onChange:()=>t("actionRejectSort"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-40",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:a.actionRejectSortQty,onChange:s=>d("actionRejectSortQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.actionRework,onChange:()=>t("actionRework"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:a.actionReworkQty,onChange:s=>d("actionReworkQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:"}),e.jsx("input",{type:"text",value:a.actionReworkMethod,onChange:s=>d("actionReworkMethod",s.target.value),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.actionSpecialAcceptance,onChange:()=>t("actionSpecialAcceptance"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:a.actionSpecialAcceptanceQty,onChange:s=>d("actionSpecialAcceptanceQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö:"}),e.jsx("input",{type:"text",value:a.actionSpecialAcceptanceReason,onChange:s=>d("actionSpecialAcceptanceReason",s.target.value),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.actionScrap,onChange:()=>t("actionScrap"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:a.actionScrapQty,onChange:s=>d("actionScrapQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:a.actionScrapReplace,onChange:()=>t("actionScrapReplace"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",value:a.actionScrapReplaceQty,onChange:s=>d("actionScrapReplaceQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]})]})]})]})},Hl=({formData:a,updateField:d,handleCheckboxToggle:c})=>{const o=t=>{c(t,[])};return e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4 text-purple-500"})," ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold underline text-slate-800",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å:"}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:a.causePackaging,onChange:()=>o("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:a.causeTransport,onChange:()=>o("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:a.causeOperation,onChange:()=>o("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:a.causeEnv,onChange:()=>o("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("textarea",{value:a.causeDetail||"",onChange:t=>d("causeDetail",t.target.value),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("textarea",{value:a.preventionDetail||"",onChange:t=>d("preventionDetail",t.target.value),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô..."})]})]})]})]})},Ul=({formData:a,updateField:d})=>e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(nt,{className:"w-4 h-4 text-red-500"})," ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Tracking)"]}),e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.hasCost||!1,onChange:c=>d("hasCost",c.target.checked),className:"w-5 h-5 text-red-600 rounded focus:ring-red-500 border-slate-300"}),e.jsx("span",{className:"font-bold text-red-600",children:"‚ö† ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Has Cost)"})]}),a.hasCost&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in bg-red-50 p-4 rounded-lg border border-red-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Problem Source)"}),e.jsxs("select",{value:a.problemSource||"",onChange:c=>d("problemSource",c.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"-- ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ --"}),Object.keys(It).map(c=>e.jsx("option",{value:c,children:c},c)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"}),e.jsx("input",{type:"number",step:"0.01",value:a.costAmount||"",onChange:c=>d("costAmount",Number(c.target.value)),onBlur:c=>d("costAmount",parseFloat(parseFloat(c.target.value).toFixed(2))),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsx("input",{type:"text",value:a.costResponsible||"",onChange:c=>d("costResponsible",c.target.value),className:"w-full p-2 border border-slate-300 rounded-lg bg-white text-slate-800 font-bold",placeholder:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á"})]})]})]})]}),Ql=({requestItems:a,handleRemoveItem:d,handleAnalyzeClick:c})=>e.jsxs("div",{className:"mt-8 border border-slate-200 rounded-xl overflow-hidden shadow-sm",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200 flex justify-between items-center",children:e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(rl,{className:"w-5 h-5"})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (",a.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-100 text-slate-600 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"#"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Source)"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("th",{className:"px-4 py-3 w-10",children:"‡∏•‡∏ö"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:a.map((o,t)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>c(t),children:[e.jsx("td",{className:"px-4 py-3 text-slate-500",children:t+1}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-bold text-slate-800",children:o.productName}),e.jsx("div",{className:"text-xs text-slate-500",children:o.productCode})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-mono font-bold bg-slate-100 px-2 py-1 rounded",children:[o.quantity," ",o.unit]})}),e.jsx("td",{className:"px-4 py-3",children:o.problemAnalysis?e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-purple-100 text-purple-700",children:o.problemAnalysis}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsxs("td",{className:"px-4 py-3 max-w-[200px] truncate text-slate-600",children:[o.problemDetail||o.reason||"-",o.problemDamaged&&e.jsx("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-1 rounded",children:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î"}),o.problemWrong&&e.jsx("span",{className:"ml-2 text-xs bg-orange-100 text-orange-600 px-1 rounded",children:"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button",onClick:s=>{s.stopPropagation(),s.preventDefault(),d(t)},className:"text-red-500 hover:bg-red-50 p-1.5 rounded-lg transition-colors",children:e.jsx(De,{className:"w-4 h-4"})})})]},t))}),e.jsx("tfoot",{className:"bg-slate-50 border-t border-slate-200 font-bold text-slate-700",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"px-4 py-3 text-right",children:"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsxs("td",{className:"px-4 py-3 bg-yellow-50 text-yellow-800",children:[a.reduce((o,t)=>o+(t.quantity||0),0)," ‡∏´‡∏ô‡πà‡∏ß‡∏¢"]}),e.jsx("td",{colSpan:3})]})})]})})]}),Wl=({formData:a,requestItems:d,isCustomBranch:c,uniqueCustomers:o,uniqueDestinations:t,uniqueFounders:s,uniqueProductCodes:n,uniqueProductNames:b,initialData:j,setFormData:g,setIsCustomBranch:m,setRequestItems:h,handleAddItem:p,handleRemoveItem:r,handleImageUpload:I,handleRemoveImage:l,handleRequestSubmit:w})=>{const[v]=N.useState("NCR"),[k,y]=N.useState(!1);te.useEffect(()=>{g(M=>({...M,documentType:"NCR"}))},[g]);const[i,O]=N.useState(!1),[B,D]=N.useState(null),[F,Y]=N.useState(null),R=(M,U)=>{g(K=>({...K,[M]:U}))},$=(M,U=[])=>{g(K=>{const C=K[M],Z={[M]:!C};return!C&&U.length>0&&U.forEach(le=>Z[le]=!1),{...K,...Z}})},X=M=>{if(M.preventDefault(),!a.productName||!a.productCode||!a.founder){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Founder)"});return}if(!a.quantity||a.quantity<=0){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (> 0)"});return}p(null,a)},ce=()=>{if(d.length===0){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"});return}if(a.productName||a.productCode){T.fire({icon:"warning",title:"‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà",text:"‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£' ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô"});return}const M=d.filter(U=>!U.problemAnalysis);if(M.length>0){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏î‡πâ: ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Source) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${M.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`});return}y(!0)},H=M=>{D(M),Y(d[M]),O(!0)},f=M=>{B!==null&&h(U=>{const K=[...U];return K[B]=M,K}),O(!1),D(null),Y(null)};return e.jsxs(e.Fragment,{children:[e.jsx(El,{isOpen:i,onClose:()=>O(!1),item:F,onSave:f}),e.jsx(Al,{isOpen:k,onClose:()=>y(!1),onConfirm:()=>{y(!1),w()},itemCount:d.length}),e.jsx("div",{className:"h-full overflow-auto p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-slate-200 shadow-sm p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-slate-100 pb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 text-indigo-600",children:e.jsx(ie,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"1. ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (NCR / Return Request)"}),e.jsx("p",{className:"text-sm text-slate-500",children:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ NCR ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏"})]}),(j==null?void 0:j.ncrNumber)&&e.jsxs("div",{className:"ml-auto bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold border border-orange-200",children:["Ref NCR: ",j.ncrNumber]})]}),e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsx(Bl,{formData:a,updateField:R,isCustomBranch:c,setIsCustomBranch:m}),e.jsx(Ll,{formData:a,updateField:R,uniqueCustomers:o,uniqueDestinations:t,uniqueFounders:s}),e.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex items-center justify-between",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-slate-800",children:[e.jsx(Ge,{className:"w-5 h-5 text-indigo-500"})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Item Details - NCR)"]}),e.jsxs("div",{className:"text-xs text-slate-500 bg-white px-3 py-1 rounded-full border border-slate-200 shadow-sm",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ",d.length+1]})]}),e.jsxs("div",{className:"p-6 bg-white space-y-6",children:[e.jsx(Ml,{formData:a,updateField:R,uniqueProductCodes:n,uniqueProductNames:b}),e.jsx(Fl,{formData:a,updateField:R,handleCheckboxToggle:$,handleImageUpload:I,handleRemoveImage:l}),e.jsx(_l,{formData:a,updateField:R,handleCheckboxToggle:$})]})]}),e.jsx(Hl,{formData:a,updateField:R,handleCheckboxToggle:$}),e.jsx(Ul,{formData:a,updateField:R}),e.jsx("div",{className:"flex justify-center mt-8 mb-4 py-4 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:e.jsxs("button",{type:"submit",className:"w-full md:w-2/3 px-6 py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg shadow-lg hover:bg-indigo-700 hover:shadow-xl transition-all flex items-center justify-center gap-3 active:scale-95",children:[e.jsx(nl,{className:"w-6 h-6"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á (Add Item)"]})}),d.length>0&&e.jsx(Ql,{requestItems:d,handleRemoveItem:r,handleAnalyzeClick:H}),e.jsx("div",{className:"flex justify-end items-center pt-4 border-t border-slate-100 mt-6",children:e.jsxs("button",{type:"button",onClick:ce,className:"px-8 py-3 rounded-xl text-white font-bold shadow-lg flex items-center gap-2 transform hover:scale-105 transition-all bg-indigo-600 hover:bg-indigo-700",children:[e.jsx(Fe,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ NCR (Save)"]})})]})]})})]})},hs=({onComplete:a})=>{const{items:d,updateReturnRecord:c}=ge(),[o,t]=te.useState([]),[s,n]=te.useState(!1),[b,j]=te.useState(""),[g,m]=te.useState(""),[h,p]=te.useState(new Date().toISOString().split("T")[0]),r=te.useMemo(()=>d.filter(w=>w.status!=="Requested"?!1:w.documentType==="LOGISTICS"?!0:!(w.documentType==="NCR"||w.ncrNumber)),[d]),I=w=>{t(v=>v.includes(w)?v.filter(k=>k!==w):[...v,w])},l=async()=>{if(o.length===0)return;const w=`COL-${new Date().getFullYear()}${String(new Date().getMonth()+1).padStart(2,"0")}-${String(Math.floor(Math.random()*1e3)).padStart(3,"0")}`,v={id:w,driverId:b||"Unspecified",vehiclePlate:g||"Unspecified",linkedRmaIds:o,pickupLocation:{name:"Multiple Customers",address:"Multiple Addresses",contactName:"-",contactPhone:"-"},pickupDate:h,packageSummary:{totalBoxes:1,description:"Batch Collection"},status:"ASSIGNED",createdDate:new Date().toISOString()};try{await bt(ue(he,`collection_orders/${w}`),v);for(const k of o)await c(k,{status:"COL_JobAccepted",collectionOrderId:w});await T.fire({icon:"success",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:`‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß: ${w}`,timer:2e3,showConfirmButton:!1}),n(!1),t([]),j(""),m(""),a&&a()}catch(k){console.error("Error creating job:",k),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà",confirmButtonColor:"#d33"})}};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(vt,{className:"w-6 h-6 text-blue-600"})," 2. ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Receive Job)"]}),o.length>0&&e.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (",o.length,")"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b w-10",children:e.jsx("input",{type:"checkbox",onChange:w=>t(w.target.checked?r.map(v=>v.id):[]),checked:r.length>0&&o.length===r.length})}),e.jsx("th",{className:"p-4 border-b",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"p-4 border-b",children:"‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö / ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Inv / Date)"}),e.jsx("th",{className:"p-4 border-b",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Doc Info)"}),e.jsx("th",{className:"p-4 border-b",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-4 border-b",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"}),e.jsx("th",{className:"p-4 border-b text-center",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(vt,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô"})]})})}):r.map(w=>e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors cursor-pointer",onClick:()=>I(w.id),children:[e.jsx("td",{className:"p-4 align-top",children:e.jsx("input",{type:"checkbox",checked:o.includes(w.id),onChange:()=>{},className:"accent-blue-600 w-4 h-4"})}),e.jsx("td",{className:"p-4 align-top",children:e.jsx("div",{className:"font-bold text-slate-700",children:w.branch})}),e.jsxs("td",{className:"p-4 align-top",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-700",children:w.invoiceNo||"-"}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[e.jsx(Qe,{className:"w-3 h-3"}),e.jsx("span",{title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ",children:w.controlDate||w.date||"-"})]})]}),e.jsx("td",{className:"p-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-slate-500 w-6",children:"R:"}),e.jsx("span",{className:"font-mono text-slate-700 bg-slate-100 px-1.5 py-0.5 rounded",children:w.documentNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-slate-500 w-6",children:"TM:"}),e.jsx("span",{className:"font-mono text-slate-700 bg-slate-100 px-1.5 py-0.5 rounded",children:w.tmNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-blue-500 w-6",children:"ID:"}),e.jsx("span",{className:"font-mono text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:w.id})]})]})}),e.jsx("td",{className:"p-4 align-top text-slate-600",children:w.destinationCustomer||"-"}),e.jsx("td",{className:"p-4 align-top",children:e.jsx("div",{className:"text-sm text-slate-600 max-w-xs",children:w.notes||"-"})}),e.jsx("td",{className:"p-4 align-top text-center",children:e.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:w.status})})]},w.id))})]})})}),s&&e.jsx("div",{className:"absolute inset-0 z-20 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-scale-up",children:[e.jsxs("div",{className:"bg-blue-600 p-4 flex justify-between items-center text-white",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ (Driver Name)"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ...",value:b,onChange:w=>j(w.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ (License Plate)"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ...",value:g,onChange:w=>m(w.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Date)"}),e.jsx("input",{type:"date",className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:h,onChange:w=>p(w.target.value)})]}),e.jsx("button",{onClick:l,className:"w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-700 shadow-lg transition-all mt-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)"})]})]})})]})},gs=({onComplete:a})=>{const{items:d,updateReturnRecord:c}=ge(),o=te.useMemo(()=>d.filter(n=>n.status==="COL_JobAccepted"||n.status==="JobAccepted"?n.documentType==="LOGISTICS"?!0:!(n.documentType==="NCR"||n.ncrNumber):!1),[d]),t=async n=>{(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤?",text:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",icon:"question",showCancelButton:!0,confirmButtonColor:"#4f46e5",cancelButtonColor:"#d33",confirmButtonText:"‡πÉ‡∏ä‡πà, ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed&&(await c(n,{status:"COL_BranchReceived",dateReceived:new Date().toISOString().split("T")[0]}),await T.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1}),o.length===1&&a&&a())},s=async()=>{if(o.length===0)return;if((await T.fire({title:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${o.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,text:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#4f46e5",cancelButtonColor:"#d33",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){for(const b of o)await c(b.id,{status:"COL_BranchReceived",dateReceived:new Date().toISOString().split("T")[0]});await T.fire({icon:"success",title:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!",text:"‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1}),a&&a()}};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ut,{className:"w-6 h-6 text-indigo-600"})," 3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Physical Receive)"]}),o.length>0&&e.jsxs("button",{onClick:s,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all",children:["‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (",o.length,")"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"p-4 border-b",children:"‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö / ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Inv / Date)"}),e.jsx("th",{className:"p-4 border-b",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Doc Info)"}),e.jsx("th",{className:"p-4 border-b",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-4 border-b",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"}),e.jsx("th",{className:"p-4 border-b text-center",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ut,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]})})}):o.map(n=>e.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors",children:[e.jsx("td",{className:"p-4 align-top",children:e.jsx("div",{className:"font-bold text-slate-700",children:n.branch})}),e.jsxs("td",{className:"p-4 align-top",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-700",children:n.invoiceNo||"-"}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[e.jsx(Qe,{className:"w-3 h-3"}),e.jsx("span",{title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ",children:n.controlDate||n.date||"-"})]})]}),e.jsx("td",{className:"p-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-slate-500 w-8",children:"R:"}),e.jsx("span",{className:"font-mono text-slate-700 bg-slate-100 px-1.5 py-0.5 rounded",children:n.documentNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-slate-500 w-8",children:"TM:"}),e.jsx("span",{className:"font-mono text-slate-700 bg-slate-100 px-1.5 py-0.5 rounded",children:n.tmNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-indigo-500 w-8",children:"COL:"}),e.jsx("span",{className:"font-mono text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded",children:n.collectionOrderId||n.id})]})]})}),e.jsx("td",{className:"p-4 align-top text-slate-600",children:n.destinationCustomer||"-"}),e.jsx("td",{className:"p-4 align-top h-full",children:e.jsx("div",{className:"text-sm text-slate-600 max-w-xs",children:n.notes||"-"})}),e.jsx("td",{className:"p-4 align-top text-center",children:e.jsxs("button",{onClick:()=>t(n.id),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-sm flex items-center gap-2 mx-auto whitespace-nowrap",children:[e.jsx(ms,{className:"w-4 h-4"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á"]})})]},n.id))})]})})})]})},fs=({onComplete:a})=>{const{items:d,updateReturnRecord:c}=ge(),o=te.useMemo(()=>d.filter(n=>n.status==="BranchReceived"||n.status==="COL_BranchReceived"),[d]),t=async n=>{(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤?",text:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏ô‡∏™‡πà‡∏á (Ready for Logistics) ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",icon:"question",showCancelButton:!0,confirmButtonColor:"#1e293b",cancelButtonColor:"#94a3b8",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed&&(await c(n,{status:"COL_Consolidated"}),await T.fire({icon:"success",title:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1}))},s=async()=>{if(o.length===0)return;if((await T.fire({title:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${o.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,text:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô '‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏ô‡∏™‡πà‡∏á' ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#1e293b",cancelButtonColor:"#94a3b8",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){for(const b of o)await c(b.id,{status:"COL_Consolidated"});await T.fire({icon:"success",title:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",text:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1}),a&&a()}};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Nt,{className:"w-6 h-6 text-slate-600"})," 4. ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Consolidation)"]}),o.length>0&&e.jsxs("button",{onClick:s,className:"bg-slate-800 hover:bg-black text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all",children:["‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (",o.length,")"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 border-b",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"p-4 border-b",children:"‡πÉ‡∏ö‡∏Å‡∏≥‡∏Å‡∏±‡∏ö / ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Inv / Date)"}),e.jsx("th",{className:"p-4 border-b",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Doc Info)"}),e.jsx("th",{className:"p-4 border-b",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-4 border-b",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"}),e.jsx("th",{className:"p-4 border-b text-center",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"}),e.jsx("th",{className:"p-4 border-b text-center",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(as,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]})})}):o.map(n=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4 align-top",children:e.jsx("div",{className:"font-bold text-slate-700",children:n.branch})}),e.jsxs("td",{className:"p-4 align-top",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-700",children:n.invoiceNo||"-"}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[e.jsx(Qe,{className:"w-3 h-3"}),e.jsx("span",{title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ",children:n.controlDate||n.date||"-"})]})]}),e.jsx("td",{className:"p-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-slate-500 w-8",children:"R:"}),e.jsx("span",{className:"font-mono text-slate-700 bg-slate-100 px-1.5 py-0.5 rounded",children:n.documentNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-slate-500 w-8",children:"TM:"}),e.jsx("span",{className:"font-mono text-slate-700 bg-slate-100 px-1.5 py-0.5 rounded",children:n.tmNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx("span",{className:"font-bold text-slate-600 w-8",children:"COL:"}),e.jsx("span",{className:"font-mono text-slate-700 bg-slate-100 px-1.5 py-0.5 rounded",children:n.collectionOrderId||n.id})]})]})}),e.jsx("td",{className:"p-4 align-top text-slate-600",children:n.destinationCustomer||"-"}),e.jsx("td",{className:"p-4 align-top h-full",children:e.jsx("div",{className:"text-sm text-slate-600 max-w-xs",children:n.notes||"-"})}),e.jsx("td",{className:"p-4 align-top text-center",children:e.jsx("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded text-[10px] font-bold",children:"Received"})}),e.jsx("td",{className:"p-4 align-top text-center",children:e.jsxs("button",{onClick:()=>t(n.id),className:"bg-slate-800 hover:bg-black text-white px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-sm flex items-center gap-2 mx-auto whitespace-nowrap",children:[e.jsx(as,{className:"w-4 h-4"})," ‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á (Pack)"]})})]},n.id))})]})})})]})},zl=()=>{const{items:a,updateReturnRecord:d,addReturnRecord:c}=ge(),[o,t]=N.useState(null),[s,n]=N.useState(null),[b,j]=N.useState(null),[g,m]=N.useState({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),[h,p]=N.useState(!1),[r,I]=N.useState(!1),[l,w]=N.useState(!1),[v,k]=N.useState(1),[y,i]=N.useState(""),[O,B]=N.useState(0),[D,F]=N.useState("New"),[Y,R]=N.useState(null),$=te.useMemo(()=>a.filter(C=>{const Z=C.status==="NCR_HubReceived"||C.status==="ReceivedAtHub",le=C.documentType==="NCR"||!!C.ncrNumber||C.status==="NCR_HubReceived";return Z&&le}),[a]),X=C=>{t(C),j(null),n(null),I(!1),B(0),m({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""})},ce=(C,Z)=>{o&&(t({...o,condition:C}),Z&&n(Z))},H=(C,Z)=>{m(le=>({...le,[C]:Z}))},f=()=>{I(!r)},M=async()=>{if(!o)return;const{value:C}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö (Undo)",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ Step 3 (Receive)",input:"password",icon:"warning",showCancelButton:!0,confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",inputPlaceholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"});C==="1234"?(await d(o.id,{status:"NCR_InTransit"}),t(null),await T.fire({icon:"success",title:"‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö Step 3 ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})):C&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","","error")},U=async()=>{if(!(!o||!b))try{const C={status:"NCR_QCCompleted",condition:o.condition,disposition:b,destinationCustomer:b==="RTV"?g.route:b==="Restock"?g.sellerName:b==="InternalUse"?g.internalUseDetail:"",problemDetail:b==="Claim"?`Claim: ${g.claimCompany} / ${g.claimCoordinator}`:o.problemDetail};await d(o.id,C),t(null),await T.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• QC ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}catch(C){console.error("QC Submit Error:",C),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:C instanceof Error?C.message:"Unknown error"})}},K=async()=>{if(!(!o||O<=0))try{const C=o.quantity,Z=l?C*v:C;if(O>=Z){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",text:"Cannot split entire quantity via split function. Use normal Submit."});return}const le=Z-O,z={quantity:(l&&le>0,le),unit:l?y:o.unit,status:"NCR_QCCompleted",disposition:b||"Pending",condition:o.condition};await d(o.id,z);const xe={...o,id:`${o.id}-SP${Date.now().toString().slice(-4)}`,quantity:O,unit:l?y:o.unit,condition:D,disposition:Y||"Pending",status:Y?"NCR_QCCompleted":"NCR_HubReceived",refNo:`${o.refNo}-SP`};await c(xe),t(null),await T.fire({icon:"success",title:"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}catch(C){console.error("Split Error:",C),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",text:C instanceof Error?C.message:"Unknown error"})}};return e.jsxs("div",{className:"h-full flex",children:[e.jsxs("div",{className:"w-80 border-r border-slate-200 bg-white flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 font-bold text-slate-700 flex justify-between items-center",children:[e.jsxs("span",{children:["‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (",$.length,")"]}),e.jsx(ut,{className:"w-4 h-4 text-blue-500"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:$.length===0?e.jsx("div",{className:"p-4 text-center text-slate-400 text-xs italic",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"}):$.map(C=>e.jsxs("div",{onClick:()=>X(C),className:`p-3 rounded-lg border cursor-pointer transition-all ${(o==null?void 0:o.id)===C.id?"bg-blue-50 border-blue-200 shadow-sm ring-1 ring-blue-200":"bg-white border-slate-100 hover:border-blue-100 hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700",children:C.productCode}),e.jsx("span",{className:"text-[10px] text-slate-400",children:C.dateReceived})]}),e.jsx("div",{className:"text-sm font-medium text-slate-800 truncate mb-1",children:C.productName}),e.jsx("div",{className:"text-xs text-slate-500",children:C.branch})]},C.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50/50",children:o?e.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:o.productName}),e.jsxs("div",{className:"flex gap-4 text-sm text-slate-500",children:[e.jsxs("span",{children:["ID: ",o.id]}),e.jsxs("span",{children:["Ref: ",o.refNo]}),e.jsxs("span",{children:["Qty: ",e.jsxs("b",{children:[o.quantity," ",o.unit]})]})]}),o.preliminaryDecision&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500",children:"Preliminary Decision:"}),e.jsxs("div",{className:`text-xs px-2 py-0.5 rounded-full border flex items-center gap-1
                                                ${o.preliminaryDecision==="Return"?"bg-indigo-50 text-indigo-700 border-indigo-200":o.preliminaryDecision==="Sell"?"bg-green-50 text-green-700 border-green-200":o.preliminaryDecision==="Scrap"?"bg-red-50 text-red-700 border-red-200":o.preliminaryDecision==="Internal"?"bg-amber-50 text-amber-700 border-amber-200":"bg-blue-50 text-blue-700 border-blue-200"}`,children:[e.jsx("span",{className:"font-bold",children:o.preliminaryDecision}),o.preliminaryRoute&&e.jsxs("span",{children:["(",o.preliminaryRoute,")"]})]})]})]}),e.jsx("div",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-xs font-bold",children:"In Progress"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3 uppercase tracking-wider",children:"1. ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏†‡∏≤‡∏û (Grading)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-bold text-green-600 bg-green-50 p-1.5 rounded w-fit mb-2",children:"Good (‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["New","BoxDamage","WetBox","LabelDefect","Other"].map(C=>e.jsx("button",{onClick:()=>ce(C==="Other"?"Other":C,"Good"),className:`py-2 px-3 rounded-lg border text-sm font-medium transition-all ${o.condition===C||C==="Other"&&s==="Good"?"bg-green-600 text-white border-green-600 shadow-md":"bg-white border-slate-200 text-slate-600 hover:border-green-300 hover:text-green-600"}`,children:st[C]||"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)"},C))}),s==="Good"&&e.jsx("input",{type:"text",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-green-500 outline-none",value:Object.keys(st).includes(o.condition||"")?"":o.condition,onChange:C=>t({...o,condition:C.target.value}),autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-bold text-red-600 bg-red-50 p-1.5 rounded w-fit mb-2",children:"Bad (‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Expired","Damaged","Defective","Other"].map(C=>e.jsx("button",{onClick:()=>ce(C==="Other"?"Other":C,"Bad"),className:`py-2 px-3 rounded-lg border text-sm font-medium transition-all ${o.condition===C||C==="Other"&&s==="Bad"?"bg-red-600 text-white border-red-600 shadow-md":"bg-white border-slate-200 text-slate-600 hover:border-red-300 hover:text-red-600"}`,children:st[C]||"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)"},C))}),s==="Bad"&&e.jsx("input",{type:"text",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-red-500 outline-none",value:Object.keys(st).includes(o.condition||"")?"":o.condition,onChange:C=>t({...o,condition:C.target.value}),autoFocus:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3 uppercase tracking-wider",children:"2. ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:Object.keys(Ke).map(C=>e.jsxs("button",{onClick:()=>{j(C),p(!1)},className:`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${b===C?"bg-blue-600 text-white border-blue-700 shadow-md":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[e.jsx(ne,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs font-bold",children:Ke[C]})]},C))}),b==="RTV"&&e.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-100 animate-fade-in",children:[e.jsx("label",{className:"block text-xs font-bold text-amber-800 mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Select Route)"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[Pl.map(C=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-3 py-2 rounded border border-amber-200 text-sm text-slate-700 hover:border-amber-400",children:[e.jsx("input",{type:"radio",name:"route",value:C,checked:g.route===C,onChange:Z=>{H("route",Z.target.value),p(!1)},className:"text-amber-500 focus:ring-amber-500"}),C]},C)),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-3 py-2 rounded border border-amber-200 text-sm text-slate-700 hover:border-amber-400",children:[e.jsx("input",{type:"radio",name:"route",checked:h,onChange:()=>{p(!0),H("route","")},className:"text-amber-500 focus:ring-amber-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]}),h&&e.jsx("input",{type:"text",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-amber-500 outline-none",value:g.route,onChange:C=>H("route",C.target.value),autoFocus:!0})]}),b==="Restock"&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 animate-fade-in grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-800 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠ (Buyer Name)"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-green-200 rounded text-sm focus:ring-1 focus:ring-green-500 outline-none",value:g.sellerName,onChange:C=>H("sellerName",C.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-800 mb-1",children:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-green-200 rounded text-sm focus:ring-1 focus:ring-green-500 outline-none",value:g.contactPhone,onChange:C=>H("contactPhone",C.target.value)})]})]}),b==="InternalUse"&&e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 animate-fade-in",children:[e.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ (Department/User)"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-purple-200 rounded text-sm focus:ring-1 focus:ring-purple-500 outline-none",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏ú‡∏ô‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ, ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢",value:g.internalUseDetail,onChange:C=>H("internalUseDetail",C.target.value)})]}),b==="Claim"&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 animate-fade-in space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (Insurance Company)"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:g.claimCompany,onChange:C=>H("claimCompany",C.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:g.claimCoordinator,onChange:C=>H("claimCoordinator",C.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:g.claimPhone,onChange:C=>H("claimPhone",C.target.value)})]})]})]})]}),e.jsxs("div",{className:"border-t border-slate-100 pt-4 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("button",{onClick:f,className:"text-sm font-bold text-blue-600 flex items-center gap-2 hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"})," ",r?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Cancel Split)":"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Split Item)"]})}),r&&e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 animate-fade-in",children:[e.jsxs("h5",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(mt,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å (Split Details)"]}),e.jsxs("div",{className:"mb-4 bg-blue-50/50 p-3 rounded-lg border border-blue-100",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:C=>{w(C.target.checked),C.target.checked?k(12):(k(1),i(""))},className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (Unit Breakdown)"})]}),l&&e.jsxs("div",{className:"animate-fade-in pl-6 mt-2 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô 1 ‡πÅ‡∏û‡πá‡∏Ñ/‡∏•‡∏±‡∏á (Qty per Pack)"}),e.jsx("input",{type:"number",min:"1",value:v,onChange:C=>k(parseInt(C.target.value)||1),className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500"}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:"‡πÄ‡∏ä‡πà‡∏ô 1 ‡∏•‡∏±‡∏á ‡∏°‡∏µ 12 ‡∏ä‡∏¥‡πâ‡∏ô ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (New Unit Name)"}),e.jsx("input",{type:"text",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏ß‡∏î, ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏≠‡∏±‡∏ô",value:y,onChange:C=>i(C.target.value),className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"bg-white p-2 rounded border border-blue-100 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô (Price/Unit):"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[((o.pricePerUnit||(o.priceBill||0)/(o.quantity||1))/v).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ‡∏ö‡∏≤‡∏ó"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(()=>{const C=o.pricePerUnit||(o.priceBill||0)/(o.quantity||1),Z=l&&v>1?C/v:C,le=l?o.quantity*v:o.quantity,me=le-O;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-green-600",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å (Main Item)"}),e.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["‡∏ø",(me*Z).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"text-sm text-slate-500 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (",l?y||"Unit":o.unit,"s):"]}),e.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[me,e.jsx("span",{className:"text-sm font-normal text-slate-400 ml-1",children:l?y||"Unit":o.unit})]}),e.jsxs("div",{className:"space-y-3 mt-3 pt-3 border-t border-slate-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Condition)"}),e.jsxs("select",{value:o.condition||"",onChange:z=>ce(z.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏†‡∏≤‡∏û --"}),Object.entries(st).map(([z,xe])=>e.jsx("option",{value:z,children:xe},z)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"}),e.jsxs("select",{value:b||"",onChange:z=>j(z.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à --"}),Object.entries(Ke).map(([z,xe])=>e.jsx("option",{value:z,children:xe},z))]})]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-red-600",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ (New Item)"}),e.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["‡∏ø",(O*Z).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏°‡∏≤ (",l?y||"Unit":o.unit,")"]}),e.jsx("input",{type:"number",min:"1",max:le-1,value:O,onChange:z=>B(parseInt(z.target.value)||0),className:"w-full p-2 border border-slate-300 rounded text-sm font-bold text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Condition)"}),e.jsxs("select",{value:D,onChange:z=>F(z.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm",children:[Object.entries(st).map(([z,xe])=>e.jsx("option",{value:z,children:xe},z)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]})]}),e.jsx("div",{className:"text-[10px] text-orange-500 bg-orange-50 p-2 rounded mt-3",children:'* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà "‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition) ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'}),e.jsxs("div",{className:"pt-2 border-t border-blue-100 mt-2",children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (Immediate Disposition)"}),e.jsxs("select",{value:Y||"",onChange:z=>R(z.target.value?z.target.value:null),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700 bg-white",children:[e.jsx("option",{value:"",children:"-- ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏¥‡∏ß QC (Default) --"}),Object.entries(Ke).map(([z,xe])=>e.jsx("option",{value:z,children:xe},z))]}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:Y?e.jsx("span",{className:"text-green-600 font-bold",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏õ‡∏ó‡∏µ‡πà Step 4 (Docs) ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"}):"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"})]})]})]})})()})]})]}),e.jsx("div",{className:"mt-4 flex justify-end pt-6 border-t border-slate-200",children:r?e.jsxs("button",{onClick:K,disabled:O<=0||O>=(l?o.quantity*v:o.quantity)||!b,className:"px-8 py-3 rounded-lg bg-orange-600 text-white font-bold hover:bg-orange-700 shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(mt,{className:"w-5 h-5"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Confirm Split)"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:M,className:"px-6 py-3 rounded-lg bg-white border border-slate-300 text-slate-600 font-bold hover:bg-red-50 hover:text-red-600 hover:border-red-200 shadow-sm flex items-center gap-2 mr-auto",title:"‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Step 3)",children:[e.jsx(ol,{className:"w-5 h-5"})," ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö Step 3"]}),e.jsxs("button",{onClick:U,disabled:!b||!(o!=null&&o.condition)||o.condition==="Unknown",className:"px-8 py-3 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Fe,{className:"w-5 h-5"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Confirm QC)"]})]})})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(vt,{className:"w-16 h-16 mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-bold",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß"}),e.jsx("p",{className:"text-sm",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"})]})})]})},Vl=({onConfirm:a})=>{const{items:d}=ge(),[c,o]=N.useState(new Set),[t,s]=N.useState(!1),[n,b]=N.useState("Company"),[j,g]=N.useState({driverName:"",plateNumber:"",transportCompany:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"}),[m,h]=N.useState("Hub"),[p,r]=N.useState(""),[I,l]=N.useState(""),[w,v]=N.useState("All"),k=N.useMemo(()=>d.filter(R=>R.documentType==="NCR"||!!R.ncrNumber&&R.documentType!=="LOGISTICS"?R.status==="Requested"||R.status==="COL_JobAccepted":R.status==="COL_Consolidated"),[d]),y=N.useMemo(()=>Array.from(new Set(k.map(R=>R.branch))).filter(Boolean),[k]),i=N.useMemo(()=>k.filter(R=>w==="All"||R.branch===w),[k,w]),O=R=>{const $=new Set(c);$.has(R)?$.delete(R):$.add(R),o($)},B=()=>{c.size===i.length&&i.length>0?o(new Set):o(new Set(i.map(R=>R.id)))},D=()=>{if(c.size===0){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}s(!0)},F=async()=>{if(n==="Company"){if(!j.driverName||!j.plateNumber){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}}else if(n==="3PL"){if(!j.transportCompany){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á (3PL)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}if(!j.driverName||!j.plateNumber){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3PL",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}}else if(n==="Other"&&!j.transportCompany){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á (‡∏≠‡∏∑‡πà‡∏ô‡πÜ)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}let R="";if(m==="Direct"){if(!p){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}if(p==="Other"&&!I){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡∏≠‡∏∑‡πà‡∏ô‡πÜ)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}R=p==="Other"?I:p}if(a){const $={...j,destination:m==="Direct"?R:void 0};a(Array.from(c),m,$),s(!1),T.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1})}},Y=i.length>0&&i.every(R=>c.has(R.id));return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in relative",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(ne,{className:"w-6 h-6 text-indigo-600"})," 2. ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡∏ô‡∏™‡πà‡∏á (Consolidation & Logistics)"]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6 flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsxs("select",{value:w,onChange:R=>v(R.target.value),className:"bg-transparent text-sm font-medium outline-none text-slate-800",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤"}),y.map(R=>e.jsx("option",{value:R,children:R},R))]})]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£: ",e.jsx("span",{className:"font-bold text-indigo-600",children:i.length})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:B,className:"px-4 py-2 text-sm bg-white border border-slate-300 rounded-lg hover:bg-slate-50 text-slate-600 font-bold transition-colors",children:Y?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsxs("button",{onClick:D,disabled:c.size===0,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold text-sm hover:bg-indigo-700 shadow-md flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e.jsx(ne,{className:"w-4 h-4"})," ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (",c.size,")"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:i.length===0?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:[e.jsx(Ge,{className:"w-16 h-16 mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium text-lg",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á"}),e.jsx("p",{className:"text-sm mt-1",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:i.map(R=>{const $=c.has(R.id),X=!!R.collectionOrderId||R.status==="COL_Consolidated"||R.id&&R.id.startsWith("COL"),ce=!X&&(R.documentType==="NCR"||!!R.ncrNumber),H=X?R.collectionOrderId||`COL-${R.id}`:R.ncrNumber||R.id;return e.jsxs("div",{onClick:()=>O(R.id),className:`group relative p-4 rounded-xl border transition-all cursor-pointer shadow-sm hover:shadow-md 
                                        ${$?"bg-indigo-50 border-indigo-400 ring-2 ring-indigo-200":"bg-white border-slate-200 hover:border-indigo-300"}
                                    `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[X&&e.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full font-bold border border-orange-200",children:"COL"}),ce&&e.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold border border-indigo-200",children:"NCR"}),e.jsx("span",{className:"text-xs font-mono text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200",children:H})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors 
                                            ${$?"bg-indigo-600 border-indigo-600":"bg-transparent border-slate-300 group-hover:border-indigo-400"}
                                        `,children:$&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-2 line-clamp-2 min-h-[1.25rem]",title:R.productName,children:R.productName||"Unknown Product"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsxs("span",{className:"font-bold text-slate-700",children:[R.quantity," ",R.unit]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("span",{className:"text-slate-700",children:R.branch})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("span",{className:"text-slate-700",children:R.dateRequested||R.date})]}),X&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡πÄ‡∏•‡∏Ç R:"}),e.jsx("span",{className:"font-mono text-slate-700",children:R.documentNo||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsx("span",{className:"text-slate-700 truncate max-w-[120px]",title:R.destinationCustomer,children:R.destinationCustomer||"-"})]})]})]}),R.founder&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-100 text-[10px] text-slate-500 flex items-center gap-1",children:[e.jsx(il,{className:"w-3 h-3"})," ‡∏ú‡∏π‡πâ‡∏û‡∏ö: ",R.founder]})]},R.id)})})}),t&&cl.createPortal(e.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh] animate-slide-up",children:[e.jsxs("div",{className:"px-6 py-4 bg-white border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ne,{className:"w-6 h-6 text-indigo-600"})," ‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:["‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ",c.size," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å"]})]}),e.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(de,{className:"w-6 h-6 text-slate-400"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-800 mb-2",children:"1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${n==="Company"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio",name:"transportType",checked:n==="Company",onChange:()=>{b("Company"),g({driverName:"",plateNumber:"",transportCompany:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("input",{type:"text",placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",value:n==="Company"?j.driverName:"",onChange:R=>g({...j,driverName:R.target.value}),disabled:n!=="Company",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text",placeholder:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",value:n==="Company"?j.plateNumber:"",onChange:R=>g({...j,plateNumber:R.target.value}),disabled:n!=="Company",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"})]})]}),e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${n==="3PL"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio",name:"transportType",checked:n==="3PL",onChange:()=>{b("3PL"),g({driverName:"",plateNumber:"",transportCompany:""})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏° (3PL)"]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("input",{type:"text",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á...",value:n==="3PL"?j.transportCompany:"",onChange:R=>g({...j,transportCompany:R.target.value}),disabled:n!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text",placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",value:n==="3PL"?j.driverName:"",onChange:R=>g({...j,driverName:R.target.value}),disabled:n!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text",placeholder:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",value:n==="3PL"?j.plateNumber:"",onChange:R=>g({...j,plateNumber:R.target.value}),disabled:n!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"})]})]}),e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${n==="Other"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio",name:"transportType",checked:n==="Other",onChange:()=>{b("Other"),g({driverName:"",plateNumber:"",transportCompany:""})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]}),e.jsx("input",{type:"text",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:n==="Other"?j.transportCompany:"",onChange:R=>g({...j,transportCompany:R.target.value}),disabled:n!=="Other",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none mt-2"})]})]})]}),e.jsx("hr",{className:"border-slate-100"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-800 mb-2",children:"2. ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all ${m==="Hub"?"bg-indigo-50 border-indigo-500 shadow-sm ring-1 ring-indigo-200":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"radio",name:"route",checked:m==="Hub",onChange:()=>h("Hub"),className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 text-base",children:"Hub ‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all ${m==="Direct"?"bg-green-50 border-green-500 shadow-sm ring-1 ring-green-200":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"radio",name:"route",checked:m==="Direct",onChange:()=>h("Direct"),className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 text-base",children:"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô Hub)"})]})]}),m==="Direct"&&e.jsxs("div",{className:"p-4 bg-green-50/50 rounded-xl border border-green-100 animate-fade-in",children:[e.jsx("div",{className:"text-sm font-bold text-green-800 mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsxs("div",{className:"space-y-2",children:[["‡∏™‡∏≤‡∏¢ 3","‡∏ã‡∏µ‡πÇ‡∏ô","‡∏ô‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏≠‡πÄ‡∏õ‡∏≠‡πÄ‡∏£‡∏ó"].map(R=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm hover:bg-green-100/50 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"directDest",value:R,checked:p===R,onChange:$=>r($.target.value),className:"text-green-600"})," ",R]},R)),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm hover:bg-green-100/50 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"directDest",value:"Other",checked:p==="Other",onChange:R=>r(R.target.value),className:"text-green-600"})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ",p==="Other"&&e.jsx("input",{type:"text",value:I,onChange:R=>l(R.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á...",className:"flex-1 ml-2 p-1.5 text-xs border border-green-300 rounded focus:ring-1 focus:ring-green-500 outline-none bg-white",autoFocus:!0})]})]})]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>s(!1),className:"px-5 py-2.5 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:F,className:`px-6 py-2.5 text-white font-bold rounded-lg shadow-md flex items-center gap-2 transition-all ${m==="Hub"?"bg-indigo-600 hover:bg-indigo-700":"bg-green-600 hover:bg-green-700"}`,children:m==="Hub"?e.jsxs(e.Fragment,{children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô / ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ",e.jsx(ne,{className:"w-5 h-5"})]}):e.jsxs(e.Fragment,{children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô / ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ",e.jsx(Ie,{className:"w-5 h-5"})]})})]})]})}),document.body)]})},Gl=()=>{const{items:a,updateReturnRecord:d}=ge(),[c,o]=te.useState(""),[t,s]=te.useState(""),[n,b]=te.useState(""),j=te.useMemo(()=>a.filter(r=>r.status==="InTransitToHub"||r.status==="COL_InTransit"||r.status==="NCR_InTransit"),[a]),g=async(r,I)=>{const l=a.find(i=>i.id===r);if(!l)return;const w=l.documentType==="NCR"||!!l.ncrNumber||l.status==="NCR_InTransit",v=w?"NCR_HubReceived":"COL_HubReceived",k=w?"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ NCR ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Hub ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)?":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ Collection ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Hub (‡∏Ç‡πâ‡∏≤‡∏° QC ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)?";(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤",text:k,icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"})).isConfirmed&&(await d(r,{status:v,dateReceived:new Date().toISOString().split("T")[0]}),await T.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",timer:1500,showConfirmButton:!1}))},m=async()=>{if(p.length===0)return;if((await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?",text:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${p.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,icon:"warning",showCancelButton:!0,confirmButtonText:"‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Receive All)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){T.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...",allowOutsideClick:!1,didOpen:()=>{T.showLoading()}});for(const I of p){const w=I.documentType==="NCR"||!!I.ncrNumber||I.status==="NCR_InTransit"?"NCR_HubReceived":"COL_HubReceived";await d(I.id,{status:w,dateReceived:new Date().toISOString().split("T")[0]})}await T.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}},h=te.useMemo(()=>{const r=new Set(j.map(I=>I.branch).filter(Boolean));return Array.from(r).sort()},[j]),p=te.useMemo(()=>j.filter(r=>{const I=!c||r.branch===c,l=!t||r.customerName&&r.customerName.toLowerCase().includes(t.toLowerCase()),w=!n||r.destinationCustomer&&r.destinationCustomer.toLowerCase().includes(n.toLowerCase());return I&&l&&w}),[j,c,t,n]);return e.jsxs("div",{className:"h-full overflow-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-amber-500"})," 6. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Received at Hub)"]}),p.length>0&&e.jsxs("button",{onClick:m,className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all",children:["‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (",p.length,")"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm mb-4 space-y-3 sticky top-0 z-10",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700 mb-2",children:"‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Filters)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsxs("select",{className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:c,onChange:r=>o(r.target.value),children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),h.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤...",value:t,onChange:r=>s(r.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á...",value:n,onChange:r=>b(r.target.value)})]})]})]}),p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400 bg-white rounded-xl border border-slate-200",children:[e.jsx(dl,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("p",{children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏¢‡∏±‡∏á Hub"})]}):e.jsx("div",{className:"space-y-4",children:[...p].sort((r,I)=>(I.ncrNumber||I.id).localeCompare(r.ncrNumber||r.id)).map(r=>e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-7 gap-4 mb-4 border-b border-slate-100 pb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsxs("span",{className:"font-bold text-slate-800 flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3 text-slate-400"})," ",r.branch]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("span",{className:"font-bold text-slate-800",children:r.dateRequested||r.date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"NCR No."}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:r.ncrNumber||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Neo Ref"}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:r.neoRefNo||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:r.customerName,children:r.customerName||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:r.founder,children:r.founder||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:r.destinationCustomer,children:r.destinationCustomer||"-"})]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-1",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded font-mono font-bold",children:r.refNo}),e.jsx("span",{className:"text-slate-600 font-mono font-bold",children:r.productCode})]}),e.jsx("div",{className:"font-bold text-slate-900 text-base mb-1 truncate",title:r.productName,children:r.productName}),r.problemDetail&&e.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.problemDetail})]}),e.jsxs("div",{className:"text-center min-w-[80px] bg-white px-3 py-1 rounded border border-slate-200",children:[e.jsx("span",{className:"text-slate-400 text-[10px] block",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("span",{className:"font-bold text-lg text-blue-600",children:r.quantity})," ",e.jsx("span",{className:"text-xs text-slate-500",children:r.unit})]}),e.jsxs("button",{onClick:()=>g(r.id),className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm flex items-center gap-2 transition-colors whitespace-nowrap",children:[e.jsx(Se,{className:"w-4 h-4"})," ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub"]})]})]},r.id))})]})},lt=({title:a,status:d,icon:c,color:o,items:t,onPrintClick:s,onItemClick:n,onSplitClick:b,overrideFilter:j})=>{const g=N.useMemo(()=>j?t:t.filter(m=>m.disposition===d&&(d==="RTV"?!m.documentNo:!0)),[t,d,j]);return e.jsxs("div",{className:"min-w-[300px] bg-slate-100 rounded-xl p-4 flex flex-col h-full border border-slate-200",children:[e.jsxs("div",{className:"font-bold text-slate-700 mb-4 flex justify-between items-center pb-2 border-b-2",style:{borderColor:o.replace("bg-","text-").replace("500","200")},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${o} text-white`,children:e.jsx(c,{className:"w-4 h-4"})}),e.jsx("span",{children:a})]}),e.jsx("span",{className:"bg-white px-2 py-0.5 rounded-full text-xs border shadow-sm",children:g.length})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:g.map(m=>{var h;return e.jsxs("div",{onClick:()=>n&&n(m),draggable:!0,className:"bg-white p-3 rounded-lg shadow-sm border border-slate-200 cursor-pointer hover:shadow-md hover:ring-2 hover:ring-blue-400 transition-all group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1 mr-2",children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm line-clamp-1",children:m.productName}),m.parentId&&e.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:e.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-50 text-blue-600 border border-blue-100",children:[e.jsx(xl,{className:"w-3 h-3 mr-1"}),"‡πÅ‡∏¢‡∏Å‡∏°‡∏≤"]})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[b&&e.jsx("button",{onClick:p=>{p.stopPropagation(),b(m)},className:"p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-blue-600 transition-colors",title:`‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item) - ${m.quantity} ${m.unit}`,children:e.jsx(mt,{className:"w-3 h-3"})}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${m.condition==="New"?"bg-green-50 text-green-600 border-green-100":"bg-red-50 text-red-600 border-red-100"}`,children:m.condition})]})]}),e.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mt-2 border-t pt-2 border-slate-100",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("span",{className:"font-bold text-slate-700 truncate",children:m.branch})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("span",{className:"font-bold text-slate-700 truncate",children:m.date})]})]}),(m.neoRefNo||m.ncrNumber)&&e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[m.neoRefNo&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ Neo"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:m.neoRefNo,children:m.neoRefNo})]}),m.ncrNumber&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400 text-red-500",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR"}),e.jsx("span",{className:"font-bold text-red-600 truncate",title:m.ncrNumber,children:m.ncrNumber})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:m.customerName,children:m.customerName||"-"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:m.founder,children:m.founder||"-"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:m.destinationCustomer,children:m.destinationCustomer||"-"})]}),e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-1.5 rounded mt-1",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsxs("span",{className:"font-bold text-slate-800 text-sm",children:[m.quantity," ",m.unit]})]}),d==="RTV"&&((h=m.dispositionDetails)==null?void 0:h.route)&&e.jsxs("div",{className:"text-[10px] text-amber-600 bg-amber-50 p-1 rounded mt-1",children:["Route: ",m.dispositionDetails.route]})]})]},m.id)})}),g.length>0&&e.jsxs("button",{onClick:()=>s(d,g),className:"mt-4 w-full py-2 bg-white border border-slate-300 rounded-lg text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 flex items-center justify-center gap-2 transition-colors",children:[e.jsx(Ie,{className:"w-4 h-4"})," ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (",g.length,")"]})]})},Kl=({onPrintDocs:a})=>{const{items:d}=ge(),c=te.useMemo(()=>d.filter(h=>{const p=h.documentType==="NCR"||!!h.ncrNumber||h.status.startsWith("NCR_");return p?p?h.status==="NCR_QCPassed"||h.status==="QCPassed"||h.status==="QCCompleted":!1:h.status==="COL_HubReceived"||h.status==="ReceivedAtHub"||h.status==="HubReceived"||h.status==="QCCompleted"}),[d]),o=async(h,p)=>{a?a(h,p):console.error("onPrintDocs prop missing")},t=h=>{T.fire({icon:"info",title:"‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Under Construction)",text:"‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split) ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤",confirmButtonText:"‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö"})},s=c.map(h=>({...h,disposition:h.disposition||"RTV"})),n=h=>h.ncrNumber||h.id.startsWith("NCR"),b=h=>{var p,r,I,l,w;return!n(h)&&(((p=h.refNo)==null?void 0:p.startsWith("R-"))||((r=h.refNo)==null?void 0:r.startsWith("COL-"))||((I=h.refNo)==null?void 0:I.startsWith("RT-"))||((l=h.neoRefNo)==null?void 0:l.startsWith("R-"))||((w=h.neoRefNo)==null?void 0:w.startsWith("COL-")))},j=s.filter(h=>(h.disposition==="RTV"||!h.disposition)&&b(h)),g=s.filter(h=>(h.disposition==="RTV"||!h.disposition)&&!b(h)),m=s.filter(h=>h.disposition!=="RTV"&&h.disposition);return e.jsxs("div",{className:"h-full overflow-x-auto p-4 flex gap-4",children:[e.jsx(lt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (RTV)",status:"RTV",icon:ne,color:"bg-amber-500",items:g,onPrintClick:o,onSplitClick:t,overrideFilter:!0}),e.jsx(lt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏¢ (Restock)",status:"Restock",icon:Ye,color:"bg-green-500",items:m,onPrintClick:o,onSplitClick:t}),e.jsx(lt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",status:"Claim",icon:St,color:"bg-blue-500",items:m,onPrintClick:o,onSplitClick:t}),e.jsx(lt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",status:"InternalUse",icon:Rt,color:"bg-purple-500",items:m,onPrintClick:o,onSplitClick:t}),e.jsx(lt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",status:"Recycle",icon:De,color:"bg-red-500",items:m,onPrintClick:o,onSplitClick:t}),e.jsx(lt,{title:"‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ Collection Return (COL ID)",status:"RTV",icon:ie,color:"bg-teal-600",items:j,onPrintClick:o,onSplitClick:t,overrideFilter:!0})]})},Wt=({disposition:a})=>{if(!a||a==="Pending")return e.jsx("span",{className:"text-slate-400",children:"-"});const d={RTV:{color:"bg-amber-50 text-amber-700 border-amber-200",icon:ne,label:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return)"},Restock:{color:"bg-green-50 text-green-700 border-green-200",icon:Ye,label:"‡∏Ç‡∏≤‡∏¢ (Sell)"},Recycle:{color:"bg-red-50 text-red-700 border-red-200",icon:De,label:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)"},InternalUse:{color:"bg-purple-50 text-purple-700 border-purple-200",icon:Rt,label:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô"},Claim:{color:"bg-blue-50 text-blue-700 border-blue-200",icon:St,label:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô"}}[a];if(!d)return e.jsxs("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] border border-slate-200 flex items-center gap-1",children:[e.jsx(nt,{className:"w-3 h-3"})," ‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡πà‡∏≤"]});const c=d.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold border ${d.color}`,children:[e.jsx(c,{className:"w-3 h-3"})," ",d.label]})},Jl=()=>{const{items:a,updateReturnRecord:d}=ge(),c=te.useMemo(()=>a.filter(n=>n.status==="DocsCompleted"||n.status==="COL_Documented"||n.status==="NCR_Documented"||n.status==="DirectReturn"||n.status==="ReturnToSupplier"),[a]),o=te.useMemo(()=>a.filter(n=>n.status==="Completed").sort((n,b)=>new Date(b.dateCompleted||"").getTime()-new Date(n.dateCompleted||"").getTime()),[a]),t=async n=>{(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô",text:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ (Complete Job)?",icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed&&(await d(n,{status:"Completed",dateCompleted:new Date().toISOString().split("T")[0]}),await T.fire({icon:"success",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1}))},s=async n=>{const{value:b}=await T.fire({title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Undo)",text:'‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Docs)"',input:"password",inputPlaceholder:"Enter password",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#f59e0b",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(!b)return;if(b!=="1234"){await T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error");return}let j="ReceivedAtHub";n.documentType==="NCR"||n.ncrNumber||n.id&&n.id.startsWith("NCR")?j="QCPassed":j="ReceivedAtHub",await d(n.id,{status:j}),T.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:`‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ${n.id} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`})};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in overflow-hidden",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(ie,{className:"w-6 h-6 text-green-600"})," 6. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending Completion)"]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col mb-6",style:{maxHeight:"60%"},children:[e.jsx("div",{className:"p-4 bg-purple-50 border-b border-purple-100 flex justify-between items-center",children:e.jsxs("span",{className:"font-bold text-purple-800",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (",c.length,")"]})}),e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-center w-32",children:"Action"}),e.jsx("th",{className:"p-3 border-b",children:"ID"}),e.jsx("th",{className:"p-3 border-b",children:"‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("th",{className:"p-3 border-b",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-3 border-b text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-3 border-b",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("th",{className:"p-3 border-b",children:"NCR No."}),e.jsx("th",{className:"p-3 border-b",children:"Neo Doc"}),e.jsx("th",{className:"p-3 border-b",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-3 border-b",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("th",{className:"p-3 border-b",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"p-8 text-center text-slate-400",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"})}):c.map(n=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsxs("td",{className:"p-2 text-center flex items-center justify-center gap-1",children:[e.jsxs("button",{onClick:()=>t(n.id),className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1.5 rounded text-xs font-bold shadow-sm flex items-center gap-1 transition-all active:scale-95",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Complete)",children:[e.jsx(Se,{className:"w-3 h-3"})," ‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"]}),e.jsx("button",{onClick:()=>s(n),className:"bg-amber-100 hover:bg-amber-200 text-amber-700 px-2 py-1.5 rounded text-xs font-bold shadow-sm flex items-center gap-1 transition-all active:scale-95 border border-amber-300",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo to Docs)",children:e.jsx(Ye,{className:"w-3 h-3"})})]}),e.jsx("td",{className:"p-3 font-mono text-xs text-slate-500",children:n.id}),e.jsx("td",{className:"p-3",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3 text-slate-400"})," ",n.branch]})}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-bold text-slate-700",children:n.productName}),e.jsx("div",{className:"text-xs text-slate-500",children:n.productCode})]}),e.jsxs("td",{className:"p-3 text-center font-bold text-slate-600",children:[n.quantity," ",n.unit]}),e.jsx("td",{className:"p-3 text-xs text-slate-500",children:n.dateRequested}),e.jsx("td",{className:"p-3 text-xs",children:n.ncrNumber||"-"}),e.jsx("td",{className:"p-3 text-xs",children:n.neoRefNo||"-"}),e.jsx("td",{className:"p-3 text-xs",children:n.customerName}),e.jsx("td",{className:"p-3 text-xs",children:n.founder||"-"}),e.jsx("td",{className:"p-3 text-xs",children:e.jsx("span",{className:"px-2 py-1 rounded-full bg-slate-100 border border-slate-200",children:n.destinationCustomer||n.dispositionRoute||"-"})})]},n.id))})]})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-green-500"})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed)"]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 w-20",children:"ID"}),e.jsx("th",{className:"p-3",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-3",children:"‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("th",{className:"p-3",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx("th",{className:"p-3",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[o.slice(0,20).map(n=>e.jsxs("tr",{className:"hover:bg-slate-50 opacity-75",children:[e.jsx("td",{className:"p-3 text-xs font-mono",children:n.id}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"font-medium text-slate-700",children:n.productName})}),e.jsx("td",{className:"p-3 text-xs",children:n.branch}),e.jsx("td",{className:"p-3 text-xs",children:n.dateCompleted}),e.jsx("td",{className:"p-3 text-xs",children:e.jsx(Wt,{disposition:n.disposition})})]},n.id)),o.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-400 italic",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô"})})]})]})})]})]})},Yl=()=>{const{items:a}=ge(),[d,c]=N.useState(""),o=N.useMemo(()=>a.filter(s=>{var n,b,j;return(s.status==="Completed"||s.status==="DirectReturn")&&(s.productName.toLowerCase().includes(d.toLowerCase())||((n=s.productCode)==null?void 0:n.toLowerCase().includes(d.toLowerCase()))||s.id.toLowerCase().includes(d.toLowerCase())||((b=s.customerName)==null?void 0:b.toLowerCase().includes(d.toLowerCase()))||((j=s.ncrNumber)==null?void 0:j.toLowerCase().includes(d.toLowerCase())))}).sort((s,n)=>{const b=s.dateCompleted||s.dateInTransit||s.date,j=n.dateCompleted||n.dateInTransit||n.date;return new Date(j).getTime()-new Date(b).getTime()}),[a,d]),t=N.useMemo(()=>({total:o.length,direct:o.filter(s=>s.status==="DirectReturn").length,processed:o.filter(s=>s.status==="Completed").length}),[o]);return e.jsxs("div",{className:"h-full flex flex-col p-6 space-y-6 overflow-hidden bg-slate-50/50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Se,{className:"w-8 h-8 text-green-600"}),"7. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed Items)"]}),e.jsx("p",{className:"text-slate-500 mt-1 ml-10",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏´‡∏£‡∏∑‡∏≠ ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total)"}),e.jsx("p",{className:"text-2xl font-bold text-slate-700",children:t.total})]}),e.jsx("div",{className:"bg-slate-100 p-2 rounded-lg text-slate-500",children:e.jsx(ml,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-green-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-green-600 uppercase",children:"‡∏ú‡πà‡∏≤‡∏ô Hub (Processed)"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:t.processed})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:e.jsx(Se,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-orange-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-orange-600 uppercase",children:"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)"}),e.jsx("p",{className:"text-2xl font-bold text-orange-700",children:t.direct})]}),e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg text-orange-600",children:e.jsx(Be,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx("input",{type:"text",placeholder:"Search items...",value:d,onChange:s=>c(s.target.value),className:"pl-9 pr-4 py-2 w-full border border-slate-300 rounded-lg text-sm focus:ring-1 focus:ring-indigo-500 outline-none"}),e.jsx(qe,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["Showing ",e.jsx("span",{className:"font-bold text-slate-800",children:o.length})," items"]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-white rounded-xl border border-slate-200 shadow-sm relative",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200 sticky top-0 shadow-sm z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"ID / NCR No."}),e.jsx("th",{className:"p-4",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)"}),e.jsx("th",{className:"p-4 text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-4",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"p-4",children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ (Closed Date)"}),e.jsx("th",{className:"p-4",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:o.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"p-12 text-center text-slate-400 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(wt,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß"})]})}):o.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:s.status==="Completed"?e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-bold border border-green-200 inline-flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"})," Completed"]}):e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold border border-orange-200 inline-flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3"})," Direct"]})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-slate-800",children:s.ncrNumber||s.id}),e.jsx("div",{className:"text-xs text-slate-400 font-mono",children:s.id})]}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-slate-800",children:s.productName}),e.jsx("div",{className:"text-xs text-slate-500",children:s.productCode})]}),e.jsxs("td",{className:"p-4 text-center",children:[e.jsx("span",{className:"font-bold text-slate-700",children:s.quantity})," ",e.jsx("span",{className:"text-xs text-slate-500",children:s.unit})]}),e.jsx("td",{className:"p-4 text-slate-600",children:s.branch}),e.jsx("td",{className:"p-4 text-slate-600 text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3"}),s.dateCompleted?new Date(s.dateCompleted).toLocaleDateString():s.dateInTransit?new Date(s.dateInTransit).toLocaleDateString():"-"]})}),e.jsx("td",{className:"p-4",children:s.status==="Completed"?e.jsx(Wt,{disposition:s.disposition}):e.jsx("span",{className:"text-xs text-slate-500",children:"-"})})]},s.id))})]})})]})},Xl=({isOpen:a,onClose:d,selectionItems:c,selectionStatus:o,selectedItemIds:t,toggleSelection:s,handleGenerateDoc:n,onSplit:b})=>a?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white shadow-xl w-full h-full flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-blue-600"})," ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-slate-100 rounded-full",children:e.jsx(de,{className:"w-5 h-5 text-slate-400"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center bg-blue-50 p-3 rounded-lg border border-blue-100",children:[e.jsx(Wt,{disposition:o||void 0}),e.jsxs("span",{className:"text-xs text-blue-600",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ",t.size," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("div",{className:"space-y-2",children:c.map(j=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border hover:bg-slate-50 transition-all ${t.has(j.id)?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"checkbox",checked:t.has(j.id),onChange:()=>s(j.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 cursor-pointer"})}),e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>s(j.id),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:j.productName}),e.jsx("span",{className:"text-xs font-mono text-slate-400",children:j.id})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex gap-2",children:[e.jsx("span",{children:j.branch}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:j.customerName})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-bold text-sm text-slate-700",children:[j.quantity," ",j.unit]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),b(j)},className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors border border-blue-200",title:"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item)",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-git-fork",children:[e.jsx("circle",{cx:"12",cy:"18",r:"3"}),e.jsx("circle",{cx:"6",cy:"6",r:"3"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("path",{d:"M6 9v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9"}),e.jsx("path",{d:"M12 12v3"})]})})]})]},j.id))})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-end gap-3 bg-slate-50",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded-lg font-bold text-sm",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:n,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 shadow-sm flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Generate)"]})]})]})}):null,Zl=({isOpen:a,onClose:d,docData:c,docConfig:o,setDocConfig:t,isDocEditable:s,setIsDocEditable:n,includeVat:b,setIncludeVat:j,vatRate:g,setVatRate:m,discountRate:h,setDiscountRate:p,handleConfirmDocGeneration:r,onUpdateItem:I})=>{const[l,w]=N.useState({});if(!a||!c)return null;const v=c.items.map(i=>{if(l[i.id]!==void 0){const O=l[i.id];return{...i,pricePerUnit:O,priceBill:O*(i.quantity||1)}}return i}),k=Ol(v,b,g,h),y=()=>{const i=o.titleTH||at(c.type).th,O=o.companyNameTH,B=at(c.type);let D=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <!--[if gte mso 9]>
                <xml>
                    <x:ExcelWorkbook>
                        <x:ExcelWorksheets>
                            <x:ExcelWorksheet>
                                <x:Name>${i}</x:Name>
                                <x:WorksheetOptions>
                                    <x:DisplayGridlines/>
                                </x:WorksheetOptions>
                            </x:ExcelWorksheet>
                        </x:ExcelWorksheets>
                    </x:ExcelWorkbook>
                </xml>
                <![endif]-->
                <style>
                    th { font-weight: bold; background-color: #f0f0f0; border: 1px solid #000; padding: 5px; }
                    td { border: 1px solid #000; padding: 5px; }
                    .num { text-align: right; }
                    .center { text-align: center; }
                </style>
            </head>
            <body>
                <h2>${O}</h2>
                <h3>${i}</h3>
                <p>Document No: ${B.code} (${B.rev})</p>
                <p>Date: ${new Date().toLocaleDateString("th-TH")}</p>
                
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                            <th>‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th>‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th>‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${c.items.map(($,X)=>`
                            <tr>
                                <td class="center">${X+1}</td>
                                <td style="mso-number-format:'@'">${$.productCode}</td>
                                <td>${$.productName}</td>
                                <td class="center">${$.quantity}</td>
                                <td class="center">${$.unit}</td>
                                <td class="num">${($.priceBill||0).toFixed(2)}</td>
                                <td class="num">${(($.priceBill||0)*$.quantity).toFixed(2)}</td>
                            </tr>
                        `).join("")}
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (Subtotal)</td>
                            <td class="num" style="font-weight:bold;">${k.subtotal.toFixed(2)}</td>
                        </tr>
                        ${h>0?`
                        <tr>
                            <td colspan="6" class="num">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Discount ${h}%)</td>
                            <td class="num" style="color:red;">-${k.discount.toFixed(2)}</td>
                        </tr>
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (After Discount)</td>
                            <td class="num" style="font-weight:bold;">${k.afterDiscount.toFixed(2)}</td>
                        </tr>
                        `:""}
                        ${b?`
                        <tr>
                            <td colspan="6" class="num">‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° (VAT ${g}%)</td>
                            <td class="num">${k.vat.toFixed(2)}</td>
                        </tr>
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (Net Total)</td>
                            <td class="num" style="font-weight:bold;">${k.net.toFixed(2)}</td>
                        </tr>
                        `:""}
                    </tbody>
                </table>
            </body>
            </html>
        `;const F=new Blob([D],{type:"application/vnd.ms-excel"}),Y=URL.createObjectURL(F),R=document.createElement("a");R.href=Y,R.download=`${B.code}_${new Date().toISOString().split("T")[0]}.xls`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(Y)};return e.jsxs("div",{className:"fixed inset-0 bg-black/60 z-50 flex flex-col animate-fade-in text-slate-900 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-800 text-white p-4 flex justify-between items-center shadow-md print:hidden w-full z-10",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-blue-400"})," ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Print Preview)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-2 py-1 border border-slate-600",children:[e.jsx("span",{className:"text-xs text-white",children:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"}),e.jsx("input",{type:"number",value:h,onChange:i=>p(Number(i.target.value)),className:"w-12 bg-slate-800 border border-slate-500 rounded px-1 text-center text-xs text-white focus:ring-1 focus:ring-blue-500 outline-none",min:"0",max:"100"}),e.jsx("span",{className:"text-xs text-slate-400",children:"%"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-2 py-1 border border-slate-600",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:i=>j(i.target.checked),className:"rounded text-blue-500 focus:ring-blue-500 bg-slate-600 border-slate-500"}),e.jsx("span",{className:b?"text-white":"text-slate-400",children:"‡∏Ñ‡∏¥‡∏î VAT"})]}),b&&e.jsxs("div",{className:"flex items-center gap-1 border-l border-slate-600 pl-2",children:[e.jsx("input",{type:"number",value:g,onChange:i=>m(Number(i.target.value)),className:"w-12 bg-slate-800 border border-slate-500 rounded px-1 text-center text-xs text-white focus:ring-1 focus:ring-blue-500 outline-none",min:"0",max:"100"}),e.jsx("span",{className:"text-xs text-slate-400",children:"%"})]})]}),e.jsx("div",{className:"h-6 w-px bg-slate-600 mx-2"}),e.jsxs("button",{onClick:()=>n(!s),className:`px-3 py-1.5 text-xs font-bold rounded-lg border flex items-center gap-1 transition-all ${s?"bg-amber-500 border-amber-500 text-white":"bg-transparent border-slate-600 text-slate-300 hover:border-slate-400"}`,children:[e.jsx(pl,{className:"w-3 h-3"})," ",s?"Editing Mode":"Edit Header"]}),e.jsxs("button",{onClick:y,className:"px-3 py-2 bg-green-700 text-white rounded-lg hover:bg-green-600 font-bold text-sm flex items-center gap-2",children:[e.jsx(bl,{className:"w-4 h-4"})," Excel"]}),e.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-white text-slate-900 rounded-lg hover:bg-slate-100 font-bold text-sm flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"})," ‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsxs("button",{onClick:async()=>{(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",text:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£? (Confirm Save & Generate Document)",icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"})).isConfirmed&&r()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold text-sm flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"]}),e.jsx("button",{onClick:d,className:"ml-2 p-2 hover:bg-slate-700 rounded-full",children:e.jsx(de,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 p-8 print:p-0 print:bg-white print:overflow-visible",children:e.jsxs("div",{className:"bg-white shadow-lg mx-auto max-w-[210mm] min-h-[297mm] p-[15mm] print:shadow-none print:w-full print:max-w-none print:p-0 relative",children:[e.jsxs("div",{className:"flex border-b-2 border-slate-800 pb-4 mb-6",children:[e.jsx("div",{className:"w-[100px] h-[100px] flex items-center justify-center mr-6",children:e.jsx("img",{src:"/logo.png",alt:"Neo Siam Logo",className:"max-w-full max-h-full object-contain"})}),e.jsx("div",{className:"flex-1",children:s?e.jsxs("div",{className:"space-y-1",children:[e.jsx("input",{value:o.companyNameTH,onChange:i=>t({...o,companyNameTH:i.target.value}),className:"w-full text-lg font-bold border rounded px-1"}),e.jsx("input",{value:o.companyNameEN,onChange:i=>t({...o,companyNameEN:i.target.value}),className:"w-full text-sm border rounded px-1"}),e.jsx("input",{value:o.address,onChange:i=>t({...o,address:i.target.value}),className:"w-full text-xs text-slate-600 border rounded px-1"}),e.jsx("input",{value:o.contact,onChange:i=>t({...o,contact:i.target.value}),className:"w-full text-xs text-slate-600 border rounded px-1"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-800",children:o.companyNameTH}),e.jsx("h2",{className:"text-sm font-bold text-slate-600",children:o.companyNameEN}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:o.address}),e.jsx("p",{className:"text-xs text-slate-500",children:o.contact})]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"border inline-block px-4 py-2 rounded text-center mb-2",children:[e.jsx("div",{className:"text-[10px] text-slate-500",children:"Document No."}),e.jsx("div",{className:"font-bold font-mono text-lg",children:at(c.type).code})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Date: ",new Date().toLocaleDateString("th-TH")]})]})]}),e.jsxs("div",{className:"text-center mb-8",children:[s?e.jsx("input",{value:o.titleTH,onChange:i=>t({...o,titleTH:i.target.value}),className:"text-CENTER text-2xl font-bold border rounded px-2 w-full mb-1"}):e.jsx("h2",{className:"text-2xl font-bold uppercase border-b border-black inline-block px-8 pb-1",children:o.titleTH||at(c.type).th}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 uppercase tracking-wide",children:o.titleEN||at(c.type).en})]}),e.jsx("div",{className:"mb-6 text-sm",children:e.jsx("div",{className:"p-4 border rounded-lg print:border-none print:p-0",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 leading-loose",children:[e.jsxs("div",{className:"flex items-end border-b border-dotted border-slate-400 pb-1",children:[e.jsx("span",{className:"font-bold w-[60px]",children:"‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:"}),e.jsx("span",{className:"flex-1 px-2 text-slate-800"})]}),e.jsxs("div",{className:"flex items-end border-b border-dotted border-slate-400 pb-1",children:[e.jsx("span",{className:"font-bold w-[60px]",children:"‡∏ú‡πà‡∏≤‡∏ô:"}),e.jsx("span",{className:"flex-1 px-2 text-slate-800"})]})]})})}),e.jsxs("table",{className:"w-full border-collapse border border-slate-800 text-sm mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 print:bg-slate-200 text-center",children:[e.jsx("th",{className:"border border-slate-800 p-2 w-10",children:"#"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[120px]",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-slate-800 p-2",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[80px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[60px]",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏™‡∏†‡∏≤‡∏û"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô"})]})}),e.jsxs("tbody",{children:[v.map((i,O)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-800 p-2 text-center",children:O+1}),e.jsx("td",{className:"border border-slate-800 p-2",children:i.productCode}),e.jsxs("td",{className:"border border-slate-800 p-2",children:[e.jsx("div",{children:i.productName}),e.jsxs("div",{className:"text-[10px] text-slate-500",children:["Ref: ",i.refNo]})]}),e.jsx("td",{className:"border border-slate-800 p-2 text-center font-bold",children:i.quantity}),e.jsx("td",{className:"border border-slate-800 p-2 text-center",children:i.unit}),e.jsx("td",{className:"border border-slate-800 p-2 text-center text-xs",children:i.condition}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:s?e.jsx("input",{type:"number",className:"w-full text-right bg-transparent border-b border-dashed border-gray-300 focus:border-blue-500 outline-none text-sm font-bold print:border-none",value:i.pricePerUnit??(i.priceBill||0)/(i.quantity||1),onChange:B=>{const D=parseFloat(B.target.value);w(F=>({...F,[i.id]:isNaN(D)?0:D}))},onBlur:B=>{const D=parseFloat(B.target.value);I(i.id,{pricePerUnit:D,priceBill:D*(i.quantity||1)})}}):(i.pricePerUnit??(i.priceBill||0)/(i.quantity||1)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:(i.priceBill||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]},O)),e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsxs("td",{colSpan:6,rowSpan:h>0?b?5:3:b?3:1,className:"border border-slate-800 p-4 text-center align-middle text-lg italic bg-slate-50 text-slate-600 print:hidden",children:["(",ds(k.net),")"]}),e.jsxs("td",{colSpan:6,rowSpan:h>0?b?5:3:b?3:1,className:"border border-slate-800 p-4 text-center align-middle text-lg italic bg-slate-50 text-slate-600 hidden print:table-cell",children:["(",ds(k.net),")"]}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:"‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:k.subtotal.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),h>0&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsxs("td",{className:"border border-slate-800 p-2 text-right text-red-600",children:["‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î ",h,"%"]}),e.jsxs("td",{className:"border border-slate-800 p-2 text-right text-red-600",children:["-",k.discount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:"‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:k.afterDiscount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]})]}),b&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsxs("td",{className:"border border-slate-800 p-2 text-right",children:["VAT ",g,"%"]}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:k.vat.toLocaleString([],{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsxs("tr",{className:"font-bold bg-slate-100 print:bg-slate-200",children:[e.jsx("td",{className:"border border-slate-800 p-2 text-right text-black",children:"‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right text-black",children:k.net.toLocaleString([],{minimumFractionDigits:2,maximumFractionDigits:2})})]})]})]})]}),e.jsxs("div",{className:"mb-8 p-4 border border-slate-300 rounded print:border-black",children:[e.jsx("span",{className:"font-bold underline text-sm",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:"}),s?e.jsx("textarea",{value:o.remarks,onChange:i=>t({...o,remarks:i.target.value}),className:"w-full mt-1 p-1 border rounded",rows:2}):e.jsx("p",{className:"text-sm mt-1 indent-4",children:o.remarks})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-12 print:break-inside-avoid",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:o.signatory1}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:o.signatory2}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:o.signatory3}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]})]})]})})]})},ea=({isOpen:a,onClose:d,item:c,onConfirm:o})=>{const[t,s]=N.useState(0),[n,b]=N.useState("SAME"),[j,g]=N.useState(!1),[m,h]=N.useState(1),[p,r]=N.useState(""),[I,l]=N.useState(null);if(N.useEffect(()=>{a&&c&&(s(0),b("SAME"),g(!1),h(1),r(""),l(c.disposition||null))},[a,c]),!a||!c)return null;const w=j?c.quantity*m:c.quantity,v=j?p||"Unit":c.unit,k=y=>{y.preventDefault();const i=n==="SAME"?c.disposition:n,O=I||c.disposition;o(t,i,j,m,p,O)};return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white shadow-xl w-full h-full flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5 text-blue-600"})," ‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item)"]}),e.jsx("button",{onClick:d,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-200 transition-colors",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700 mb-1",children:c.productName}),e.jsx("div",{className:"flex justify-between text-xs text-slate-500",children:e.jsxs("span",{children:["ID: ",c.id]})}),e.jsxs("div",{className:"mt-2 text-2xl font-bold text-blue-700",children:[c.quantity," ",e.jsx("span",{className:"text-sm font-normal text-slate-500",children:c.unit})]}),j&&e.jsxs("div",{className:"mt-1 text-xs text-amber-600 font-bold",children:["‚ûî ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ",w," ",v]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å (Main Disposition)"}),e.jsx("select",{value:I||"",onChange:y=>l(y.target.value),className:"w-full p-2 border border-blue-300 rounded text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none text-blue-900",children:Object.entries(Ke).map(([y,i])=>e.jsx("option",{value:y,children:i},y))})]})]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:y=>g(y.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (Unit Breakdown)"})]}),j&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 pl-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô (‡∏ï‡πà‡∏≠ 1 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏´‡∏•‡∏±‡∏Å)"}),e.jsx("input",{type:"number",min:"1",value:m,onChange:y=>h(parseInt(y.target.value)||1),className:"w-full p-2 border border-slate-300 rounded text-sm",placeholder:"‡πÄ‡∏ä‡πà‡∏ô 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà"}),e.jsx("input",{type:"text",value:p,onChange:y=>r(y.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏´‡πà‡∏≠"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å (",v,")"]}),e.jsx("input",{type:"number",min:"1",max:w-1,value:t===0?"":t,onChange:y=>s(parseInt(y.target.value)||0),className:"w-full p-3 border border-slate-300 rounded-lg text-lg font-bold text-center focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0",autoFocus:!0}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ",w-t," ",v]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà: ",t," ",v]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å (New Disposition)"}),e.jsxs("select",{value:n,onChange:y=>b(y.target.value),className:"w-full p-3 border border-slate-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none",children:[e.jsxs("option",{value:"SAME",children:["‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏° (Keep ",Ke[c.disposition],")"]}),e.jsx("option",{disabled:!0,children:"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"}),Object.entries(Ke).map(([y,i])=>e.jsx("option",{value:y,children:i},y))]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 py-3 px-4 rounded-lg border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{type:"submit",disabled:t<=0||t>=w,className:"flex-1 py-3 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å ",e.jsx(ps,{className:"w-4 h-4"})]})]})]})]})})},ta=({initialData:a,onClearInitialData:d,initialStep:c})=>{var m;const{state:o,actions:t,derived:s}=us(a,d),[n,b]=N.useState(!0);te.useEffect(()=>{c&&t.setActiveStep(c)},[c]);const j=[{id:1,label:"1. ‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Request)",icon:ul,count:void 0,color:"text-blue-600",group:"Return Request"},{id:2,label:"2. ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡∏ô‡∏™‡πà‡∏á (Consolidation & Logistics)",icon:ne,count:((m=s.ncrStep2Items)==null?void 0:m.length)||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:3,label:"3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Received at Hub)",icon:Nt,count:s.step6Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:4,label:"4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)",icon:St,count:void 0,color:"text-indigo-600",group:"NCR Hub"},{id:5,label:"5. ‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô (Docs)",icon:ie,count:s.step7Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:6,label:"6. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending Completion)",icon:ut,count:s.step8Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:7,label:"7. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed)",icon:Se,count:void 0,color:"text-green-600",group:"NCR Hub"}],g=()=>{switch(o.activeStep){case 1:return e.jsx(Wl,{formData:o.formData,requestItems:o.requestItems,isCustomBranch:o.isCustomBranch,uniqueCustomers:s.uniqueCustomers,uniqueDestinations:s.uniqueDestinations,uniqueFounders:s.uniqueFounders,uniqueProductCodes:s.uniqueProductCodes,uniqueProductNames:s.uniqueProductNames,setFormData:t.setFormData,setRequestItems:t.setRequestItems,setIsCustomBranch:t.setIsCustomBranch,handleImageUpload:t.handleImageUpload,handleRemoveImage:t.handleRemoveImage,handleAddItem:t.handleAddItem,handleRemoveItem:t.handleRemoveItem,handleRequestSubmit:t.handleRequestSubmit});case 12:return e.jsx(hs,{});case 13:return e.jsx(gs,{});case 14:return e.jsx(fs,{});case 2:return e.jsx(Vl,{onConfirm:t.handleLogisticsSubmit});case 3:return e.jsx(Gl,{});case 4:return e.jsx(zl,{});case 5:return e.jsx(Kl,{onPrintDocs:t.handlePrintClick});case 6:return e.jsx(Jl,{});case 7:return e.jsx(Yl,{});default:return e.jsx("div",{className:"p-8 text-center text-slate-400",children:"‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (Step Coming Soon)"})}};return e.jsxs("div",{className:"flex bg-slate-100 h-screen overflow-hidden font-sans",children:[e.jsxs("aside",{className:`${n?"w-72":"w-20"} 
        bg-white border-r border-slate-200 flex flex-col transition-all duration-300 shadow-xl z-20`,children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[n&&e.jsxs("div",{className:"font-extrabold text-xl text-slate-800 tracking-tight flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-blue-200",children:e.jsx(Nt,{className:"w-5 h-5"})}),e.jsxs("span",{className:"bg-gradient-to-r from-blue-700 to-blue-500 bg-clip-text text-transparent transform scale-90 origin-left flex flex-col",children:[e.jsx("span",{className:"text-sm",children:"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"text-[10px] text-slate-500",children:"Return Operations Hub"})]})]}),e.jsx("button",{onClick:()=>b(!n),className:"p-2 hover:bg-white rounded-lg transition-colors text-slate-400 hover:text-blue-600 hover:shadow-sm",children:e.jsx(hl,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-1",children:["Return Request","NCR Hub"].map(h=>{const p=j.filter(r=>r.group===h);return p.length===0?null:e.jsxs("div",{className:"mb-4",children:[n&&e.jsx("div",{className:"px-3 mb-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:h}),p.map(r=>e.jsxs("button",{onClick:()=>t.setActiveStep(r.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group relative mb-1
                        ${o.activeStep===r.id?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100 font-bold":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[e.jsx("div",{className:`p-1.5 rounded-lg transition-all duration-200 ${o.activeStep===r.id?"bg-white shadow-sm":"bg-slate-100 group-hover:bg-white"}`,children:e.jsx(r.icon,{className:`w-4 h-4 ${o.activeStep===r.id?r.color:"text-slate-400"}`})}),n&&e.jsxs("div",{className:"flex-1 text-left flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium",children:r.label}),r.count&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold
                              ${o.activeStep===r.id?"bg-white text-blue-600 shadow-sm":"bg-slate-100 text-slate-500"}`,children:r.count})]})]},r.id))]},h)})}),e.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50",children:n?e.jsxs("div",{className:"text-xs text-slate-400 text-center font-medium",children:["Neo Siam Logistics",e.jsx("br",{}),"NCR Operations System v3.0"]}):e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})})})]}),e.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-white/50 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-slate-50 -z-10 skew-y-1 transform origin-top-left opacity-50"}),e.jsx("div",{className:"flex-1 overflow-hidden p-2 sm:p-4",children:g()})]}),o.showSelectionModal&&e.jsx(Xl,{isOpen:o.showSelectionModal,onClose:()=>t.setShowSelectionModal(!1),selectionItems:o.selectionItems,selectedItemIds:o.selectedItemIds,toggleSelection:t.toggleSelection,handleGenerateDoc:t.handleGenerateDoc,selectionStatus:o.selectionStatus,onSplit:t.handleDocItemClick}),o.showDocModal&&o.docData&&e.jsx(Zl,{isOpen:o.showDocModal,onClose:()=>t.setShowDocModal(!1),docData:o.docData,docConfig:o.docConfig,setDocConfig:t.setDocConfig,includeVat:o.includeVat,vatRate:o.vatRate,discountRate:o.discountRate,isDocEditable:o.isDocEditable,setIncludeVat:t.setIncludeVat,setVatRate:t.setVatRate,setDiscountRate:t.setDiscountRate,setIsDocEditable:t.setIsDocEditable,handleConfirmDocGeneration:t.handleConfirmDocGeneration,onUpdateItem:t.handleUpdateDocItem}),o.showStep4SplitModal&&o.docSelectedItem&&e.jsx(ea,{isOpen:o.showStep4SplitModal,onClose:()=>t.setShowStep4SplitModal(!1),item:o.docSelectedItem,onConfirm:t.handleStep4SplitSubmit})]})},Ns=({value:a,onChange:d,options:c,placeholder:o,className:t,disabled:s})=>{const[n,b]=N.useState(!1),j=N.useRef(null);N.useEffect(()=>{function m(h){j.current&&!j.current.contains(h.target)&&b(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const g=c.filter(m=>m.toLowerCase().includes((a||"").toLowerCase()));return e.jsxs("div",{className:"relative flex-1",ref:j,children:[e.jsx("input",{type:"text",className:t,value:a,onChange:m=>{d(m.target.value),s||b(!0)},onFocus:()=>{s||b(!0)},placeholder:o,disabled:s}),n&&g.length>0&&e.jsx("div",{className:"absolute z-10 w-full left-0 mt-1 bg-white border border-slate-300 shadow-lg max-h-60 overflow-auto rounded-sm print:hidden",children:g.map((m,h)=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 text-slate-700 block border-b border-slate-100 last:border-0",onClick:()=>{d(m),b(!1)},children:m},h))})]})},js=async(a,d,c)=>{const o=new _t.Workbook,t=o.addWorksheet("NCR Report");t.pageSetup={paperSize:9,orientation:"portrait",fitToPage:!0,fitToWidth:1,fitToHeight:0,margins:{left:.4,right:.4,top:.4,bottom:.4,header:.3,footer:.3}},t.columns=Array(20).fill({width:4.5});const s={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},n={top:{style:"medium"},left:{style:"medium"},bottom:{style:"medium"},right:{style:"medium"}},b={name:"TH Sarabun New",size:12},j={name:"TH Sarabun New",size:12,bold:!0},g={vertical:"middle",horizontal:"center"},m=H=>H?"‚òë":"‚òê";try{const M=await(await fetch("/logo.png")).arrayBuffer(),U=o.addImage({buffer:M,extension:"png"});t.addImage(U,{tl:{col:0,row:0},br:{col:4,row:5},editAs:"oneCell"})}catch(H){console.warn("Failed to load logo for Excel",H);const f=t.getCell("A1");f.value="NEO",f.font={name:"Arial",size:24,bold:!0,color:{argb:"FF1E3A8A"}},f.alignment=g}t.mergeCells("A1:D5");const h=t.getCell("A1");h.border=n,t.mergeCells("E1:T1");const p=t.getCell("E1");p.value="‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î",p.font={name:"TH Sarabun New",size:18,bold:!0},p.alignment={vertical:"bottom",horizontal:"left"},t.mergeCells("E2:T2");const r=t.getCell("E2");r.value="NEOSIAM LOGISTICS & TRANSPORT CO., LTD.",r.font={name:"TH Sarabun New",size:12,bold:!0},r.alignment={vertical:"top",horizontal:"left"},t.mergeCells("E3:T3"),t.getCell("E3").value="159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000",t.getCell("E3").font=b,t.mergeCells("E4:T4"),t.getCell("E4").value="Tax ID: 0105552087673 | Tel: 056-275-841",t.getCell("E4").font=b,t.mergeCells("A6:T7");const I=t.getCell("A6");I.value="‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô",I.font={name:"TH Sarabun New",size:18,bold:!0},I.alignment=g,I.border={top:{style:"medium"},bottom:{style:"medium"}};let l=9;t.mergeCells(`A${l}:C${l}`),t.getCell(`A${l}`).value="‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:",t.getCell(`A${l}`).font=j,t.mergeCells(`D${l}:G${l}`),t.getCell(`D${l}`).value=a.toDept,t.getCell(`D${l}`).font=b,t.getCell(`D${l}`).border={bottom:{style:"dotted"}},t.mergeCells(`I${l}:J${l}`),t.getCell(`I${l}`).value="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:",t.getCell(`I${l}`).font=j,t.mergeCells(`K${l}:M${l}`),t.getCell(`K${l}`).value=a.date,t.getCell(`K${l}`).font=b,t.getCell(`K${l}`).border={bottom:{style:"dotted"}},t.mergeCells(`O${l}:P${l}`),t.getCell(`O${l}`).value="‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:",t.getCell(`O${l}`).font=j,t.mergeCells(`Q${l}:T${l}`),t.getCell(`Q${l}`).value=a.copyTo,t.getCell(`Q${l}`).font=b,t.getCell(`Q${l}`).border={bottom:{style:"dotted"}},l+=2,t.mergeCells(`A${l}:C${l}`),t.getCell(`A${l}`).value="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR:",t.getCell(`A${l}`).font=j,t.mergeCells(`D${l}:G${l}`),t.getCell(`D${l}`).value=c,t.getCell(`D${l}`).font=j,t.getCell(`D${l}`).border={bottom:{style:"dotted"}},t.mergeCells(`I${l}:J${l}`),t.getCell(`I${l}`).value="‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤:",t.getCell(`I${l}`).font=j,t.mergeCells(`K${l}:M${l}`),t.getCell(`K${l}`).value=a.founder,t.getCell(`K${l}`).font=b,t.getCell(`K${l}`).border={bottom:{style:"dotted"}},t.mergeCells(`O${l}:P${l}`),t.getCell(`O${l}`).value="Ref/PO:",t.getCell(`O${l}`).font=j,t.mergeCells(`Q${l}:T${l}`),t.getCell(`Q${l}`).value=a.poNo,t.getCell(`Q${l}`).font=b,t.getCell(`Q${l}`).border={bottom:{style:"dotted"}},l+=2,t.mergeCells(`A${l}:T${l}`),t.getCell(`A${l}`).value="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items)",t.getCell(`A${l}`).font={name:"TH Sarabun New",size:12,bold:!0,underline:!0},l+=1;const w=l;if([{label:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",range:"A:C"},{label:"Ref/Neo Ref",range:"D:F"},{label:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",range:"G:K"},{label:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",range:"L:L"},{label:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",range:"M:M"},{label:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",range:"N:P"},{label:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",range:"Q:T"}].forEach(H=>{const[f,M]=H.range.split(":");t.mergeCells(`${f}${w}:${M}${w}`);const U=t.getCell(`${f}${w}`);U.value=H.label,U.font=j,U.alignment={horizontal:"center",vertical:"middle"},U.border=s,U.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}}}),l+=1,d.length>0)d.forEach(H=>{var _e,Q;const f=l,M=t.getRow(f),U=`[${H.productCode}] ${H.productName}
${H.customerName||""} ${H.destinationCustomer?"(‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: "+H.destinationCustomer+")":""}`,K=`Ref: ${H.refNo}
Neo: ${H.neoRefNo}`,C=`${H.problemSource}
${H.hasCost?`Cost: ${(_e=H.costAmount)==null?void 0:_e.toLocaleString()}`:""}`,Z=(u,L)=>{if(!u)return 1;const je=u.toString().split(/\r\n|\r|\n/).reduce((Pe,Te)=>{const x=Te.length;return x===0?Pe+1:Pe+Math.ceil(x/L)},0);return Math.max(1,je)},le=Z(U,35),me=Z(K,18),z=Z(C,22),xe=Math.max(le,me,z,1);M.height=xe*20+12,t.mergeCells(`A${f}:C${f}`);const we=t.getCell(`A${f}`);we.value=H.branch,we.font=b,we.alignment={vertical:"top",horizontal:"left",wrapText:!0},we.border=s,t.mergeCells(`D${f}:F${f}`);const fe=t.getCell(`D${f}`);fe.value=K,fe.font=b,fe.alignment={vertical:"top",horizontal:"left",wrapText:!0},fe.border=s,t.mergeCells(`G${f}:K${f}`);const se=t.getCell(`G${f}`);se.value=U,se.font=b,se.alignment={vertical:"top",horizontal:"left",wrapText:!0},se.border=s,t.mergeCells(`L${f}:L${f}`);const Ne=t.getCell(`L${f}`);Ne.value=H.quantity,Ne.font=b,Ne.alignment={vertical:"top",horizontal:"center"},Ne.border=s,t.mergeCells(`M${f}:M${f}`);const Oe=t.getCell(`M${f}`);Oe.value=H.unit,Oe.font=b,Oe.alignment={vertical:"top",horizontal:"center"},Oe.border=s,t.mergeCells(`N${f}:P${f}`);const Ae=t.getCell(`N${f}`);Ae.value=`${(Q=H.priceBill)==null?void 0:Q.toLocaleString()} ‡∏ö.
Exp: ${H.expiryDate}`,Ae.font=b,Ae.alignment={vertical:"top",horizontal:"right",wrapText:!0},Ae.border=s,t.mergeCells(`Q${f}:T${f}`);const Re=t.getCell(`Q${f}`);Re.value=C,Re.font=b,Re.alignment={vertical:"top",horizontal:"left",wrapText:!0},Re.border=s,l+=1});else{t.mergeCells(`A${l}:T${l}`);const H=t.getCell(`A${l}`);H.value="‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",H.border=s,H.alignment=g,l+=1}l+=1,t.mergeCells(`A${l}:T${l}`);const k=t.getCell(`A${l}`);k.value="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)",k.font=j,k.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}},k.border=s,l+=1;const y=(H,f,M,U,K,C,Z,le)=>{t.mergeCells(`A${l}:E${l}`),t.getCell(`A${l}`).value=`${m(f)} ${H}`,t.mergeCells(`F${l}:J${l}`),t.getCell(`F${l}`).value=`${m(U)} ${M}`,t.mergeCells(`K${l}:O${l}`),t.getCell(`K${l}`).value=`${m(C)} ${K}`,t.mergeCells(`P${l}:T${l}`),t.getCell(`P${l}`).value=`${m(le)} ${Z}`,["A","F","K","P"].forEach(me=>{t.getCell(`${me}${l}`).font=b}),l++};y("‡∏ä‡∏≥‡∏£‡∏∏‡∏î",a.problemDamaged,"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á",a.problemDamagedInBox,"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢",a.problemLost,"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö",a.problemMixed),y("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV",a.problemWrongInv,"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤",a.problemLate,"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥",a.problemDuplicate,"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î",a.problemWrong),y("‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",a.problemIncomplete,"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô",a.problemOver,"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",a.problemWrongInfo,"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô",a.problemShortExpiry),y("‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ",a.problemTransportDamage,"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",a.problemAccident,"PO ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",a.problemPOExpired,"BarCode ‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô",a.problemNoBarcode),t.mergeCells(`A${l}:E${l}`),t.getCell(`A${l}`).value=`${m(a.problemOther)} ‡∏≠‡∏∑‡πà‡∏ô‡πÜ: ${a.problemOtherText||""}`,t.getCell(`A${l}`).font=b,l++,t.mergeCells(`A${l}:T${l}`),t.getCell(`A${l}`).value="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:",t.getCell(`A${l}`).font=j,l++,t.mergeCells(`A${l}:T${l+2}`);const i=t.getCell(`A${l}`);i.value=a.problemDetail||"-",i.alignment={vertical:"top",horizontal:"left",wrapText:!0},i.border=s,l+=3,t.mergeCells(`A${l}:T${l}`);const O=t.getCell(`A${l}`);O.value="‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",O.font=j,O.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}},O.border=s,l++;const B=(H,f,M,U,K)=>{t.mergeCells(`A${l}:H${l}`),t.getCell(`A${l}`).value=`${m(H)} ${f} (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${M})`,t.getCell(`A${l}`).font=b,t.getCell(`A${l}`).border=s,t.mergeCells(`I${l}:T${l}`),t.getCell(`I${l}`).value=U?`${U}: ${K}`:"",t.getCell(`I${l}`).font=b,t.getCell(`I${l}`).border=s,l++};B(a.actionReject,"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",a.actionRejectQty,"",""),B(a.actionRejectSort,"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",a.actionRejectSortQty,"",""),B(a.actionRework,"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",a.actionReworkQty,"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£",a.actionReworkMethod),B(a.actionSpecialAcceptance,"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",a.actionSpecialAcceptanceQty,"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",a.actionSpecialAcceptanceReason),B(a.actionScrap,"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",a.actionScrapQty,"",""),B(a.actionReplace,"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",a.actionReplaceQty,"",""),t.mergeCells(`A${l}:D${l}`),t.getCell(`A${l}`).value=`‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à: ${a.dueDate||""}`,t.mergeCells(`E${l}:J${l}`),t.getCell(`E${l}`).value=`‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥: ${a.approver||""}`,t.mergeCells(`K${l}:O${l}`),t.getCell(`K${l}`).value=`‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${a.approverPosition||""}`,t.mergeCells(`P${l}:T${l}`),t.getCell(`P${l}`).value=`‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${a.approverDate||""}`,["A","E","K","P"].forEach(H=>{const f=t.getCell(`${H}${l}`);f.font=b,f.border=s}),l++,l++,t.mergeCells(`A${l}:T${l}`);const D=t.getCell(`A${l}`);D.value="‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (Root Cause & Prevention)",D.font=j,D.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}},D.border=s,l++,t.mergeCells(`A${l}:E${l}`),t.getCell(`A${l}`).value=`‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏: ${[a.causePackaging?"‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå":"",a.causeTransport?"‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á":"",a.causeOperation?"‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô":"",a.causeEnv?"‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°":""].filter(Boolean).join(", ")}`,t.getCell(`A${l}`).font=b,t.getCell(`A${l}`).border=s,t.mergeCells(`F${l}:T${l}`),t.getCell(`F${l}`).value=`‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ${a.causeDetail}`,t.getCell(`F${l}`).font=b,t.getCell(`F${l}`).border=s,l++,t.mergeCells(`F${l}:T${l}`),t.getCell(`F${l}`).value=`‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô: ${a.preventionDetail}`,t.getCell(`F${l}`).font=b,t.getCell(`F${l}`).border=s,t.mergeCells(`A${l}:E${l}`),t.getCell(`A${l}`).value=`‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö: ${a.responsiblePerson} (${a.responsiblePosition})`,t.getCell(`A${l}`).font=b,t.getCell(`A${l}`).border=s,l++,l++,t.mergeCells(`A${l}:T${l}`),t.getCell(`A${l}`).value="‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR",t.getCell(`A${l}`).font=j,t.getCell(`A${l}`).border=s,l++,t.mergeCells(`A${l}:T${l}`),t.getCell(`A${l}`).value=`${m(a.qaAccept)} ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á  ${m(a.qaReject)} ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö (‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: ${a.qaReason||"-"})`,t.getCell(`A${l}`).font=b,t.getCell(`A${l}`).border=s,l++,l++,t.mergeCells(`B${l}:H${l}`);const F=t.getCell(`B${l}`);F.value="__________________________",F.alignment=g,t.mergeCells(`L${l}:R${l}`);const Y=t.getCell(`L${l}`);Y.value="__________________________",Y.alignment=g,l++,t.mergeCells(`B${l}:H${l}`);const R=t.getCell(`B${l}`);R.value="‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° (QA)",R.alignment=g,R.font=b,t.mergeCells(`L${l}:R${l}`);const $=t.getCell(`L${l}`);$.value="‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏õ‡∏¥‡∏î (MD)",$.alignment=g,$.font=b;const X=await o.xlsx.writeBuffer(),ce=new Blob([X],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Ht.saveAs(ce,`NCR_${c}_${new Date().toISOString().split("T")[0]}.xlsx`)},sa=["‡∏™‡∏≤‡∏¢ 3","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏Ñ‡∏•‡∏≠‡∏á13","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"],la=()=>{const{addNCRReport:a,getNextNCRNumber:d,addReturnRecord:c,ncrReports:o}=ge(),t={toDept:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",date:new Date().toISOString().split("T")[0],copyTo:"",founder:"",poNo:"",problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAccept:!1,actionSpecialAcceptQty:0,actionSpecialAcceptReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",preventionDueDate:"",dueDate:"",approver:"",approverPosition:"",approverDate:"",responsiblePerson:"",responsiblePosition:"",qaAccept:!1,qaReject:!1,qaReason:""},[s,n]=N.useState(t),[b,j]=N.useState([]),[g,m]=N.useState(!1),[h,p]=N.useState({branch:"",refNo:"",neoRefNo:"",productCode:"",productName:"",customerName:"",destinationCustomer:"",quantity:0,unit:"",pricePerUnit:0,priceBill:0,expiryDate:"",hasCost:!1,costAmount:0,costResponsible:"",problemSource:""}),[r,I]=N.useState(!1),[l,w]=N.useState({category:"",whBranch:"",whCause:"",whOtherText:"",transType:"",transName:"",transPlate:"",transVehicleType:"",transAffiliation:"",transCompany:"",otherText:"",problemScenario:""}),[v,k]=N.useState(!1),[y,i]=N.useState(!1),[O,B]=N.useState(!1),[D,F]=N.useState(null),[Y,R]=N.useState(!1),[$,X]=N.useState(""),ce=N.useMemo(()=>{const u=new Set(o.map(L=>L.founder).filter(Boolean));return Array.from(u).sort()},[o]),[H,f]=N.useState(!1),[M,U]=N.useState(null),[K,C]=N.useState(null),[Z,le]=N.useState(""),me=()=>{if(Z!=="1234"){T.fire({icon:"error",title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",timer:1500,showConfirmButton:!1});return}if(M==="DELETE"&&K)j(b.filter(u=>u.id!==K));else if(M==="EDIT"&&K){const u=b.find(L=>L.id===K);if(u){p(u);const L=b.filter(q=>q.id!==K);j(L),m(!0)}}f(!1),le(""),U(null),C(null)},z=u=>{U("DELETE"),C(u),f(!0)},xe=u=>{U("EDIT"),C(u),f(!0)};N.useEffect(()=>{g&&(w({category:"",whBranch:"",whCause:"",whOtherText:"",transType:"",transName:"",transPlate:"",transVehicleType:"",transAffiliation:"",transCompany:"",otherText:"",problemScenario:""}),I(!1))},[g]),N.useEffect(()=>{if(h.hasCost&&h.problemSource){const u=It[h.problemSource];u&&p(L=>({...L,costResponsible:u}))}},[h.hasCost,h.problemSource]);const we=(u=!0)=>{if(!h.productCode||!h.branch){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏Ç‡∏≤"});return}let L="";const q=l;if(q.category==="Customer")L="‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á";else if(q.category==="DestinationCustomer")L="‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á";else if(q.category==="Accounting")L="‡∏ö‡∏±‡∏ç‡∏ä‡∏µ";else if(q.category==="Keying")L="‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î";else if(q.category==="Warehouse")L=`‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (${q.whBranch||"-"}) - ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏: ${q.whCause}${q.whCause==="‡∏≠‡∏∑‡πà‡∏ô‡πÜ"?" "+q.whOtherText:""}`;else if(q.category==="Transport"){const x=q.transType==="Company"?"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó":"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏°",P=[q.transName?`‡∏ä‡∏∑‡πà‡∏≠: ${q.transName}`:"",q.transPlate?`‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô: ${q.transPlate}`:"",q.transVehicleType?`‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${q.transVehicleType}`:"",q.transAffiliation?`‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î: ${q.transAffiliation}`:"",q.transType==="Joint"&&q.transCompany?`‡∏ö.: ${q.transCompany}`:""].filter(Boolean).join(", ");L=`‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á (${x}) - ${P}`}else q.category==="Other"&&(L=`‡∏≠‡∏∑‡πà‡∏ô‡πÜ: ${q.otherText}`);const je=[];L&&je.push(L),h.problemSource&&je.push(h.problemSource);const Pe=je.join(" / ")||"-",Te={...h,id:Date.now().toString(),destinationCustomer:h.destinationCustomer||"",quantity:Number(h.quantity)||0,pricePerUnit:Number(h.pricePerUnit)||0,priceBill:Number(h.priceBill)||0,costAmount:Number(h.costAmount)||0,problemSource:Pe};j([...b,Te]),p(x=>({...x,refNo:"",neoRefNo:"",productCode:"",productName:"",customerName:"",destinationCustomer:"",quantity:0,unit:"",pricePerUnit:0,priceBill:0,expiryDate:"",hasCost:!1,costAmount:0,costResponsible:"",problemSource:""})),w({category:"",whBranch:"",whCause:"",whOtherText:"",transType:"",transName:"",transPlate:"",transVehicleType:"",transAffiliation:"",transCompany:"",otherText:"",problemScenario:""}),u?m(!1):T.fire({icon:"success",title:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",toast:!0,position:"top-end",showConfirmButton:!1,timer:1500})},fe=()=>{const u=[];return s.founder.trim()||u.push("‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"),!(s.problemDamaged||s.problemDamagedInBox||s.problemLost||s.problemMixed||s.problemWrongInv||s.problemLate||s.problemDuplicate||s.problemWrong||s.problemIncomplete||s.problemOver||s.problemWrongInfo||s.problemShortExpiry||s.problemTransportDamage||s.problemAccident||s.problemPOExpired||s.problemNoBarcode||s.problemNotOrdered||s.problemOther&&s.problemOtherText.trim())&&!s.problemDetail.trim()&&u.push("‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)"),b.length===0&&u.push("‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£' ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)"),s.causePackaging||s.causeTransport||s.causeOperation||s.causeEnv||u.push("‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠)"),u},se=u=>{n(L=>L[u]?{...L,[u]:!1}:{...L,problemDamaged:!1,itemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemDamagedInBox:!1,[u]:!0})},Ne=u=>{n(L=>L[u]?{...L,[u]:!1}:{...L,actionReject:!1,actionRejectSort:!1,actionRework:!1,actionSpecialAcceptance:!1,actionScrap:!1,actionReplace:!1,[u]:!0})},Oe=async()=>{const u=fe();if(u.length>0&&!(await T.fire({title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",html:`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Export ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?<br/><br/><ul style="text-align: left; font-size: 0.9em; color: red;">${u.map(je=>`<li>- ${je}</li>`).join("")}</ul>`,icon:"warning",showCancelButton:!0,confirmButtonText:"Export ‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed)return;js(s,b,$||"Preview-Draft")},Ae=()=>{const u=fe();if(u.length>0){T.fire({icon:"warning",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",html:`<ul style="text-align: left; font-size: 0.9em;">${u.map(L=>`<li>- ${L}</li>`).join("")}</ul>`});return}R(!0),i(!0)},Re=()=>{const u=fe();if(u.length>0){T.fire({icon:"warning",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",html:`<ul style="text-align: left; font-size: 0.9em;">${u.map(L=>`<li>- ${L}</li>`).join("")}</ul>`});return}R(!1),i(!0)},_e=async()=>{i(!1),k(!0);const u=await d();if(u.includes("ERR")){F({success:!1,message:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á"}),B(!0),k(!1),R(!1);return}let L=0;for(const q of b){const je={...s,id:`${u}-${q.id}`,ncrNo:u,item:q,status:s.qaAccept?"Closed":"Open"};if(await a(je)){const Te={id:`RT-${new Date().getFullYear()}-${Date.now()}-${Math.floor(Math.random()*1e3)}`,refNo:q.refNo||"-",date:s.date||new Date().toISOString().split("T")[0],dateRequested:s.date||new Date().toISOString().split("T")[0],productName:q.productName||"Unknown Product",productCode:q.productCode||"N/A",quantity:q.quantity,unit:q.unit||"Unit",customerName:q.customerName||"Unknown Customer",destinationCustomer:q.destinationCustomer||"",branch:q.branch||"Head Office",category:"General",ncrNumber:u,documentType:"NCR",founder:s.founder,status:"COL_JobAccepted",disposition:"Pending",reason:`Created via NCR System (${s.problemDetail||"No Detail"})`,amount:q.priceBill||0,priceBill:q.priceBill||0,pricePerUnit:q.pricePerUnit||0,priceSell:0,neoRefNo:q.neoRefNo||"-",problemDamaged:s.problemDamaged,problemDamagedInBox:s.problemDamagedInBox,problemLost:s.problemLost,problemMixed:s.problemMixed,problemWrongInv:s.problemWrongInv,problemLate:s.problemLate,problemDuplicate:s.problemDuplicate,problemWrong:s.problemWrong,problemIncomplete:s.problemIncomplete,problemOver:s.problemOver,problemWrongInfo:s.problemWrongInfo,problemShortExpiry:s.problemShortExpiry,problemTransportDamage:s.problemTransportDamage,problemAccident:s.problemAccident,problemPOExpired:s.problemPOExpired,problemNoBarcode:s.problemNoBarcode,problemNotOrdered:s.problemNotOrdered,problemOther:s.problemOther,problemOtherText:s.problemOtherText,problemDetail:s.problemDetail,rootCause:q.problemSource||"NCR",problemSource:q.problemSource,hasCost:q.hasCost,costAmount:q.costAmount,costResponsible:q.costResponsible};console.log("üîÑ Syncing to Operations Hub:",Te),await c(Te)||(console.error("‚ùå Failed to sync record to Operations Hub",Te),await T.fire({icon:"warning",title:"Sync Failed",text:`‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å NCR ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Hub ‡πÑ‡∏î‡πâ (Item: ${q.productCode})`})),L++}else break}k(!1),L===b.length?(X(u),F({success:!0,message:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",ncrNo:u}),B(!0),Y&&setTimeout(()=>{window.print()},500)):(F({success:!1,message:`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Permission Denied)`}),B(!0))},Q=()=>{B(!1),D!=null&&D.success&&(j([]),n(t),X(""),R(!1)),F(null)};return e.jsxs("div",{className:"p-8 h-full overflow-auto bg-slate-50 flex flex-col items-center print:p-0 print:m-0 print:bg-white print:h-auto print:overflow-visible print:block",children:[e.jsx("style",{children:`
                @media screen {
                    .a4-paper {
                        width: 210mm;
                        min-height: 297mm;
                        margin: 40px auto;
                        background: white;
                        box-shadow: 0 0 20px rgba(0,0,0,0.15);
                        padding: 20mm;
                        position: relative;
                        /* Border for visual feedback of edges */
                        border: 1px solid #e2e8f0; 
                    }
                    /* Removed dark background override for consistency */
                }

                @media print {
                    @page {
                    thead { display: table-header-group; }
                    tfoot { display: table-footer-group; }
                    tr { page-break-inside: avoid; }
                    
                    /* Utility */
                    .print-break-avoid { page-break-inside: avoid !important; break-inside: avoid !important; }
                    .no-print { display: none !important; }
                    .print-border { border: 1px solid #000 !important; }
                    .print-border-2 { border: 2px solid #000 !important; }
                    
                    /* Input clean up */
                    input[type="text"], input[type="date"], input[type="number"], textarea, select {
                        border: none !important;
                        background: transparent !important;
                        resize: none;
                        padding: 0 !important;
                        margin: 0 !important;
                        /* approximate print text look */
                        font-family: inherit; 
                    }
                    /* Checbkox sizing */
                    input[type="checkbox"] {
                        width: 12px; height: 12px;
                    }
                }
            `}),e.jsxs("div",{className:"w-full max-w-5xl flex justify-end gap-2 mb-6 print:hidden",children:[e.jsxs("button",{onClick:Oe,className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-green-700 transition-colors",children:[e.jsx(Je,{className:"w-4 h-4"})," Export Excel"]}),e.jsxs("button",{onClick:Ae,className:"bg-slate-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-slate-700 transition-colors",children:[e.jsx(Ie,{className:"w-4 h-4"})," Print Form / Save as PDF"]}),e.jsxs("button",{onClick:Re,disabled:v,className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-wait",children:[e.jsx(Fe,{className:"w-4 h-4"})," Save Record"]})]}),e.jsxs("div",{className:"a4-paper",children:[e.jsxs("div",{className:"flex border-2 border-black mb-6 print-border-2",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black print-border p-4 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-24"})}),e.jsxs("div",{className:"w-[70%] p-4 flex flex-col justify-center pl-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 leading-none mb-2",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-sm text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{className:"text-slate-400",children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-xl font-bold text-center border-2 border-black print-border-2 py-2 mb-6 bg-white text-slate-900 print:bg-transparent",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm mb-8 print-text-readable",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{type:"text",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700 print:border-none",value:s.toDept,onChange:u=>n({...s,toDept:u.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{type:"date",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700 print:border-none",value:s.date,onChange:u=>n({...s,date:u.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{type:"text",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700 print:border-none",value:s.copyTo,onChange:u=>n({...s,copyTo:u.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"font-bold w-24 text-slate-800",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR: ",e.jsx("span",{className:"text-red-500 no-print",children:"*"})]}),e.jsx("div",{className:"flex-1 border-b border-dotted border-slate-400 bg-slate-100 outline-none px-2 py-1 font-mono text-slate-500 font-bold rounded-sm text-center print:bg-transparent print:text-black",children:$||"‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"font-bold w-24 text-slate-800",children:["‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ",e.jsx("span",{className:"text-red-500 no-print",children:"*"})]}),e.jsx(Ns,{className:"w-full border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700 print:border-none",value:s.founder,onChange:u=>n({...s,founder:u}),options:ce})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-32 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï:"}),e.jsx("input",{type:"text",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700 print:border-none",value:s.poNo,onChange:u=>n({...s,poNo:u.target.value})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("h3",{className:"font-bold text-slate-900 underline print-text-readable",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items) ",e.jsx("span",{className:"text-red-500 no-print",children:"*"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"print:hidden text-xs bg-blue-600 text-white px-2 py-1 rounded flex items-center gap-1 hover:bg-blue-700",children:[e.jsx(rs,{className:"w-3 h-3"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("div",{className:"border-2 border-black print-border-2 bg-white",children:e.jsxs("table",{className:"w-full text-xs text-left print-text-sm",children:[e.jsx("thead",{className:"bg-slate-100 print:bg-transparent border-b border-black font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border-r border-black print-border",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-2 border-r border-black print-border",children:"Ref/Neo Ref"}),e.jsx("th",{className:"p-2 border-r border-black print-border",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-2 border-r border-black text-center print-border",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-2 border-r border-black text-right print-border",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("th",{className:"p-2 border-r border-black print-border",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"}),e.jsx("th",{className:"p-2 text-center print:hidden w-10",children:"‡∏•‡∏ö"})]})}),e.jsx("tbody",{className:"divide-y divide-black",children:b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-4 text-center text-slate-400 italic",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£')"})}):b.map(u=>{var L;return e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black align-top print-border text-sm",children:e.jsx("div",{children:u.branch})}),e.jsxs("td",{className:"p-2 border-r border-black align-top print-border",children:[e.jsxs("div",{children:["Ref: ",u.refNo]}),e.jsxs("div",{className:"text-slate-500",children:["Neo: ",u.neoRefNo]})]}),e.jsxs("td",{className:"p-2 border-r border-black align-top print-border",children:[e.jsx("div",{className:"font-bold",children:u.productCode}),e.jsx("div",{className:"text-slate-600 font-medium",children:u.productName}),e.jsx("div",{className:"text-slate-500",children:u.customerName}),u.destinationCustomer&&e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: ",u.destinationCustomer]})]}),e.jsxs("td",{className:"p-2 border-r border-black text-center align-top print-border",children:[u.quantity," ",u.unit]}),e.jsxs("td",{className:"p-2 border-r border-black text-right align-top print-border",children:[e.jsxs("div",{children:[u.priceBill.toLocaleString()," ‡∏ö."]}),e.jsxs("div",{className:"text-red-500",children:["Exp: ",u.expiryDate]})]}),e.jsxs("td",{className:"p-2 border-r border-black align-top print-border",children:[e.jsx("div",{className:"font-medium",children:u.problemSource}),u.hasCost&&e.jsxs("div",{className:"text-red-600 font-bold mt-1",children:["Cost: ",(L=u.costAmount)==null?void 0:L.toLocaleString()," ‡∏ö.",e.jsxs("div",{className:"text-xs text-slate-500 font-normal",children:["(",u.costResponsible,")"]})]})]}),e.jsx("td",{className:"p-2 text-center align-top print:hidden",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>xe(u.id),className:"p-1 text-slate-400 hover:text-amber-500 transition-colors",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Edit)",children:e.jsx(gl,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(u.id),className:"p-1 text-slate-400 hover:text-red-500 transition-colors",title:"‡∏•‡∏ö (Delete)",children:e.jsx(De,{className:"w-4 h-4"})})]})})]},u.id)})})]})})]}),e.jsxs("table",{className:"w-full border-2 border-black print-border-2 mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-black print-border-2 bg-slate-200 print:bg-transparent",children:[e.jsx("th",{className:"border-r-2 border-black print-border w-1/3 py-2 text-slate-900 print-text-readable",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("th",{className:"py-2 text-slate-900 print-text-readable",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{className:"border-r-2 border-black print-border p-4 text-center align-middle h-64 relative bg-white",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-red-500 opacity-50 print:opacity-100 print:text-black",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("h2",{className:"text-3xl font-bold",children:"‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ö"}),e.jsx(kt,{className:"w-16 h-16 mt-4 print:hidden"})]}),e.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer print:hidden",title:"Upload Image"})]}),e.jsxs("td",{className:"p-4 align-top text-sm bg-white",children:[e.jsxs("div",{className:"mb-2 font-bold underline text-slate-900 print-text-readable",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500 no-print",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-slate-700 print-text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemDamaged,onChange:()=>se("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemDamagedInBox,onChange:()=>se("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemLost,onChange:()=>se("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemMixed,onChange:()=>se("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrongInv,onChange:()=>se("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemLate,onChange:()=>se("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemDuplicate,onChange:()=>se("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrong,onChange:()=>se("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemIncomplete,onChange:()=>se("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemOver,onChange:()=>se("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrongInfo,onChange:()=>se("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemShortExpiry,onChange:()=>se("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemTransportDamage,onChange:()=>se("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemAccident,onChange:()=>se("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemPOExpired,onChange:()=>se("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemNoBarcode,onChange:()=>se("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemNotOrdered,onChange:()=>se("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemOther,onChange:()=>se("problemOther")})," ",e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text",className:"border-b border-dotted border-slate-400 bg-transparent outline-none w-full text-slate-700 print:border-none",value:s.problemOtherText,onChange:u=>n({...s,problemOtherText:u.target.value})})]})]}),e.jsx("div",{className:"font-bold underline mb-1 text-slate-900",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{className:"w-full h-32 border border-slate-200 bg-slate-50 p-2 text-sm resize-none focus:ring-1 focus:ring-blue-500 outline-none text-slate-700 print:border-none",value:s.problemDetail,onChange:u=>n({...s,problemDetail:u.target.value})})]})]})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6 text-sm bg-white print-border-2",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black print-border-2",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"})})}),e.jsxs("tbody",{className:"divide-y divide-black border-b-2 border-black print-border-2",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black w-1/2 print-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionReject,onChange:()=>Ne("actionReject")})," ",e.jsx("span",{className:"font-bold",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"w-20 border-b border-dotted border-black text-center bg-transparent print:border-none outline-none",value:s.actionRejectQty||"",onChange:u=>n({...s,actionRejectQty:parseInt(u.target.value)||0})})]})}),e.jsx("td",{className:"p-2 w-1/2 print-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionRejectSort,onChange:()=>Ne("actionRejectSort")})," ",e.jsx("span",{className:"font-bold",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"w-20 border-b border-dotted border-black text-center bg-transparent print:border-none outline-none",value:s.actionRejectSortQty||"",onChange:u=>n({...s,actionRejectSortQty:parseInt(u.target.value)||0})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black print-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionRework,onChange:()=>Ne("actionRework")})," ",e.jsx("span",{className:"font-bold",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"w-20 border-b border-dotted border-black text-center bg-transparent print:border-none outline-none",value:s.actionReworkQty||"",onChange:u=>n({...s,actionReworkQty:parseInt(u.target.value)||0})})]})}),e.jsx("td",{className:"p-2 print-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsx("input",{type:"text",className:"flex-1 border-b border-dotted border-black bg-transparent print:border-none outline-none",value:s.actionReworkMethod,onChange:u=>n({...s,actionReworkMethod:u.target.value})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black print-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionSpecialAcceptance,onChange:()=>Ne("actionSpecialAcceptance")})," ",e.jsx("span",{className:"font-bold",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"w-20 border-b border-dotted border-black text-center bg-transparent print:border-none outline-none",value:s.actionSpecialAcceptanceQty||"",onChange:u=>n({...s,actionSpecialAcceptanceQty:parseInt(u.target.value)||0})})]})}),e.jsx("td",{className:"p-2 print-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö"}),e.jsx("input",{type:"text",className:"flex-1 border-b border-dotted border-black bg-transparent print:border-none outline-none",value:s.actionSpecialAcceptanceReason,onChange:u=>n({...s,actionSpecialAcceptanceReason:u.target.value})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black print-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionScrap,onChange:()=>Ne("actionScrap")})," ",e.jsx("span",{className:"font-bold",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"w-20 border-b border-dotted border-black text-center bg-transparent print:border-none outline-none",value:s.actionScrapQty||"",onChange:u=>n({...s,actionScrapQty:parseInt(u.target.value)||0})})]})}),e.jsx("td",{className:"p-2 print-border",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionReplace,onChange:()=>Ne("actionReplace")})," ",e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"w-20 border-b border-dotted border-black text-center bg-transparent print:border-none outline-none",value:s.actionReplaceQty||"",onChange:u=>n({...s,actionReplaceQty:parseInt(u.target.value)||0})})]})})]})]}),e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"p-3 bg-white print:bg-transparent",children:e.jsxs("div",{className:"flex justify-between items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",className:"border-b border-dotted border-black bg-transparent print:border-none text-slate-700 outline-none",value:s.dueDate,onChange:u=>n({...s,dueDate:u.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx("input",{type:"text",className:"w-32 border-b border-dotted border-black bg-transparent print:border-none text-slate-700 text-center outline-none",value:s.approver,onChange:u=>n({...s,approver:u.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",className:"w-24 border-b border-dotted border-black bg-transparent print:border-none text-slate-700 text-center outline-none",value:s.approverPosition,onChange:u=>n({...s,approverPosition:u.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"}),e.jsx("input",{type:"date",className:"border-b border-dotted border-black bg-transparent print:border-none text-slate-700 outline-none",value:s.approverDate,onChange:u=>n({...s,approverDate:u.target.value})})]})]})})})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6 text-sm bg-white print-border-2",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black print-border-2",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"w-1/4 border-r-2 border-black align-top p-0 print-border",children:[e.jsx("div",{className:"border-b border-black p-2 font-bold text-center bg-slate-200 print:bg-transparent print-border",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.causePackaging,onChange:u=>n({...s,causePackaging:u.target.checked,causeTransport:!1,causeOperation:!1,causeEnv:!1})})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.causeTransport,onChange:u=>n({...s,causeTransport:u.target.checked,causePackaging:!1,causeOperation:!1,causeEnv:!1})})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.causeOperation,onChange:u=>n({...s,causeOperation:u.target.checked,causePackaging:!1,causeTransport:!1,causeEnv:!1})})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.causeEnv,onChange:u=>n({...s,causeEnv:u.target.checked,causePackaging:!1,causeTransport:!1,causeOperation:!1})})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]})]}),e.jsxs("td",{className:"align-top p-0 print-border",children:[e.jsxs("div",{className:"h-24 border-b border-black p-2 flex flex-col print-border",children:[e.jsx("div",{className:"font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ :"}),e.jsx("textarea",{className:"flex-1 w-full bg-transparent outline-none resize-none text-slate-700",value:s.causeDetail,onChange:u=>n({...s,causeDetail:u.target.value})})]}),e.jsxs("div",{className:"h-24 p-2 flex flex-col",children:[e.jsx("div",{className:"font-bold underline mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô :"}),e.jsx("textarea",{className:"flex-1 w-full bg-transparent outline-none resize-none text-slate-700",value:s.preventionDetail,onChange:u=>n({...s,preventionDetail:u.target.value})})]})]})]}),e.jsx("tr",{className:"border-t-2 border-black print-border-2",children:e.jsx("td",{colSpan:2,className:"p-3 bg-white print:bg-transparent",children:e.jsxs("div",{className:"flex justify-between items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",className:"border-b border-dotted border-black bg-transparent print:border-none text-slate-700 outline-none",value:s.preventionDueDate,onChange:u=>n({...s,preventionDueDate:u.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",className:"w-32 border-b border-dotted border-black bg-transparent print:border-none text-slate-700 text-center outline-none",value:s.responsiblePerson,onChange:u=>n({...s,responsiblePerson:u.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",className:"w-24 border-b border-dotted border-black bg-transparent print:border-none text-slate-700 text-center outline-none",value:s.responsiblePosition,onChange:u=>n({...s,responsiblePosition:u.target.value})})]})]})})})]})]}),e.jsxs("div",{className:"border-2 border-black p-2 mb-6 text-xs bg-white",children:[e.jsx("span",{className:"font-bold",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ :"})," ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≤‡∏á Supplier/Out source ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ö NCR ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏¢‡∏±‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"]}),e.jsx("div",{className:"print-break-avoid",children:e.jsxs("table",{className:"w-full border-2 border-black text-sm bg-white print-border-2",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black print-border-2",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR"})})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"border-b-2 border-black print-border-2",children:e.jsx("td",{colSpan:2,className:"p-4 print-border",children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.qaAccept,onChange:u=>n({...s,qaAccept:u.target.checked,qaReject:!1})})," ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.qaReject,onChange:u=>n({...s,qaReject:u.target.checked,qaAccept:!1})})," ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsx("input",{type:"text",className:"flex-1 border-b border-dotted border-black bg-transparent outline-none text-slate-700 print:border-none",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",value:s.qaReason,onChange:u=>n({...s,qaReason:u.target.value})})]})})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"w-1/2 border-r-2 border-black p-4 text-center align-bottom h-32 print-border",children:[e.jsx("div",{className:"font-bold mb-8",children:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-2 print-border"}),e.jsx("div",{className:"text-slate-500 text-xs",children:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"})]}),e.jsxs("td",{className:"w-1/2 p-4 text-center align-bottom h-32 print-border",children:[e.jsx("div",{className:"font-bold mb-8",children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-2 print-border"}),e.jsx("div",{className:"text-slate-500 text-xs",children:"‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£"})]})]})]})]})}),e.jsx("div",{className:"text-right text-xs mt-4 font-mono text-slate-400",children:"FM-OP01-06 Rev.00"})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm print:hidden animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b sticky top-0 bg-white z-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5 text-blue-600"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Add Item)"]}),e.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 bg-slate-50",value:h.branch,onChange:u=>p({...h,branch:u.target.value}),children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),sa.map(u=>e.jsx("option",{value:u,children:u},u))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:h.productCode,onChange:u=>p({...h,productCode:u.target.value}),placeholder:"Code"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Ref No."}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:h.refNo,onChange:u=>p({...h,refNo:u.target.value}),placeholder:"Reference"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:h.productName,onChange:u=>p({...h,productName:u.target.value}),placeholder:"Product Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:h.customerName,onChange:u=>p({...h,customerName:u.target.value}),placeholder:"Customer Name"})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-xl border border-blue-100 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Qty)"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",className:"w-full p-2 border rounded-l focus:ring-2 focus:ring-blue-500",value:h.quantity,onChange:u=>{const L=parseFloat(u.target.value)||0,q=h.pricePerUnit||0;p({...h,quantity:L,priceBill:L*q})}}),e.jsx("input",{type:"text",className:"w-20 p-2 border border-l-0 rounded-r bg-slate-100 text-center text-sm",placeholder:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",value:h.unit,onChange:u=>p({...h,unit:u.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-blue-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Price/Unit)"}),e.jsx("input",{type:"number",className:"w-full p-2 border border-blue-300 rounded focus:ring-2 focus:ring-blue-500 bg-white",placeholder:"0.00",value:h.pricePerUnit||"",onChange:u=>{const L=parseFloat(u.target.value)||0,q=h.quantity||0;p({...h,pricePerUnit:L,priceBill:q*L})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏• (Total Bill)"}),e.jsx("input",{type:"number",className:"w-full p-2 border bg-slate-100 font-bold text-slate-700 rounded",readOnly:!0,value:h.priceBill})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (Expiry)"}),e.jsx("input",{type:"date",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:h.expiryDate,onChange:u=>p({...h,expiryDate:u.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination)"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:h.destinationCustomer,onChange:u=>p({...h,destinationCustomer:u.target.value}),placeholder:"Optional"})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsx("h4",{className:"font-bold text-slate-900 underline",children:"‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Source)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 border p-2 rounded hover:bg-slate-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sourceCat",checked:l.category==="Customer",onChange:()=>w({...l,category:"Customer",problemScenario:"Customer"})}),"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer)"]}),e.jsxs("label",{className:"flex items-center gap-2 border p-2 rounded hover:bg-slate-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sourceCat",checked:l.category==="DestinationCustomer",onChange:()=>w({...l,category:"DestinationCustomer",problemScenario:"DestinationCustomer"})}),"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination Customer)"]}),e.jsxs("label",{className:"flex items-center gap-2 border p-2 rounded hover:bg-slate-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sourceCat",checked:l.category==="Accounting",onChange:()=>w({...l,category:"Accounting"})}),"‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Accounting)"]}),e.jsxs("label",{className:"flex items-center gap-2 border p-2 rounded hover:bg-slate-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sourceCat",checked:l.category==="Warehouse",onChange:()=>w({...l,category:"Warehouse"})}),"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Warehouse)"]}),e.jsxs("label",{className:"flex items-center gap-2 border p-2 rounded hover:bg-slate-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sourceCat",checked:l.category==="Transport",onChange:()=>w({...l,category:"Transport"})}),"‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)"]}),e.jsxs("label",{className:"flex items-center gap-2 border p-2 rounded hover:bg-slate-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sourceCat",checked:l.category==="Other",onChange:()=>w({...l,category:"Other"})}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]})]}),e.jsxs("div",{className:"p-3 bg-red-50 rounded border border-red-100 flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 font-bold text-red-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.hasCost,onChange:u=>p({...h,hasCost:u.target.checked})}),"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Charge)"]}),h.hasCost&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",className:"p-1 border text-sm w-32 rounded",placeholder:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô",value:h.costAmount||"",onChange:u=>p({...h,costAmount:parseFloat(u.target.value)})}),e.jsx("span",{className:"text-sm text-red-600",children:"‡∏ö‡∏≤‡∏ó"})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t flex justify-end gap-3 sticky bottom-0 bg-slate-50 z-10",children:[e.jsx("button",{onClick:()=>m(!1),className:"px-5 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:()=>we(!0),className:"px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-md transform active:scale-95 transition-all",children:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-96 transform scale-100 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-slate-100 pb-2",children:[e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Qt,{className:"w-5 h-5 text-amber-500"}),"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Authentication)"]}),e.jsx("button",{onClick:()=>f(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password)"}),e.jsx("input",{type:"password",className:"w-full p-2 border border-slate-300 rounded-lg text-lg tracking-widest outline-none focus:ring-2 focus:ring-amber-500",autoFocus:!0,value:Z,onChange:u=>le(u.target.value),onKeyDown:u=>u.key==="Enter"&&me(),placeholder:"Enter password..."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 font-bold",children:" ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:me,className:"px-4 py-2 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-md",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4 backdrop-blur-sm print:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(fl,{className:"w-8 h-8 text-blue-600"})})}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-slate-800",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• NCR ‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:_e,disabled:v,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 shadow-sm disabled:opacity-50 disabled:cursor-wait flex items-center justify-center gap-2",children:[v&&e.jsx(Nl,{className:"w-4 h-4 animate-spin"}),"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"]})]})]})}),O&&D&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4 backdrop-blur-sm print:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${D.success?"bg-green-100":"bg-red-100"}`,children:D.success?e.jsx(Se,{className:"w-8 h-8 text-green-600"}):e.jsx(wt,{className:"w-8 h-8 text-red-600"})})}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-slate-800",children:D.success?"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!":"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"}),e.jsxs("div",{className:"text-sm text-slate-500 mb-6 whitespace-pre-wrap",children:[D.message,D.success&&D.ncrNo&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-100 rounded-lg",children:[e.jsx("div",{className:"text-xs text-blue-500 uppercase font-semibold",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (NCR No.)"}),e.jsx("div",{className:"text-xl font-bold text-blue-700",children:D.ncrNo})]})]}),e.jsxs("div",{className:"flex gap-2",children:[D.success&&e.jsxs("button",{onClick:()=>{window.print()},className:"flex-1 py-2 bg-slate-800 text-white rounded-lg font-bold shadow-sm hover:bg-slate-700 flex items-center justify-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"})," ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"]}),e.jsx("button",{onClick:Q,className:`flex-1 py-2 text-white rounded-lg font-bold shadow-sm ${D.success?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:D.success?"‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á":"‡∏ï‡∏Å‡∏•‡∏á"})]})]})})]})},aa=({item:a,onUpdate:d,onClose:c,onSave:o})=>{var b,j;const t=()=>{window.print()},s=g=>{if(!g)return[];const m=[];return g.problemDamaged&&m.push("‡∏ä‡∏≥‡∏£‡∏∏‡∏î"),g.problemDamagedInBox&&m.push("‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"),g.problemLost&&m.push("‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"),g.problemMixed&&m.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"),g.problemWrongInv&&m.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."),g.problemLate&&m.push("‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"),g.problemDuplicate&&m.push("‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"),g.problemWrong&&m.push("‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"),g.problemIncomplete&&m.push("‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"),g.problemOver&&m.push("‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"),g.problemWrongInfo&&m.push("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"),g.problemShortExpiry&&m.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"),g.problemTransportDamage&&m.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"),g.problemAccident&&m.push("‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"),g.problemPOExpired&&m.push("PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"),g.problemNoBarcode&&m.push("‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"),g.problemNotOrdered&&m.push("‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"),g.problemOther&&m.push(`‡∏≠‡∏∑‡πà‡∏ô‡πÜ: ${g.problemOtherText||"-"}`),m},n=a.item||a;return e.jsxs("div",{className:"fixed inset-0 bg-slate-900/50 flex flex-col items-center justify-start z-[9999] overflow-y-auto no-scrollbar print:static print:bg-white print:overflow-visible print:p-0 print:block",children:[e.jsxs("div",{className:"sticky top-0 w-full bg-white border-b border-slate-200 shadow-sm p-4 flex justify-between items-center z-50 print:hidden shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-5 h-5 text-slate-600"}),e.jsx("h2",{className:"font-bold text-slate-800",children:"Print Preview (A4 Mode)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 font-bold text-sm transition-colors border border-blue-200",children:[e.jsx(Fe,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]}),e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-900 font-bold text-sm transition-colors shadow-sm",children:[e.jsx(Ie,{className:"w-4 h-4"})," ‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsx("button",{onClick:c,className:"p-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"my-8 print:m-0 print:w-full",children:e.jsxs("div",{className:"bg-white shadow-2xl mx-auto print:shadow-none print:mx-0 relative flex flex-col print-content-root",style:{width:"210mm",minHeight:"297mm",padding:"10mm 15mm"},children:[e.jsxs("div",{className:"flex border-2 border-black mb-4",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-2 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-20"})}),e.jsxs("div",{className:"w-[70%] p-2 flex flex-col justify-center pl-4",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 leading-none mb-1",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-xs font-bold text-slate-700 mb-2",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-xs text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-lg font-bold text-center border-2 border-black py-1.5 mb-4 bg-white text-slate-900 print:bg-transparent uppercase tracking-wide",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{type:"text",value:a.toDept||"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",onChange:g=>d({...a,toDept:g.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{type:"text",value:a.date,onChange:g=>d({...a,date:g.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{type:"text",value:a.copyTo||"",onChange:g=>d({...a,copyTo:g.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1 font-bold",children:a.ncrNo})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤:"}),e.jsx("input",{type:"text",value:a.founder||"",onChange:g=>d({...a,founder:g.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:"}),e.jsx("input",{type:"text",value:a.poNo||"",onChange:g=>d({...a,poNo:g.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-sm mb-2 underline decoration-2 decoration-black",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items)"}),e.jsxs("table",{className:"w-full border-collapse border border-black text-sm",children:[e.jsx("thead",{className:"print:table-header-group",children:e.jsxs("tr",{className:"bg-slate-100 print:bg-transparent",children:[e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"border border-black p-2 w-[20%] text-left",children:"Ref / Neo Ref"}),e.jsx("th",{className:"border border-black p-2 w-[25%] text-left",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[10%] text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-right",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"print:break-inside-avoid",children:[e.jsx("td",{className:"border border-black p-2 valign-top text-xs",children:n.branch}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Ref:"})," ",n.refNo||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Neo:"})," ",n.neoRefNo||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold",children:n.productCode}),e.jsx("div",{className:"mb-1",children:n.productName}),e.jsx("div",{className:"text-slate-500 italic",children:n.customerName}),e.jsxs("div",{className:"text-slate-500 text-[10px]",children:["‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: ",n.destinationCustomer||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 text-center valign-top font-bold",children:[n.quantity," ",n.unit]}),e.jsxs("td",{className:"border border-black p-2 text-right valign-top text-xs",children:[e.jsxs("div",{className:"mb-1",children:[(b=n.priceBill)==null?void 0:b.toLocaleString()," ‡∏ö."]}),e.jsxs("div",{className:"text-red-500",children:["Exp: ",n.expiryDate||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold underline",children:n.problemSource}),n.hasCost&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"text-red-600 font-bold",children:["Cost: ",(j=n.costAmount)==null?void 0:j.toLocaleString()," ‡∏ö."]}),e.jsxs("div",{className:"text-[10px]",children:["(",n.costResponsible,")"]})]})]})]})})]})]}),e.jsxs("div",{className:"border border-black flex flex-col flex-1 min-h-0 print:break-inside-avoid",children:[e.jsxs("div",{className:"bg-slate-50 border-b border-black p-2 flex justify-between font-bold text-sm print:bg-transparent",children:[e.jsx("div",{className:"w-1/2 text-center",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("div",{className:"w-1/2 text-center border-l border-black",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})]}),e.jsxs("div",{className:"flex flex-1 min-h-[300px]",children:[e.jsx("div",{className:"w-1/2 p-4 border-r border-black flex flex-col items-center justify-center text-slate-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"[‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö]"}),e.jsx("p",{className:"text-xs mt-2 text-slate-300",children:"‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢"}),e.jsx("p",{className:"text-xs text-slate-300",children:"‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á"})]})}),e.jsxs("div",{className:"w-1/2 p-4 flex flex-col gap-3",children:[e.jsx("div",{className:"text-xs font-bold underline mb-2",children:"‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:s(a).length>0?s(a).map((g,m)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 border border-black bg-black flex items-center justify-center",children:e.jsx("span",{className:"text-white text-[10px] pb-1",children:"‚úì"})}),e.jsx("span",{children:g})]},m)):e.jsx("div",{className:"col-span-2 text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤"})}),e.jsxs("div",{className:"mt-4 flex flex-col flex-1",children:[e.jsx("label",{className:"text-xs font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{value:a.problemDetail,onChange:g=>d({...a,problemDetail:g.target.value}),className:"w-full flex-1 border border-dotted border-black p-2 text-xs resize-none min-h-[100px] outline-none"})]})]})]})]}),e.jsxs("div",{className:"mt-4 border-t-2 border-black pt-4 print:break-inside-avoid page-break-avoid",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 text-sm",children:[e.jsxs("div",{className:"border border-black p-4",children:[e.jsx("h4",{className:"font-bold underline mb-3 text-center",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.actionReject||a.actionRejectSort,readOnly:!0}),e.jsx("span",{children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject) / ‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å (Sort)"}),a.actionRejectSortQty&&e.jsxs("span",{className:"ml-auto underline",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",a.actionRejectSortQty]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.actionScrap,readOnly:!0}),e.jsx("span",{children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),a.actionScrapQty&&e.jsxs("span",{className:"ml-auto underline",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",a.actionScrapQty]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.actionSpecialAcceptance,readOnly:!0}),e.jsx("span",{children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"})]})]})]}),e.jsxs("div",{className:"border border-black p-4",children:[e.jsx("h4",{className:"font-bold underline mb-3 text-center",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ & ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex gap-4 mb-2",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:a.causePackaging,readOnly:!0})," Packaging"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:a.causeTransport,readOnly:!0})," Transport"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:a.causeOperation,readOnly:!0})," Operation"]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("div",{className:"border-b border-dotted border-black min-h-[20px]",children:a.causeDetail||"-"})]}),e.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("div",{className:"border-b border-dotted border-black min-h-[20px]",children:a.preventionDetail||"-"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8 text-xs text-center px-8 pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsxs("div",{className:"font-bold",children:["(",a.founder||"..........................",")"]}),e.jsxs("div",{children:["‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ",a.date]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö / ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsxs("div",{className:"font-bold",children:["(",a.responsiblePerson||"..........................",")"]}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Manager)"}),e.jsxs("div",{className:"font-bold",children:["(",a.approver||"..........................",")"]}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]})]})]})]})}),e.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap');
        
        .print-content-root {
          font-family: 'Sarabun', 'TH Sarabun New', sans-serif;
        }

        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body {
            background: white !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          .print-content-root {
            width: 100%;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:table-header-group {
            display: table-header-group !important;
          }
          .print\\:break-inside-avoid {
             page-break-inside: avoid !important;
             break-inside: avoid !important;
          }
        }
      `})]})},ke=a=>{if(!a)return"-";const d=new Date(a);if(isNaN(d.getTime()))return"-";const c=String(d.getDate()).padStart(2,"0"),o=String(d.getMonth()+1).padStart(2,"0"),t=d.getFullYear();return`${c}/${o}/${t}`},ra=({isOpen:a,onClose:d,report:c,correspondingReturn:o})=>{if(!a||!c)return null;const t=c.item||c,s=(m,h)=>{if(!m||!h)return null;const p=new Date(m),r=new Date(h),I=Math.abs(r.getTime()-p.getTime());return Math.ceil(I/(1e3*60*60*24))},n=[{id:1,label:"‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô (Request)",status:"‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",date:(o==null?void 0:o.dateRequested)||c.date,icon:ie,colorKey:"blue",description:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤/‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:2,label:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (Logistics)",status:"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á",date:o==null?void 0:o.dateInTransit,icon:ne,colorKey:"orange",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö/‡∏Ç‡∏ô‡∏™‡πà‡∏á"},{id:3,label:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (Receive)",status:"‡∏ñ‡∏∂‡∏á Hub",date:o==null?void 0:o.dateReceived,icon:Be,colorKey:"indigo",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô (Hub)"},{id:4,label:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (QC)",status:"‡∏£‡∏≠‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",date:o==null?void 0:o.dateGraded,icon:ms,colorKey:"yellow",description:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏†‡∏≤‡∏û/‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡πÄ‡∏Å‡∏£‡∏î"},{id:5,label:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",status:"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô",date:o==null?void 0:o.dateDocumented,icon:ie,colorKey:"purple",description:"‡∏≠‡∏≠‡∏Å‡πÉ‡∏ö‡∏•‡∏î‡∏´‡∏ô‡∏µ‡πâ/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"},{id:6,label:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",status:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",date:o==null?void 0:o.dateCompleted,icon:ot,colorKey:"green",description:"‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"}],b=c.status==="Canceled",j={blue:{bg:"bg-blue-100",border:"border-blue-500",text:"text-blue-600",badgeBg:"bg-blue-50",badgeText:"text-blue-700"},orange:{bg:"bg-orange-100",border:"border-orange-500",text:"text-orange-600",badgeBg:"bg-orange-50",badgeText:"text-orange-700"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",text:"text-indigo-600",badgeBg:"bg-indigo-50",badgeText:"text-indigo-700"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",text:"text-yellow-600",badgeBg:"bg-yellow-50",badgeText:"text-yellow-700"},purple:{bg:"bg-purple-100",border:"border-purple-500",text:"text-purple-600",badgeBg:"bg-purple-50",badgeText:"text-purple-700"},green:{bg:"bg-green-100",border:"border-green-500",text:"text-green-600",badgeBg:"bg-green-50",badgeText:"text-green-700"},red:{bg:"bg-red-100",border:"border-red-500",text:"text-red-600",badgeBg:"bg-red-50",badgeText:"text-red-700"},gray:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-400",badgeBg:"bg-slate-100",badgeText:"text-slate-500"}},g=n.findIndex(m=>!m.date);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col max-h-[90vh] ${b?"border-4 border-red-500":""}`,children:[e.jsxs("div",{className:`border-b p-6 flex justify-between items-start ${b?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[b?e.jsx(de,{className:"w-8 h-8 text-red-600"}):e.jsx(Qe,{className:"w-6 h-6 text-blue-600"}),"Timeline ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border shadow-sm ${b?"bg-red-100 text-red-700 border-red-200":"bg-blue-100 text-blue-700 border-blue-200"}`,children:b?"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (CANCELED)":`NCR No: ${c.ncrNo||c.id}`})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô (Status Tracking Infographic)"})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto bg-slate-50/30",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-10",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)"}),e.jsx("div",{className:"font-bold text-slate-800 text-sm",children:t.productName}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:t.productCode})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (Customer)"}),e.jsx("div",{className:"font-bold text-slate-800 text-sm",children:t.customerName}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:t.branch})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Issue)"}),e.jsx("div",{className:"font-bold text-red-600 text-sm",children:c.problemDetail}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Source: ",t.problemSource]})]})]}),e.jsxs("div",{className:"relative pt-10 pb-6 px-4",children:[e.jsx("div",{className:"hidden md:block absolute top-[85px] left-10 right-10 h-1.5 bg-slate-200 rounded-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 relative",children:n.map((m,h)=>{let p=j[m.colorKey],r=!!m.date;const I=n[h-1],l=r&&(I!=null&&I.date)?s(I.date,m.date):null;let w=m.label,v=m.status,k=m.icon;return b&&(m.date||(h===g?(p=j.red,r=!0,v="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",k=de):h>g&&(p=j.gray))),e.jsxs("div",{className:"flex flex-col items-center relative z-10 group",children:[l!==null&&e.jsx("div",{className:"hidden md:flex absolute -left-[50%] top-[-30px] w-full justify-center",children:e.jsxs("div",{className:"text-[10px] font-bold text-slate-500 bg-white px-2 py-1 rounded-full border border-slate-200 shadow-sm whitespace-nowrap",children:[l," ‡∏ß‡∏±‡∏ô ",e.jsx("span",{className:"text-slate-300 mx-1",children:"‚Üí"})]})}),e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center border-4 shadow-lg transition-transform duration-300 mb-4 bg-white
                      ${r?`${p.border} ${p.text} scale-110 group-hover:scale-115`:"border-slate-200 text-slate-300"}
                    `,children:e.jsx(k,{className:"w-7 h-7"})}),e.jsxs("div",{className:`w-full bg-white rounded-xl border p-3 shadow-sm text-center min-h-[140px] flex flex-col transition-all duration-300
                      ${r?"border-blue-100 shadow-md transform hover:-translate-y-1":"border-slate-100 opacity-70"}
                    `,children:[e.jsx("div",{className:`font-bold text-sm mb-1 ${r?"text-slate-800":"text-slate-400"}`,children:w}),e.jsx("div",{className:"flex-grow flex items-center justify-center my-2",children:e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold
                          ${r?`${p.badgeBg} ${p.badgeText}`:"bg-slate-100 text-slate-400"}
                        `,children:v})}),e.jsx("div",{className:"border-t border-slate-50 pt-2 mt-auto",children:m.date?e.jsxs("div",{className:"text-xs font-bold text-slate-600 flex items-center justify-center gap-1",children:[e.jsx(Ct,{className:"w-3 h-3"}),ke(m.date)]}):b&&h===g?e.jsxs("div",{className:"text-xs font-bold text-red-500 flex items-center justify-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"}),"CANCELED"]}):e.jsx("div",{className:"text-[10px] text-slate-300 italic",children:"Pending"})})]})]},m.id)})})]}),e.jsxs("div",{className:"mt-8 text-center text-xs text-slate-400 bg-blue-50/50 p-2 rounded-lg border border-blue-50 mx-auto max-w-2xl",children:["üí° ",e.jsx("strong",{children:"Infographic Info:"})," ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Journey) ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô"]})]})]})})},na=({onTransfer:a})=>{const{ncrReports:d,items:c,updateNCRReport:o,deleteNCRReport:t,updateReturnRecord:s,deleteReturnRecord:n}=ge(),[b,j]=N.useState(!1),[g,m]=N.useState(null),[h,p]=N.useState(!1),[r,I]=N.useState(null),[l,w]=N.useState(!1),[v,k]=N.useState(!1),[y,i]=N.useState(""),[O,B]=N.useState(null),[D,F]=N.useState(!1),[Y,R]=N.useState(null);N.useEffect(()=>{h&&setTimeout(()=>{const x=document.getElementById("ncr-modal-overlay");x&&(x.scrollTop=0)},10)},[h]);const[$,X]=N.useState({query:"",action:"All",returnStatus:"All",hasCost:!1,startDate:"",endDate:""}),[ce,H]=N.useState(1),[f,M]=N.useState(20),[U,K]=N.useState(!1),[C,Z]=N.useState(null),le=x=>{Z(x),K(!0)},me=N.useMemo(()=>{const x=new Set;return d.forEach(P=>{P.founder&&x.add(P.founder),P.item&&P.item.founder&&x.add(P.item.founder)}),c.forEach(P=>{P.founder&&x.add(P.founder)}),Array.from(x).sort()},[d,c]),z=N.useMemo(()=>[...d].filter(P=>{var ae,pe,Le,He,We,Xe,$e,Ee;const G=P.item||P,J=c.find(ve=>ve.ncrNumber===P.ncrNo);if($.startDate&&P.date<$.startDate||$.endDate&&P.date>$.endDate)return!1;const oe=$.query.toLowerCase();return!(oe&&!((ae=P.ncrNo)!=null&&ae.toLowerCase().includes(oe))&&!((pe=G.customerName)!=null&&pe.toLowerCase().includes(oe))&&!((Le=G.productName)!=null&&Le.toLowerCase().includes(oe))&&!((He=G.productCode)!=null&&He.toLowerCase().includes(oe))&&!((We=G.branch)!=null&&We.toLowerCase().includes(oe))&&!((Xe=G.destinationCustomer)!=null&&Xe.toLowerCase().includes(oe))&&!(($e=P.problemDetail)!=null&&$e.toLowerCase().includes(oe))&&!((Ee=G.problemSource)!=null&&Ee.toLowerCase().includes(oe))||$.action!=="All"&&($.action==="Reject"&&!P.actionReject&&!P.actionRejectSort||$.action==="Scrap"&&!P.actionScrap)||$.returnStatus!=="All"&&($.returnStatus==="NotReturned"&&J||$.returnStatus!=="NotReturned"&&(!J||J.status!==$.returnStatus))||$.hasCost&&!G.hasCost)}).sort((P,G)=>{const J=P.ncrNo||P.id;return(G.ncrNo||G.id).localeCompare(J)}),[d,c,$]),xe=()=>{const P=`
        <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
        <head>
          <meta http-equiv="content-type" content="text/plain; charset=UTF-8"/>
          <!--[if gte mso 9]>
          <xml>
            <x:ExcelWorkbook>
              <x:ExcelWorksheets>
                <x:ExcelWorksheet>
                  <x:Name>NCR Report</x:Name>
                  <x:WorksheetOptions>
                    <x:DisplayGridlines/>
                  </x:WorksheetOptions>
                </x:ExcelWorksheet>
              </x:ExcelWorksheets>
            </x:ExcelWorkbook>
          </xml>
          <![endif]-->
          <style>
            th { font-weight: bold; background-color: #f0f0f0; border: 1px solid #000; padding: 5px; }
            td { border: 1px solid #000; padding: 5px; vertical-align: top; }
          </style>
        </head>
        <body>
          <table>
            <thead>
              <tr>
                ${["NCR No","Date","Status","Product Code","Product Name","Customer","From Branch","To Destination","Quantity","Unit","Problem Detail","Problem Source","Has Cost","Cost Amount","Cost Responsible","Action","Return Status"].map(ae=>`<th>${ae}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${z.map(ae=>{const pe=ae.item||ae,Le=c.find(We=>We.ncrNumber===ae.ncrNo),He=ae.actionReject||ae.actionRejectSort?"Reject":ae.actionScrap?"Scrap":"N/A";return`<tr>
                  <td>${ae.ncrNo||""}</td>
                  <td>${ke(ae.date)}</td>
                  <td>${ae.status||""}</td>
                  <td style="mso-number-format:'@'">${pe.productCode||""}</td>
                  <td>${pe.productName||""}</td>
                  <td>${pe.customerName||""}</td>
                  <td>${pe.branch||""}</td>
                  <td>${pe.destinationCustomer||""}</td>
                  <td style="text-align:center;">${pe.quantity||0}</td>
                  <td style="text-align:center;">${pe.unit||""}</td>
                  <td>${ae.problemDetail||""}</td>
                  <td>${pe.problemSource||""}</td>
                  <td style="text-align:center;">${pe.hasCost?"Yes":"No"}</td>
                  <td style="text-align:right;">${pe.costAmount||0}</td>
                  <td>${pe.costResponsible||""}</td>
                  <td>${He}</td>
                  <td>${(Le==null?void 0:Le.status)||"Not Returned"}</td>
                </tr>`}).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,G=new Blob([P],{type:"application/vnd.ms-excel;charset=utf-8"}),J=URL.createObjectURL(G),oe=document.createElement("a");oe.setAttribute("href",J),oe.setAttribute("download",`ncr_report_${new Date().toISOString().split("T")[0]}.xls`),document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},we=x=>{const P=x.ncrNo,G=d.filter(ae=>ae.ncrNo===P);if(G.length===0){alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö NCR ‡∏ô‡∏µ‡πâ");return}const J=G.map(ae=>ae.item||ae);js(x,J,P)},fe=Math.ceil(z.length/f),se=N.useMemo(()=>{const x=(ce-1)*f;return z.slice(x,x+f)},[z,ce,f]);N.useEffect(()=>{H(1)},[$,f]);const Ne=x=>{I(x),w(!1),p(!0)},Oe=x=>{B(x),i(""),k(!0)},Ae=()=>{y==="1234"?(I(O),w(!0),p(!0),k(!1)):alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")},Re=x=>{R(x),i(""),F(!0)},_e=async()=>{y==="1234"&&Y?(await t(Y),F(!1),R(null)):alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")},Q=(x,P)=>{r&&I({...r,[x]:P})},u=(x,P)=>{r&&I({...r,item:{...r.item||{},[x]:P}})},L=x=>{r&&I(P=>P?{...P,[x]:!P[x]}:null)},q=x=>{r&&I(P=>P?{...P,[x]:!P[x]}:null)},je=async()=>{r&&confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")&&(await o(r.id,r),p(!1),w(!1))},Pe=x=>{m(x),j(!0)},Te=x=>{const P=x.item||x,G={documentNo:x.ncrNo,documentType:"NCR",status:"Requested",date:new Date().toISOString().split("T")[0],productCode:P.productCode,productName:P.productName,quantity:P.quantity,unit:P.unit,customerName:P.customerName,branch:P.branch,ncrNumber:x.ncrNo,reason:x.problemDetail,notes:P.problemSource,founder:x.founder||P.founder,destinationCustomer:P.destinationCustomer,actionReject:x.actionReject,actionScrap:x.actionScrap,actionRejectSort:x.actionRejectSort};a(G)};return e.jsxs("div",{className:"h-full flex flex-col gap-4 p-4 font-inter text-slate-800 bg-slate-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm print:hidden",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-700 to-indigo-600 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(ie,{className:"w-6 h-6 text-blue-600"}),"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR (NCR Report)"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Non-Conformance Report)"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(qe,{className:"absolute left-2 top-1.5 w-4 h-4 text-slate-400 group-hover:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (NCR No, ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)...",value:$.query,onChange:x=>X({...$,query:x.target.value}),className:"pl-8 pr-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full md:w-64 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 border border-slate-200 rounded-lg p-0.5",children:[e.jsx("input",{type:"date",value:$.startDate,onChange:x=>X({...$,startDate:x.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer",title:"Start Date"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:$.endDate,onChange:x=>X({...$,endDate:x.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer",title:"End Date"})]}),e.jsxs("select",{value:$.action,onChange:x=>X({...$,action:x.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsx("option",{value:"Reject",children:"Reject"}),e.jsx("option",{value:"Scrap",children:"Scrap"})]}),e.jsxs("select",{value:$.returnStatus,onChange:x=>X({...$,returnStatus:x.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏∑‡∏ô"}),e.jsx("option",{value:"NotReturned",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô"}),e.jsx("option",{value:"Requested",children:"‡∏£‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"}),e.jsx("option",{value:"PickupScheduled",children:"‡∏£‡∏≠‡∏£‡∏ñ‡∏£‡∏±‡∏ö (Job Assigned)"}),e.jsx("option",{value:"PickedUp",children:"‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß (Picked Up)"}),e.jsx("option",{value:"InTransitHub",children:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx("option",{value:"ReceivedAtHub",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Hub (‡∏£‡∏≠ QC)"}),e.jsx("option",{value:"QCPassed",children:"‡∏ú‡πà‡∏≤‡∏ô QC (‡∏£‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)"}),e.jsx("option",{value:"ReturnToSupplier",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô/‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx("option",{value:"Completed",children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs text-slate-600 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:$.hasCost,onChange:x=>X({...$,hasCost:x.target.checked})}),"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"]}),e.jsxs("div",{className:"flex gap-1 ml-auto",children:[e.jsxs("button",{onClick:xe,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap",children:[e.jsx(Je,{className:"w-3 h-3"}),"Excel"]}),e.jsx("button",{onClick:()=>X({query:"",action:"All",returnStatus:"All",hasCost:!1,startDate:"",endDate:"",docType:"All"}),className:"px-2 py-1 text-slate-600 hover:bg-slate-100 font-medium rounded-lg border border-slate-200",title:"‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Clear)",children:e.jsx(Ye,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col print:hidden",children:[e.jsx("div",{className:"overflow-auto flex-1 relative",style:{maxHeight:"calc(100vh - 300px)"},children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{className:"whitespace-nowrap",children:[e.jsx("th",{className:"px-1 py-1 bg-slate-50 sticky left-0 z-10 border-r w-6 text-center text-[10px]",children:"#"}),e.jsx("th",{className:"px-1 py-1 bg-slate-50 sticky left-6 z-10 border-r w-[80px] text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà / ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà"}),e.jsx("th",{className:"px-1 py-1 max-w-[150px] text-[10px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[80px] text-[10px]",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö"}),e.jsx("th",{className:"px-1 py-1 max-w-[100px] text-[10px]",children:"F/T"}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Source)"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Cost"}),e.jsx("th",{className:"px-1 py-1 text-center w-[60px] text-[10px]",children:"Act"}),e.jsx("th",{className:"px-1 py-1 text-center w-[60px] text-[10px]",children:"Sts"}),e.jsx("th",{className:"px-1 py-1 text-center bg-slate-50 sticky right-0 z-10 border-l w-[100px] text-[10px]"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:se.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"p-8 text-center text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ"})}):se.map(x=>{var oe;const P=x.item||x;P.productName||(P.productName="Unknown Product");const G=c.find(ae=>ae.ncrNumber===x.ncrNo),J=x.status==="Canceled";return e.jsx(te.Fragment,{children:e.jsxs("tr",{className:`hover:bg-slate-50 ${J?"line-through text-slate-400 bg-slate-50":""}`,children:[e.jsx("td",{className:`px-0.5 py-1 sticky left-0 border-r text-center ${J?"bg-slate-100":"bg-white hover:bg-slate-50"}`,children:e.jsx("button",{onClick:()=>le(x),className:"p-0.5 rounded-full hover:bg-blue-100 text-blue-400 hover:text-blue-600 transition-colors",title:"‡∏î‡∏π Timeline (View Infographic)",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-full p-0.5",children:e.jsx(qe,{className:"w-3 h-3"})})})}),e.jsxs("td",{className:`px-1 py-1 sticky left-6 border-r w-[80px] ${J?"bg-slate-100":"bg-white hover:bg-slate-50"}`,children:[e.jsx("div",{className:"flex gap-1 mb-0.5",children:e.jsx("span",{className:"px-1 rounded text-[8px] font-bold bg-purple-100 text-purple-600 border border-purple-200",children:"NCR"})}),e.jsx("button",{onClick:()=>Ne(x),disabled:J,className:"font-bold text-blue-600 hover:text-blue-800 hover:underline text-left block truncate w-full disabled:text-slate-400 disabled:no-underline disabled:cursor-not-allowed text-[10px]",title:"‡∏î‡∏π‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (View NCR Form)",children:x.ncrNo||x.id}),e.jsx("div",{className:"text-[9px] text-slate-500",children:ke(x.date)}),e.jsx("div",{className:"mt-0.5",children:J?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-slate-500 font-bold bg-slate-200 px-1 py-0 rounded border border-slate-300",children:[e.jsx(wt,{className:"w-2 h-2"})," ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"]}):x.status==="Closed"?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-green-600 font-bold bg-green-50 px-1 py-0 rounded border border-green-100",children:[e.jsx(ot,{className:"w-2 h-2"})," Closed"]}):e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-amber-500 font-bold bg-amber-50 px-1 py-0 rounded border border-amber-100",children:[e.jsx(Ct,{className:"w-2 h-2"})," ",x.status==="Open"?G?G.status:"Open":x.status]})})]}),e.jsxs("td",{className:"px-1 py-1 max-w-[150px]",children:[e.jsxs("div",{className:`font-bold flex items-center gap-1 text-[10px] ${J?"":"text-blue-600"}`,children:[e.jsx(Ge,{className:"w-2.5 h-2.5 flex-shrink-0"})," ",e.jsx("span",{className:"truncate",children:P.productCode})]}),e.jsx("div",{className:`text-[10px] truncate ${J?"":"text-slate-700"}`,title:P.productName,children:P.productName}),e.jsxs("div",{className:"text-[9px] text-slate-500 truncate",children:["Qty: ",P.quantity," ",P.unit]})]}),e.jsx("td",{className:"px-1 py-1 max-w-[120px]",children:e.jsx("div",{className:`flex items-start gap-1 font-medium text-[10px] ${J?"":"text-slate-700"}`,children:e.jsx("span",{className:"line-clamp-2 leading-tight",title:P.customerName,children:P.customerName||"-"})})}),e.jsx("td",{className:"px-1 py-1 max-w-[80px]",children:e.jsx("div",{className:"text-[10px] text-slate-600 truncate",title:P.founder||x.founder||(G==null?void 0:G.founder),children:P.founder||x.founder||(G==null?void 0:G.founder)||"-"})}),e.jsx("td",{className:"px-1 py-1 max-w-[100px]",children:e.jsxs("div",{className:"flex flex-col text-[9px] leading-tight text-slate-600",children:[e.jsxs("div",{className:"truncate",title:`From: ${P.branch}`,children:[e.jsx("span",{className:"font-bold",children:"F:"})," ",P.branch]}),e.jsxs("div",{className:"truncate",title:`To: ${P.destinationCustomer}`,children:[e.jsx("span",{className:"font-bold",children:"T:"})," ",P.destinationCustomer||"-"]})]})}),e.jsxs("td",{className:"px-1 py-1 max-w-[120px]",children:[e.jsx("div",{className:`text-[10px] font-bold leading-tight ${J?"":"text-slate-700"} mb-0.5 line-clamp-1 truncate`,title:x.problemDetail,children:x.problemDetail}),e.jsx("div",{className:`text-[8px] p-0.5 px-1 rounded border inline-block max-w-full truncate ${J?"bg-slate-100":"bg-slate-100 border-slate-200"}`,children:P.problemSource})]}),e.jsx("td",{className:"px-1 py-1 text-right w-[60px]",children:P.hasCost?e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("span",{className:`font-bold flex items-center gap-0.5 text-[10px] ${J?"":"text-red-600"}`,children:[e.jsx(Me,{className:"w-2.5 h-2.5"})," ",(oe=P.costAmount)==null?void 0:oe.toLocaleString()]})}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:"px-1 py-1 text-center w-[60px]",children:x.actionReject||x.actionRejectSort?e.jsx("span",{className:`inline-block px-1 py-0 rounded text-[9px] font-bold border ${J?"bg-slate-200":"bg-red-100 text-red-700 border-red-200"}`,children:"Reject"}):x.actionScrap?e.jsx("span",{className:`inline-block px-1 py-0 rounded text-[9px] font-bold border ${J?"bg-slate-200":"bg-orange-100 text-orange-700 border-orange-200"}`,children:"Scrap"}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:"px-1 py-1 text-center w-[60px]",children:G?e.jsx("span",{className:`inline-block px-1 py-0 rounded text-[9px] font-bold border ${G.status==="Received"?"bg-blue-100 text-blue-700 border-blue-200":G.status==="Graded"?"bg-indigo-100 text-indigo-700 border-indigo-200":G.status==="Completed"?"bg-green-100 text-green-700 border-green-200":"bg-yellow-100 text-yellow-700 border-yellow-200"}`,children:G.status}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:`px-1 py-1 text-center sticky right-0 border-l w-[100px] ${J?"bg-slate-100":"bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>Pe(x),disabled:J,className:"p-0.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Print Return Note)",children:e.jsx(Ie,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Oe(x),disabled:J,className:"p-0.5 text-amber-500 hover:text-amber-700 hover:bg-amber-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Edit)",children:e.jsx(yt,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Re(x.id),disabled:J,className:"p-0.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",children:e.jsx(De,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>we(x),disabled:J,className:"p-0.5 text-green-600 hover:text-green-800 hover:bg-green-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Export Form to Excel",children:e.jsx(Je,{className:"w-3 h-3"})}),J?e.jsx("span",{className:"inline-flex items-center gap-0.5 bg-slate-200 text-slate-500 px-1 py-0.5 rounded text-[8px] font-bold border border-slate-300",children:e.jsx(wt,{className:"w-2.5 h-2.5"})}):G?e.jsx("span",{className:"inline-flex items-center gap-0.5 bg-green-100 text-green-700 px-1 py-0.5 rounded text-[8px] font-bold border border-green-200",title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß",children:e.jsx(ot,{className:"w-2.5 h-2.5"})}):(x.actionReject||x.actionScrap||x.actionRejectSort)&&e.jsxs("button",{onClick:()=>Te(x),className:"inline-flex items-center gap-0.5 bg-orange-500 hover:bg-orange-600 text-white px-1 py-0 rounded shadow-sm transition-all transform hover:scale-105 text-[8px] font-bold",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",children:["‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx(ps,{className:"w-2.5 h-2.5"})]})]})})]},x.id)},x.id)})})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:f,onChange:x=>M(Number(x.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",z.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(x=>Math.max(x-1,1)),disabled:ce===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",ce]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",fe||1]})]}),e.jsx("button",{onClick:()=>H(x=>Math.min(x+1,fe)),disabled:ce===fe||fe===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]}),b&&g&&e.jsx(aa,{item:g,onUpdate:m,onClose:()=>j(!1),onSave:async()=>{confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")&&(await o(g.id,g),alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"))}}),h&&r&&e.jsx("div",{id:"ncr-modal-overlay",className:"fixed inset-0 bg-black/50 flex items-start justify-center p-4 pt-10 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl my-8",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 sticky top-0 rounded-t-lg z-10",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-lg",children:[l?e.jsx(yt,{className:"w-5 h-5 text-amber-500"}):e.jsx(jl,{className:"w-5 h-5 text-blue-500"}),l?"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• NCR":"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î NCR"]}),e.jsx("button",{onClick:()=>p(!1),className:"text-slate-500 hover:text-slate-700",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"bg-white shadow-xl border border-slate-200 relative p-8 min-w-[800px]",children:[e.jsxs("div",{className:"flex border-2 border-black mb-6",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-4 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-24"})}),e.jsxs("div",{className:"w-[70%] p-4 flex flex-col justify-center pl-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 leading-none mb-2",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-sm text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{className:"text-slate-400",children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-xl font-bold text-center border-2 border-black py-2 mb-6 bg-white text-slate-900",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:r.toDept||"",onChange:x=>Q("toDept",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{type:"date",disabled:!l,className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:r.date,onChange:x=>Q("date",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:r.copyTo||"",onChange:x=>Q("copyTo",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"font-bold w-24 text-slate-800",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex-1 border-b border-dotted border-slate-400 bg-slate-100 outline-none px-2 py-1 font-mono text-slate-500 font-bold rounded-sm text-center",children:r.ncrNo})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"font-bold w-24 text-slate-800",children:["‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ns,{disabled:!l,className:"w-full border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:r.founder||"",onChange:x=>Q("founder",x),options:me})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-32 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï:"}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:r.poNo||"",onChange:x=>Q("poNo",x.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("h3",{className:"font-bold text-slate-900 underline",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items) ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),e.jsx("div",{className:"border-2 border-black bg-white",children:e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-slate-100 border-b border-black font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-2 border-r border-black",children:"Ref/Neo Ref"}),e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-2 border-r border-black text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-2 border-r border-black text-right",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})]})}),e.jsx("tbody",{className:"divide-y divide-black",children:e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black align-top",children:e.jsx("input",{type:"text",disabled:!l,className:"w-full bg-transparent border-b border-dotted border-slate-300",value:(r.item||r).branch||"",onChange:x=>u("branch",x.target.value)})}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Ref:"}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 bg-transparent border-b border-dotted border-slate-300 w-20",value:(r.item||r).refNo||"",onChange:x=>u("refNo",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-slate-500",children:[e.jsx("span",{children:"Neo:"}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 bg-transparent border-b border-dotted border-slate-300 w-20",value:(r.item||r).neoRefNo||"",onChange:x=>u("neoRefNo",x.target.value)})]})]}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsx("input",{type:"text",disabled:!l,className:"w-full font-bold bg-transparent border-b border-dotted border-slate-300 mb-1",value:(r.item||r).productCode||"",onChange:x=>u("productCode",x.target.value)}),e.jsx("input",{type:"text",disabled:!l,className:"w-full text-slate-600 font-medium bg-transparent border-b border-dotted border-slate-300 mb-1",value:(r.item||r).productName||"",onChange:x=>u("productName",x.target.value)}),e.jsx("input",{type:"text",disabled:!l,className:"w-full text-slate-500 bg-transparent border-b border-dotted border-slate-300",value:(r.item||r).customerName||"",onChange:x=>u("customerName",x.target.value)}),e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-blue-600",children:[e.jsx("span",{children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 bg-transparent border-b border-dotted border-blue-200",value:(r.item||r).destinationCustomer||"",onChange:x=>u("destinationCustomer",x.target.value)})]})]}),e.jsx("td",{className:"p-2 border-r border-black text-center align-top",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("input",{type:"number",disabled:!l,className:"w-12 text-center bg-transparent border-b border-dotted border-slate-300",value:(r.item||r).quantity||0,onChange:x=>u("quantity",Number(x.target.value))}),e.jsx("input",{type:"text",disabled:!l,className:"w-8 text-center bg-transparent border-b border-dotted border-slate-300",value:(r.item||r).unit||"",onChange:x=>u("unit",x.target.value)})]})}),e.jsxs("td",{className:"p-2 border-r border-black text-right align-top",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",step:"0.01",disabled:!l,className:"w-20 text-right bg-transparent border-b border-dotted border-slate-300",value:(r.item||r).priceBill||0,onChange:x=>u("priceBill",Number(x.target.value)),onBlur:x=>u("priceBill",parseFloat(parseFloat(x.target.value).toFixed(2)))})," ‡∏ö."]}),e.jsxs("div",{className:"text-red-500 mt-1 flex items-center justify-end gap-1",children:[e.jsx("span",{children:"Exp:"}),e.jsx("input",{type:"date",disabled:!l,className:"w-24 bg-transparent border-none text-right text-xs",value:(r.item||r).expiryDate||"",onChange:x=>u("expiryDate",x.target.value)})]})]}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsx("textarea",{disabled:!l,className:"w-full h-12 text-xs resize-none bg-transparent border-b border-dotted border-slate-300",value:(r.item||r).problemSource||"",onChange:x=>u("problemSource",x.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"flex items-center gap-1 text-red-600 font-bold cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:(r.item||r).hasCost,onChange:x=>u("hasCost",x.target.checked)})," Has Cost"]}),(r.item||r).hasCost&&e.jsxs("div",{className:"pl-4 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"Cost:"}),e.jsx("input",{type:"number",step:"0.01",disabled:!l,className:"w-20 bg-transparent border-b border-dotted border-red-300 text-red-600 font-bold",value:(r.item||r).costAmount||0,onChange:x=>u("costAmount",Number(x.target.value)),onBlur:x=>u("costAmount",parseFloat(parseFloat(x.target.value).toFixed(2)))})," ‡∏ö."]}),e.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[e.jsx("span",{className:"text-xs",children:"‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:"}),e.jsx("input",{type:"text",disabled:!l,className:"w-20 bg-transparent border-b border-dotted border-slate-300 text-xs",value:(r.item||r).costResponsible||"",onChange:x=>u("costResponsible",x.target.value)})]})]})]})]})]})})]})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-black bg-slate-50",children:[e.jsx("th",{className:"border-r-2 border-black w-1/3 py-2 text-slate-900",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("th",{className:"py-2 text-slate-900",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border-r-2 border-black p-4 text-center align-middle h-64 relative bg-white",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-red-500 opacity-50",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("h2",{className:"text-3xl font-bold",children:"‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ö"}),e.jsx(kt,{className:"w-16 h-16 mt-4"})]})}),e.jsxs("td",{className:"p-4 align-top text-sm bg-white",children:[e.jsxs("div",{className:"mb-2 font-bold underline text-slate-900",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-slate-700",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemDamaged,onChange:()=>L("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemDamagedInBox,onChange:()=>L("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemLost,onChange:()=>L("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemMixed,onChange:()=>L("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemWrongInv,onChange:()=>L("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemLate,onChange:()=>L("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemDuplicate,onChange:()=>L("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemWrong,onChange:()=>L("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemIncomplete,onChange:()=>L("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemOver,onChange:()=>L("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemWrongInfo,onChange:()=>L("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemShortExpiry,onChange:()=>L("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemTransportDamage,onChange:()=>L("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemAccident,onChange:()=>L("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemPOExpired,onChange:()=>L("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemNoBarcode,onChange:()=>L("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemNotOrdered,onChange:()=>L("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.problemOther,onChange:()=>L("problemOther")})," ",e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text",disabled:!l,className:"border-b border-dotted border-slate-400 bg-transparent outline-none w-full text-slate-700",value:r.problemOtherText||"",onChange:x=>Q("problemOtherText",x.target.value)})]})]}),e.jsx("div",{className:"font-bold underline mb-1 text-slate-900",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{disabled:!l,className:"w-full h-32 border border-slate-200 bg-slate-50 p-2 text-sm resize-none focus:ring-1 focus:ring-blue-500 outline-none text-slate-700",value:r.problemDetail,onChange:x=>Q("problemDetail",x.target.value)})]})]})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6 text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"})})}),e.jsxs("tbody",{className:"divide-y divide-black border-b-2 border-black",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black w-1/2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.actionReject,onChange:x=>Q("actionReject",x.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!l,className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:r.actionRejectQty||"",onChange:x=>Q("actionRejectQty",parseInt(x.target.value)||0)})]})}),e.jsx("td",{className:"p-2 w-1/2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.actionRejectSort,onChange:x=>Q("actionRejectSort",x.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!l,className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:r.actionRejectSortQty||"",onChange:x=>Q("actionRejectSortQty",parseInt(x.target.value)||0)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.actionRework,onChange:x=>Q("actionRework",x.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!l,className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:r.actionReworkQty||"",onChange:x=>Q("actionReworkQty",parseInt(x.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 border-b border-dotted border-black bg-transparent outline-none",value:r.actionReworkMethod||"",onChange:x=>Q("actionReworkMethod",x.target.value)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.actionSpecialAcceptance,onChange:x=>Q("actionSpecialAcceptance",x.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!l,className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:r.actionSpecialAcceptanceQty||"",onChange:x=>Q("actionSpecialAcceptanceQty",parseInt(x.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö"}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 border-b border-dotted border-black bg-transparent outline-none",value:r.actionSpecialAcceptanceReason||"",onChange:x=>Q("actionSpecialAcceptanceReason",x.target.value)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.actionScrap,onChange:x=>Q("actionScrap",x.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!l,className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:r.actionScrapQty||"",onChange:x=>Q("actionScrapQty",parseInt(x.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.actionReplace,onChange:x=>Q("actionReplace",x.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!l,className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:r.actionReplaceQty||"",onChange:x=>Q("actionReplaceQty",parseInt(x.target.value)||0)})]})})]})]}),e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"p-3 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",disabled:!l,className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:r.dueDate||"",onChange:x=>Q("dueDate",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx("input",{type:"text",disabled:!l,className:"w-32 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:r.approver||"",onChange:x=>Q("approver",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",disabled:!l,className:"w-24 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:r.approverPosition||"",onChange:x=>Q("approverPosition",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"}),e.jsx("input",{type:"date",disabled:!l,className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:r.approverDate||"",onChange:x=>Q("approverDate",x.target.value)})]})]})})})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6 text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"w-1/4 border-r-2 border-black align-top p-0",children:[e.jsx("div",{className:"border-b border-black p-2 font-bold text-center bg-slate-50",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.causePackaging,onChange:()=>q("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.causeTransport,onChange:()=>q("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.causeOperation,onChange:()=>q("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.causeEnv,onChange:()=>q("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]})]}),e.jsxs("td",{className:"align-top p-0",children:[e.jsxs("div",{className:"h-24 border-b border-black p-2 flex flex-col",children:[e.jsx("div",{className:"font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ :"}),e.jsx("textarea",{disabled:!l,className:"flex-1 w-full bg-transparent outline-none resize-none text-slate-700",value:r.causeDetail||"",onChange:x=>Q("causeDetail",x.target.value)})]}),e.jsxs("div",{className:"h-24 p-2 flex flex-col",children:[e.jsx("div",{className:"font-bold underline mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô :"}),e.jsx("textarea",{disabled:!l,className:"flex-1 w-full bg-transparent outline-none resize-none text-slate-700",value:r.preventionDetail||"",onChange:x=>Q("preventionDetail",x.target.value)})]})]})]}),e.jsx("tr",{className:"border-t-2 border-black",children:e.jsx("td",{colSpan:2,className:"p-3 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",disabled:!l,className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:r.preventionDueDate||"",onChange:x=>Q("preventionDueDate",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",disabled:!l,className:"w-32 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:r.responsiblePerson||"",onChange:x=>Q("responsiblePerson",x.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",disabled:!l,className:"w-24 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:r.responsiblePosition||"",onChange:x=>Q("responsiblePosition",x.target.value)})]})]})})})]})]}),e.jsxs("div",{className:"border-2 border-black p-2 mb-6 text-xs bg-white",children:[e.jsx("span",{className:"font-bold",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ :"})," ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≤‡∏á Supplier/Out source ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ö NCR ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏¢‡∏±‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"]}),e.jsxs("table",{className:"w-full border-2 border-black text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR"})})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"border-b-2 border-black",children:e.jsx("td",{colSpan:2,className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.qaAccept,onChange:x=>Q("qaAccept",x.target.checked)})," ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!l,checked:r.qaReject,onChange:x=>Q("qaReject",x.target.checked)})," ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsx("input",{type:"text",disabled:!l,className:"flex-1 border-b border-dotted border-black bg-transparent outline-none text-slate-700",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",value:r.qaReason||"",onChange:x=>Q("qaReason",x.target.value)})]})})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"w-1/2 border-r-2 border-black p-4 text-center align-bottom h-32",children:[e.jsx("div",{className:"font-bold mb-8",children:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-slate-500 text-xs",children:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"})]}),e.jsxs("td",{className:"w-1/2 p-4 text-center align-bottom h-32",children:[e.jsx("div",{className:"font-bold mb-8",children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-slate-500 text-xs",children:"‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£"})]})]})]})]}),e.jsx("div",{className:"text-right text-xs mt-4 font-mono text-slate-400",children:"FM-OP01-06 Rev.00"})]})}),e.jsxs("div",{className:"p-4 border-t bg-slate-50 flex justify-end gap-2 sticky bottom-0 rounded-b-lg",children:[e.jsxs("button",{onClick:()=>r&&we(r),className:"px-4 py-2 text-green-600 hover:bg-green-50 border border-green-200 rounded font-bold flex items-center gap-2 mr-auto",children:[e.jsx(Je,{className:"w-4 h-4"})," Export Excel"]}),e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"‡∏õ‡∏¥‡∏î"}),l&&e.jsxs("button",{onClick:je,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 font-bold shadow-sm",children:[e.jsx(Fe,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]})]})]})}),e.jsx(ra,{isOpen:U,onClose:()=>K(!1),report:C,correspondingReturn:c.find(x=>x.ncrNumber===(C==null?void 0:C.ncrNo))}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center",children:[e.jsx(Qt,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• NCR"}),e.jsx("input",{type:"password",value:y,onChange:x=>i(x.target.value),placeholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (1234)",className:"w-full border rounded p-2 text-center text-lg tracking-widest mb-4",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:Ae,className:"px-6 py-2 bg-amber-500 text-white rounded font-bold hover:bg-amber-600",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center",children:[e.jsx(De,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-red-600",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å NCR"}),e.jsxs("p",{className:"text-slate-500 text-sm mb-4",children:["‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ",e.jsx("br",{}),"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"]}),e.jsx("input",{type:"password",value:y,onChange:x=>i(x.target.value),placeholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (1234)",className:"w-full border rounded p-2 text-center text-lg tracking-widest mb-4 border-red-200 focus:ring-red-500",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:_e,className:"px-6 py-2 bg-red-600 text-white rounded font-bold hover:bg-red-700",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö"})]})]})})]})},oa=({isOpen:a,onClose:d,item:c})=>{if(!a||!c)return null;const t=(b=>{switch(b){case"Requested":return 0;case"COL_JobAccepted":return 1;case"COL_BranchReceived":return 2;case"COL_Consolidated":return 3;case"COL_InTransit":return 4;case"COL_HubReceived":return 5;case"COL_Documented":return 6;case"Completed":return 7;default:return 0}})(c.status),s=[{id:1,label:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Request)",status:c.status==="Requested"?"‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô":"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",date:c.date,icon:ie,colorKey:"blue",description:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö"},{id:2,label:"‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job Accept)",status:c.status==="COL_JobAccepted"?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£":t>1?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á",date:t>=1?c.date:void 0,icon:ne,colorKey:"orange",description:"‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô/‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:3,label:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Rx)",status:c.status==="COL_BranchReceived"?"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏≤‡∏Ç‡∏≤":t>2?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á",date:t>=2?c.date:void 0,icon:ns,colorKey:"indigo",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á/‡∏û‡∏±‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:4,label:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consol)",status:c.status==="COL_Consolidated"?"‡∏£‡∏≠‡∏Ç‡∏ô‡∏™‡πà‡∏á":t>3?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á",date:t>=3?c.date:void 0,icon:Ut,colorKey:"yellow",description:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Hub"},{id:5,label:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (In Transit)",status:c.status==="COL_InTransit"?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á":t>4?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á",date:t>=4?c.date:void 0,icon:ne,colorKey:"purple",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏õ Hub"},{id:6,label:"‡∏ñ‡∏∂‡∏á Hub (Received)",status:c.status==="COL_HubReceived"?"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Hub":t>5?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á",date:t>=5?c.date:void 0,icon:Be,colorKey:"green",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:7,label:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",status:c.status==="COL_Documented"?"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô":t>6?"‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö":"‡∏£‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á",date:t>=6?c.date:void 0,icon:ie,colorKey:"blue",description:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏Ñ‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"},{id:8,label:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",status:c.status==="Completed"?"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à":"‡∏£‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á",date:t>=7?c.date:void 0,icon:ot,colorKey:"green",description:"‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå"}],n={blue:{bg:"bg-blue-100",border:"border-blue-500",text:"text-blue-600",badgeBg:"bg-blue-50",badgeText:"text-blue-700"},orange:{bg:"bg-orange-100",border:"border-orange-500",text:"text-orange-600",badgeBg:"bg-orange-50",badgeText:"text-orange-700"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",text:"text-indigo-600",badgeBg:"bg-indigo-50",badgeText:"text-indigo-700"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",text:"text-yellow-600",badgeBg:"bg-yellow-50",badgeText:"text-yellow-700"},purple:{bg:"bg-purple-100",border:"border-purple-500",text:"text-purple-600",badgeBg:"bg-purple-50",badgeText:"text-purple-700"},green:{bg:"bg-green-100",border:"border-green-500",text:"text-green-600",badgeBg:"bg-green-50",badgeText:"text-green-700"},red:{bg:"bg-red-100",border:"border-red-500",text:"text-red-600",badgeBg:"bg-red-50",badgeText:"text-red-700"},gray:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-400",badgeBg:"bg-slate-100",badgeText:"text-slate-500"}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col max-h-[90vh] ",children:[e.jsxs("div",{className:"border-b p-6 flex justify-between items-start bg-slate-50 border-slate-100",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-6 h-6 text-blue-600"}),"Timeline ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Journey)"]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold border shadow-sm bg-blue-100 text-blue-700 border-blue-200",children:`Doc No: ${c.documentNo||c.id}`})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Status Tracking Infographic)"})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto bg-slate-50/30",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-10",children:[e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3"})," ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Documents)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Invoice:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:c.invoiceNo||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"R No:"}),e.jsx("span",{className:"font-bold text-blue-600 text-sm font-mono",children:c.documentNo||c.id})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"})," ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ç‡∏ô‡∏™‡πà‡∏á (Control)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"TM No:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:c.tmNo||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏°:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:c.controlDate?ke(c.controlDate):"-"})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(ns,{className:"w-3 h-3"})," ‡∏™‡∏≤‡∏Ç‡∏≤ & ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Info)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:c.branch})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600 truncate max-w-[50px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:"}),e.jsx("span",{className:"font-bold text-slate-700 text-xs truncate max-w-[120px]",title:c.productName,children:c.productCode})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3"})," ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Dest & COL)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"COL ID:"}),e.jsx("span",{className:"font-bold text-indigo-600 text-sm",children:c.collectionOrderId||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"To:"}),e.jsx("span",{className:"font-bold text-slate-800 text-xs truncate max-w-[120px]",title:c.destinationCustomer||"-",children:c.destinationCustomer||"-"})]})]})]}),e.jsxs("div",{className:"relative pt-10 pb-6 px-4",children:[e.jsx("div",{className:"hidden md:block absolute top-[85px] left-10 right-10 h-1.5 bg-slate-200 rounded-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-4 relative",children:s.map((b,j)=>{let g=n[b.colorKey],m=j<=t;return m||(g=n.gray),e.jsxs("div",{className:"flex flex-col items-center relative z-10 group",children:[e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-4 shadow-lg transition-transform duration-300 mb-4 bg-white
                                          ${m?`${g.border} ${g.text} scale-110 group-hover:scale-115`:"border-slate-200 text-slate-300"}
                                        `,children:e.jsx(b.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:`w-full bg-white rounded-xl border p-2 shadow-sm text-center min-h-[120px] flex flex-col transition-all duration-300
                                          ${m?"border-blue-100 shadow-md transform hover:-translate-y-1":"border-slate-100 opacity-70"}
                                        `,children:[e.jsx("div",{className:`font-bold text-xs mb-1 ${m?"text-slate-800":"text-slate-400"}`,children:b.label}),e.jsx("div",{className:"flex-grow flex items-center justify-center my-1",children:e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full font-bold
                                                  ${m?`${g.badgeBg} ${g.badgeText}`:"bg-slate-100 text-slate-400"}
                                                `,children:b.status})}),e.jsx("div",{className:"px-1 mb-1 hidden md:block",children:e.jsx("p",{className:"text-[9px] text-slate-400 leading-tight",children:b.description})}),e.jsx("div",{className:"border-t border-slate-50 pt-1 mt-auto",children:m&&b.date?e.jsxs("div",{className:"text-[10px] font-bold text-slate-600 flex items-center justify-center gap-1",children:[e.jsx(Ct,{className:"w-3 h-3"}),ke(b.date)]}):e.jsx("div",{className:"text-[9px] text-slate-300 italic",children:"Pending"})})]})]},b.id)})})]}),e.jsxs("div",{className:"mt-8 text-center text-xs text-slate-400 bg-blue-50/50 p-2 rounded-lg border border-blue-50 mx-auto max-w-2xl",children:["üí° ",e.jsx("strong",{children:"Journey Info:"})," ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô (Collection Lifecycle)"]})]})]})})},ca=({item:a,onClose:d})=>{const c=()=>{window.print()};return e.jsxs("div",{className:"fixed inset-0 bg-slate-900/50 flex flex-col items-center justify-start z-[9999] overflow-y-auto no-scrollbar print:static print:bg-white print:overflow-visible print:p-0 print:block",children:[e.jsxs("div",{className:"sticky top-0 w-full bg-white border-b border-slate-200 shadow-sm p-4 flex justify-between items-center z-50 print:hidden shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{className:"w-5 h-5 text-slate-600"}),e.jsx("h2",{className:"font-bold text-slate-800",children:"Print Preview (A4 Mode)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-900 font-bold text-sm transition-colors shadow-sm",children:[e.jsx(Ie,{className:"w-4 h-4"})," ‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsx("button",{onClick:d,className:"p-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"my-8 print:m-0 print:w-full",children:e.jsxs("div",{className:"bg-white shadow-2xl mx-auto print:shadow-none print:mx-0 relative flex flex-col print-content-root",style:{width:"210mm",minHeight:"297mm",padding:"10mm 15mm"},children:[e.jsxs("div",{className:"flex border-2 border-black mb-4",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-2 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-20"})}),e.jsxs("div",{className:"w-[70%] p-2 flex flex-col justify-center pl-4",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 leading-none mb-1",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-xs font-bold text-slate-700 mb-2",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-xs text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-lg font-bold text-center border-2 border-black py-1.5 mb-4 bg-white text-slate-900 print:bg-transparent uppercase tracking-wide",children:"‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Note)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1 font-bold",children:a.documentNo||a.id})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:ke(a.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:a.branch})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"Invoice No:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:a.invoiceNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:a.customerName||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"TM No:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:a.tmNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:a.notes||"-"})]})]}),e.jsx("div",{className:"mb-4 flex-1",children:e.jsxs("table",{className:"w-full border-collapse border border-black text-sm",children:[e.jsx("thead",{className:"print:table-header-group",children:e.jsxs("tr",{className:"bg-slate-100 print:bg-transparent",children:[e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[40%] text-left",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-black p-2 w-[10%] text-center",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("th",{className:"border border-black p-2 w-[20%] text-left",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"print:break-inside-avoid",children:[e.jsx("td",{className:"border border-black p-2 valign-top text-xs font-bold",children:a.productCode}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold",children:a.productName}),a.destinationCustomer&&e.jsxs("div",{className:"text-slate-500 text-[10px]",children:["‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: ",a.destinationCustomer]})]}),e.jsx("td",{className:"border border-black p-2 text-center valign-top font-bold",children:a.quantity}),e.jsx("td",{className:"border border-black p-2 text-center valign-top text-xs",children:a.unit}),e.jsx("td",{className:"border border-black p-2 valign-top text-xs",children:a.notes||"-"})]})})]})}),e.jsx("div",{className:"mt-8 border-t-2 border-black pt-4 print:break-inside-avoid page-break-avoid",children:e.jsxs("div",{className:"flex justify-between mt-8 text-xs text-center px-8 pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]})]})})]})}),e.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap');
        
        .print-content-root {
          font-family: 'Sarabun', 'TH Sarabun New', sans-serif;
        }

        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body {
            background: white !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          .print-content-root {
            width: 100%;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:table-header-group {
            display: table-header-group !important;
          }
          .print\\:break-inside-avoid {
             page-break-inside: avoid !important;
             break-inside: avoid !important;
          }
        }
      `})]})},ia=()=>{const{items:a,updateReturnRecord:d,deleteReturnRecord:c}=ge(),[o,t]=N.useState({query:"",status:"All",startDate:"",endDate:""}),[s,n]=N.useState(null),[b,j]=N.useState(!1),[g,m]=N.useState(!1),[h,p]=N.useState(null),[r,I]=N.useState(!1),[l,w]=N.useState(null),[v,k]=N.useState(1),[y,i]=N.useState(20),O=N.useMemo(()=>a.filter(f=>{if(f.documentType==="NCR"||f.ncrNumber&&f.documentType!=="LOGISTICS"||o.startDate&&f.date<o.startDate||o.endDate&&f.date>o.endDate||o.status!=="All"&&f.status!==o.status)return!1;const M=o.query.toLowerCase();return!(M&&!`
          ${f.id}
          ${f.branch}
          ${f.invoiceNo||""}
          ${f.documentNo||""}
          ${f.tmNo||""}
          ${f.customerName||""}
          ${f.productCode||""}
          ${f.productName||""}
          ${f.destinationCustomer||""}
          ${f.notes||""}
          ${f.collectionOrderId||""}
        `.toLowerCase().includes(M))}).sort((f,M)=>new Date(M.date).getTime()-new Date(f.date).getTime()),[a,o]),B=Math.ceil(O.length/y),D=N.useMemo(()=>{const f=(v-1)*y;return O.slice(f,f+y)},[O,v,y]);N.useEffect(()=>{k(1)},[o,y]);const F=async()=>{const f=new _t.Workbook,M=f.addWorksheet("COL Report");M.columns=[{header:"Date",key:"date",width:15},{header:"Branch",key:"branch",width:15},{header:"Invoice No",key:"invoiceNo",width:15},{header:"Control Date",key:"controlDate",width:15},{header:"Doc No (R)",key:"documentNo",width:15},{header:"TM No",key:"tmNo",width:15},{header:"COL No",key:"collectionOrderId",width:20},{header:"Status",key:"status",width:15},{header:"Product Code",key:"productCode",width:15},{header:"Product Name",key:"productName",width:30},{header:"Quantity",key:"quantity",width:10},{header:"Unit",key:"unit",width:10},{header:"Destination",key:"destination",width:20},{header:"Notes",key:"notes",width:30}],O.forEach(C=>{M.addRow({date:ke(C.date),branch:C.branch,invoiceNo:C.invoiceNo||"-",controlDate:C.controlDate||"-",documentNo:C.documentNo||"-",tmNo:C.tmNo||"-",collectionOrderId:C.collectionOrderId||"-",status:C.status,productCode:C.productCode,productName:C.productName,quantity:C.quantity,unit:C.unit||"",destination:C.destinationCustomer||"-",notes:C.notes||"-"})});const U=await f.xlsx.writeBuffer(),K=new Blob([U],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Ht.saveAs(K,`COL_Report_${new Date().toISOString().split("T")[0]}.xlsx`)},Y=async f=>{const M=new _t.Workbook,U=M.addWorksheet("COL Item");U.mergeCells("A1:E1"),U.getCell("A1").value="‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / Collection Receipt",U.getCell("A1").font={size:16,bold:!0},U.getCell("A1").alignment={horizontal:"center"},U.getCell("A3").value="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà / Date:",U.getCell("B3").value=ke(f.date),U.getCell("D3").value="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà / Doc No:",U.getCell("E3").value=f.documentNo||f.id,U.getCell("A4").value="‡∏™‡∏≤‡∏Ç‡∏≤ / Branch:",U.getCell("B4").value=f.branch,U.getRow(6).values=["‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏à‡∏≥‡∏ô‡∏ß‡∏ô","‡∏´‡∏ô‡πà‡∏ß‡∏¢","‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"],U.getRow(6).font={bold:!0},U.getRow(7).values=[f.productCode,f.productName,f.quantity,f.unit,f.notes||"-"],U.getColumn(1).width=15,U.getColumn(2).width=30,U.getColumn(3).width=10,U.getColumn(4).width=10,U.getColumn(5).width=20;const K=await M.xlsx.writeBuffer(),C=new Blob([K],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Ht.saveAs(C,`COL_Item_${f.id}.xlsx`)},R=f=>{w(f),I(!0)},$=async f=>{const{value:M}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",input:"password",inputLabel:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",inputPlaceholder:"Enter password",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",showCancelButton:!0,inputAttributes:{autocapitalize:"off",autocorrect:"off"}});M==="1234"?(n({...f}),j(!0)):M&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error")},X=async f=>{if((await T.fire({title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?",text:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){const{value:U}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô",input:"password",inputLabel:"Password",inputPlaceholder:"Enter password",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});U==="1234"?await c(f)?T.fire("‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß","success"):T.fire("‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","error"):U&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error")}},ce=async()=>{s&&(await d(s.id,s),j(!1),n(null),T.fire("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß","success"))},H=f=>{p(f),m(!0)};return e.jsxs("div",{className:"h-full flex flex-col gap-4 p-4 font-inter text-slate-800 bg-slate-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm print:hidden",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-700 to-indigo-600 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(ne,{className:"w-6 h-6 text-blue-600"}),"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL (Collection Report)"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Report)"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(qe,{className:"absolute left-2 top-1.5 w-4 h-4 text-slate-400 group-hover:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (Inv, Doc, COL)...",value:o.query,onChange:f=>t({...o,query:f.target.value}),className:"pl-8 pr-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full md:w-64 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 border border-slate-200 rounded-lg p-0.5",children:[e.jsx("input",{type:"date",value:o.startDate,onChange:f=>t({...o,startDate:f.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:o.endDate,onChange:f=>t({...o,endDate:f.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer"})]}),e.jsxs("select",{value:o.status,onChange:f=>t({...o,status:f.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1.5 outline-none focus:ring-1 focus:ring-blue-500 max-w-[150px]",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (All Status)"}),e.jsx("option",{value:"Requested",children:"Requested (‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô)"}),e.jsx("option",{value:"COL_JobAccepted",children:"Job Accepted (‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)"}),e.jsx("option",{value:"COL_BranchReceived",children:"Branch Received (‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤)"}),e.jsx("option",{value:"COL_Consolidated",children:"Consolidated (‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)"}),e.jsx("option",{value:"COL_InTransit",children:"In Transit (‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á)"}),e.jsx("option",{value:"COL_HubReceived",children:"Hub Received (‡∏ñ‡∏∂‡∏á Hub)"}),e.jsx("option",{value:"Completed",children:"Completed (‡∏à‡∏ö‡∏á‡∏≤‡∏ô)"})]}),e.jsxs("div",{className:"flex gap-1 ml-auto",children:[e.jsxs("button",{onClick:F,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap",children:[e.jsx(Je,{className:"w-3 h-3"}),"Excel (All)"]}),e.jsx("button",{onClick:()=>t({query:"",status:"All",startDate:"",endDate:""}),className:"px-2 py-1 text-slate-600 hover:bg-slate-100 font-medium rounded-lg border border-slate-200",title:"‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Clear)",children:e.jsx(Ye,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col print:hidden",children:[e.jsx("div",{className:"overflow-auto flex-1 relative",style:{maxHeight:"calc(100vh - 220px)"},children:e.jsxs("table",{className:"w-full text-left border-collapse min-w-[1200px]",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 border-r max-w-[50px] text-center",children:"#"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[200px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)"}),e.jsx("th",{className:"px-3 py-3 text-center min-w-[100px]",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"}),e.jsx("th",{className:"px-3 py-3 text-center min-w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:D.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"p-8 text-center text-slate-400 italic",children:["‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Collection ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ",e.jsx("div",{className:"text-xs mt-2",children:"‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏≠‡∏∑‡πà‡∏ô"})]})}):D.map((f,M)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors text-xs text-slate-700",children:[e.jsxs("td",{className:"px-3 py-2 border-r text-center text-slate-400 relative",children:[e.jsx("button",{onClick:()=>H(f),className:"absolute left-1 top-2 p-0.5 rounded-full hover:bg-blue-100 text-blue-400 hover:text-blue-600 transition-colors",title:"‡∏î‡∏π Timeline (View Infographic)",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-full p-0.5",children:e.jsx(qe,{className:"w-2.5 h-2.5"})})}),(v-1)*y+M+1]}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:ke(f.date)}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsx("div",{className:"font-bold",children:f.branch})}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:f.invoiceNo?e.jsx("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 font-mono",children:f.invoiceNo}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:f.documentNo?e.jsx("span",{className:"font-bold text-blue-600 font-mono",children:f.documentNo}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:f.controlDate?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Qe,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{children:ke(f.controlDate)})]}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:f.tmNo?e.jsx("span",{className:"text-slate-700 font-medium",children:f.tmNo}):"-"}),e.jsxs("td",{className:"px-3 py-2 border-r align-top",children:[e.jsx("div",{className:"font-bold text-slate-800",children:f.productCode}),e.jsx("div",{className:"line-clamp-2",title:f.productName,children:f.productName}),e.jsx("div",{className:"mt-1 text-slate-500 text-[10px] flex gap-2",children:e.jsxs("span",{children:["Qty: ",e.jsx("span",{className:"font-semibold text-slate-700",children:f.quantity})," ",f.unit]})})]}),e.jsx("td",{className:"px-3 py-2 text-center align-top",children:e.jsx("span",{className:`
                          inline-flex px-2 py-0.5 rounded-full text-[10px] font-bold border
                          ${f.status==="Requested"?"bg-slate-100 text-slate-600 border-slate-200":""}
                          ${f.status==="COL_JobAccepted"?"bg-blue-50 text-blue-600 border-blue-200":""}
                          ${f.status==="COL_BranchReceived"?"bg-indigo-50 text-indigo-600 border-indigo-200":""}
                          ${f.status==="COL_Consolidated"?"bg-orange-50 text-orange-600 border-orange-200":""}
                          ${f.status==="COL_InTransit"||f.status==="COL_HubReceived"?"bg-purple-50 text-purple-600 border-purple-200":""}
                          ${f.status==="Completed"?"bg-green-50 text-green-600 border-green-200":""}
                        `,children:f.status})}),e.jsx("td",{className:"px-3 py-2 align-top text-center border-l",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>R(f),className:"p-1 hover:bg-slate-100 rounded text-slate-500 hover:text-blue-600 transition-colors",title:"‡∏û‡∏¥‡∏°‡∏û‡πå (Print)",children:e.jsx(Ie,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>$(f),className:"p-1 hover:bg-slate-100 rounded text-amber-500 hover:text-amber-600 transition-colors",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Edit)",children:e.jsx(yt,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Y(f),className:"p-1 hover:bg-slate-100 rounded text-green-600 hover:text-green-700 transition-colors",title:"Export Excel",children:e.jsx(Je,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>X(f.id),className:"p-1 hover:bg-slate-100 rounded text-red-400 hover:text-red-600 transition-colors",title:"‡∏•‡∏ö (Delete)",children:e.jsx(De,{className:"w-3 h-3"})})]})})]},f.id))})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:y,onChange:f=>i(Number(f.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",O.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(f=>Math.max(f-1,1)),disabled:v===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",v]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",B||1]})]}),e.jsx("button",{onClick:()=>k(f=>Math.min(f+1,B)),disabled:v===B||B===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]}),b&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden animate-scale-up",children:[e.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center border-b border-slate-800",children:[e.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(yt,{className:"w-5 h-5 text-amber-500"})," ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Edit Return Record)"]}),e.jsx("button",{onClick:()=>j(!1),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date)"}),e.jsx("input",{type:"date",value:s.date,onChange:f=>n({...s,date:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("input",{type:"text",value:s.branch,onChange:f=>n({...s,branch:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Invoice No"}),e.jsx("input",{type:"text",value:s.invoiceNo||"",onChange:f=>n({...s,invoiceNo:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Doc No (R)"}),e.jsx("input",{type:"text",value:s.documentNo||"",onChange:f=>n({...s,documentNo:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"TM No"}),e.jsx("input",{type:"text",value:s.tmNo||"",onChange:f=>n({...s,tmNo:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Control Date"}),e.jsx("input",{type:"date",value:s.controlDate||"",onChange:f=>n({...s,controlDate:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("hr",{className:"my-2 border-slate-200"}),e.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Info)"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Code)"}),e.jsx("input",{type:"text",value:s.productCode,onChange:f=>n({...s,productCode:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Name)"}),e.jsx("input",{type:"text",value:s.productName,onChange:f=>n({...s,productName:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Qty)"}),e.jsx("input",{type:"number",value:s.quantity,onChange:f=>n({...s,quantity:Number(f.target.value)}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Unit)"}),e.jsx("input",{type:"text",value:s.unit,onChange:f=>n({...s,unit:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (Notes)"}),e.jsx("textarea",{rows:2,value:s.notes||"",onChange:f=>n({...s,notes:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none resize-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Status)"}),e.jsxs("select",{value:s.status,onChange:f=>n({...s,status:f.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white",children:[e.jsx("option",{value:"Requested",children:"Requested (‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô)"}),e.jsx("option",{value:"COL_JobAccepted",children:"Job Accepted (‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)"}),e.jsx("option",{value:"COL_BranchReceived",children:"Branch Received (‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤)"}),e.jsx("option",{value:"COL_Consolidated",children:"Consolidated (‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)"}),e.jsx("option",{value:"COL_InTransit",children:"In Transit (‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á)"}),e.jsx("option",{value:"COL_HubReceived",children:"Hub Received (‡∏ñ‡∏∂‡∏á Hub)"}),e.jsx("option",{value:"Completed",children:"Completed (‡∏à‡∏ö‡∏á‡∏≤‡∏ô)"})]})]})]})}),e.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"}),e.jsxs("button",{onClick:ce,className:"px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-lg shadow-blue-900/20 transition-all flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (Save)"]})]})]})}),g&&e.jsx(oa,{isOpen:g,onClose:()=>m(!1),item:h}),r&&l&&e.jsx(ca,{item:l,onClose:()=>I(!1)})]})},da=()=>{const[a,d]=N.useState("Ledger"),{items:c,loading:o}=ge(),[t,s]=N.useState({query:"",startDate:"",endDate:"",movementType:"All"}),n=N.useMemo(()=>{const v=[];c.forEach(y=>{let i=y.dateGraded;!i&&y.disposition&&(i=y.date),!i&&(y.dateDocumented||y.dateCompleted)&&(i=y.dateDocumented||y.dateCompleted),i&&(v.push({...y,movementType:"IN",movementDate:i}),(y.dateDocumented||y.dateCompleted)&&v.push({...y,movementType:"OUT",movementDate:y.dateDocumented||y.dateCompleted}))}),v.sort((y,i)=>{const O=y.movementDate||"0",D=(i.movementDate||"0").localeCompare(O);return D!==0?D:y.movementType==="IN"&&i.movementType==="OUT"?-1:y.movementType==="OUT"&&i.movementType==="IN"?1:0});const k=y=>{const i=v.filter(D=>D.disposition===y),O=i.filter(D=>D.movementType==="IN").reduce((D,F)=>D+F.quantity,0),B=i.filter(D=>D.movementType==="OUT").reduce((D,F)=>D+F.quantity,0);return{totalIn:O,totalOut:B,onHand:O-B}};return{fullLedger:v,sellableStock:{stats:k("Restock")},rtvStock:{stats:k("RTV")},claimStock:{stats:k("Claim")},internalStock:{stats:k("InternalUse")},scrapStock:{stats:k("Recycle")}}},[c]),b=N.useMemo(()=>(a==="Ledger"?n.fullLedger:n.fullLedger.filter(k=>k.disposition===a)).filter(k=>{var i,O,B,D;const y=t.query.toLowerCase();return!(y&&!((i=k.productName)!=null&&i.toLowerCase().includes(y))&&!((O=k.productCode)!=null&&O.toLowerCase().includes(y))&&!((B=k.customerName)!=null&&B.toLowerCase().includes(y))&&!((D=String(k.branch))!=null&&D.toLowerCase().includes(y))||t.startDate&&(k.movementDate||"0")<t.startDate||t.endDate&&(k.movementDate||"0")>t.endDate||t.movementType!=="All"&&k.movementType!==t.movementType)}),[a,n.fullLedger,t]),j=()=>{var D;const v=["MovementDate","MovementType","Branch","Customer","ProductCode","ProductName","RefNo","NeoRefNo","Quantity","Unit","PriceBill","ExpiryDate","Disposition"],k=b.map(F=>[F.movementDate||"",F.movementType,`"${String(F.branch).replace(/"/g,'""')}"`,`"${F.customerName.replace(/"/g,'""')}"`,F.productCode,`"${F.productName.replace(/"/g,'""')}"`,F.refNo,F.neoRefNo||"",F.quantity,F.unit,F.priceBill,F.expiryDate||"",F.disposition||""].join(",")),y="\uFEFF"+[v.join(","),...k].join(`
`),i=new Blob([y],{type:"text/csv;charset=utf-8;"}),O=URL.createObjectURL(i),B=document.createElement("a");B.setAttribute("href",O),B.setAttribute("download",`inventory_report_${a}_${(D=ke(new Date))==null?void 0:D.replace(/\//g,"-")}.csv`),document.body.appendChild(B),B.click(),document.body.removeChild(B)},g=[{id:"Ledger",label:"1. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Full Ledger)",icon:vl,stats:null},{id:"Restock",label:"2. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏¢ (Sellable)",icon:Ye,stats:n.sellableStock.stats},{id:"RTV",label:"3. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô (RTV)",icon:ne,stats:n.rtvStock.stats},{id:"Claim",label:"4. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",icon:St,stats:n.claimStock.stats},{id:"InternalUse",label:"5. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",icon:Rt,stats:n.internalStock.stats},{id:"Recycle",label:"6. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",icon:De,stats:n.scrapStock.stats}],[m,h]=N.useState(1),[p,r]=N.useState(20);te.useEffect(()=>{h(1)},[t,a]);const I=Math.ceil(b.length/p),l=N.useMemo(()=>{const v=(m-1)*p;return b.slice(v,v+p)},[b,m,p]),w=g.find(v=>v.id===a);return e.jsxs("div",{className:"p-6 h-full flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"})]}),e.jsx("div",{className:"border-b border-slate-200",children:e.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:g.map(v=>{const k=v.icon;return e.jsxs("button",{onClick:()=>d(v.id),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
                  ${a===v.id?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}
                `,children:[e.jsx(k,{className:"w-4 h-4"}),v.label]},v.id)})})}),a!=="Ledger"&&(w==null?void 0:w.stats)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 animate-fade-in",children:[e.jsx(Mt,{title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total In)",value:w.stats.totalIn,color:"text-blue-600"}),e.jsx(Mt,{title:"‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß (Total Out)",value:w.stats.totalOut,color:"text-amber-600"}),e.jsx(Mt,{title:"‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å (On-Hand)",value:w.stats.onHand,color:"text-green-600",isHighlight:!0})]}),e.jsxs("div",{className:"bg-white p-2 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-grow max-w-sm",children:[e.jsx(qe,{className:"w-3 h-3 absolute left-2 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",value:t.query,onChange:v=>s({...t,query:v.target.value}),className:"w-full pl-7 pr-2 py-1 bg-slate-50 border border-slate-200 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none text-xs"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"date",value:t.startDate,onChange:v=>s({...t,startDate:v.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500 w-28"}),e.jsx("input",{type:"date",value:t.endDate,onChange:v=>s({...t,endDate:v.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500 w-28"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("select",{value:t.movementType,onChange:v=>s({...t,movementType:v.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"All",children:"IN/OUT ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsx("option",{value:"IN",children:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (IN)"}),e.jsx("option",{value:"OUT",children:"‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å (OUT)"})]}),e.jsxs("button",{onClick:j,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center justify-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap ml-auto md:ml-0",children:[e.jsx(Je,{className:"w-3 h-3"}),"Excel"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col",children:[e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{className:"whitespace-nowrap",children:[e.jsx("th",{className:"px-1 py-1 w-[80px] text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"}),e.jsx("th",{className:"px-1 py-1 max-w-[150px] text-[10px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[180px] text-[10px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[100px] text-[10px]",children:"NCR No."}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref)"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Qty"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Price"}),e.jsx("th",{className:"px-1 py-1 w-[70px] text-[10px]",children:"Exp."}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:o?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-slate-400",children:"Loading data..."})}):l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á"})}):l.map(v=>e.jsxs("tr",{className:"text-[11px] hover:bg-slate-50",children:[e.jsxs("td",{className:"px-1 py-1",children:[e.jsx("div",{className:"font-mono text-[9px]",children:ke(v.movementDate)}),v.movementType==="IN"?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-green-600 font-bold text-[9px]",children:[e.jsx(wl,{className:"w-3 h-3"})," ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"]}):e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-red-600 font-bold text-[9px]",children:[e.jsx(yl,{className:"w-3 h-3"})," ‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å"]})]}),e.jsxs("td",{className:"px-1 py-1 max-w-[150px]",children:[e.jsx("div",{className:"font-medium text-slate-800 truncate",title:v.customerName,children:v.customerName}),e.jsxs("div",{className:"text-[9px] text-slate-500 truncate",title:`‡∏™‡∏≤‡∏Ç‡∏≤: ${v.branch}`,children:["‡∏™‡∏≤‡∏Ç‡∏≤: ",v.branch]})]}),e.jsxs("td",{className:"px-1 py-1 max-w-[180px]",children:[e.jsx("div",{className:"font-bold text-slate-800 truncate",title:v.productName,children:v.productName}),e.jsx("div",{className:"text-[9px] text-slate-500",children:v.productCode})]}),e.jsx("td",{className:"px-1 py-1 text-[9px] font-mono text-slate-600 max-w-[100px] truncate",title:v.ncrNumber||"-",children:v.ncrNumber||"-"}),e.jsxs("td",{className:"px-1 py-1 text-[9px] max-w-[120px]",children:[e.jsxs("div",{className:"truncate",title:`Ref: ${v.refNo}`,children:["Ref: ",v.refNo]}),e.jsxs("div",{className:"text-slate-500 truncate",title:`Neo: ${v.neoRefNo}`,children:["Neo: ",v.neoRefNo||"-"]})]}),e.jsxs("td",{className:"px-1 py-1 text-right font-mono text-[10px]",children:[v.quantity," ",v.unit]}),e.jsxs("td",{className:"px-1 py-1 text-right font-mono text-[10px]",children:["‡∏ø",(v.priceBill||0).toLocaleString()]}),e.jsx("td",{className:"px-1 py-1 text-[9px] text-red-600 font-medium font-mono",children:ke(v.expiryDate)}),e.jsxs("td",{className:"px-1 py-1 text-[9px] text-slate-500 max-w-[120px]",children:[e.jsx("div",{className:"truncate",children:v.disposition}),v.destinationCustomer&&e.jsxs("div",{className:"text-blue-600 truncate",title:v.destinationCustomer,children:["T: ",v.destinationCustomer]})]})]},v.id+"-"+v.movementType+"-"+v.movementDate))})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:p,onChange:v=>r(Number(v.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",b.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(v=>Math.max(v-1,1)),disabled:m===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",m]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",I||1]})]}),e.jsx("button",{onClick:()=>h(v=>Math.min(v+1,I)),disabled:m===I||I===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]})]})},Mt=({title:a,value:d,color:c,isHighlight:o=!1})=>e.jsxs("div",{className:`bg-white p-4 rounded-lg border shadow-sm ${o?"border-blue-200 bg-blue-50":"border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:a}),e.jsx("p",{className:`text-3xl font-bold ${c} ${o?"text-blue-600":""}`,children:d.toLocaleString()})]}),xa=({formData:a,requestItems:d,isCustomBranch:c,initialData:o,setFormData:t,setIsCustomBranch:s,setRequestItems:n,handleAddItem:b,handleRemoveItem:j,handleRequestSubmit:g,uniqueCustomers:m=[],uniqueDestinations:h=[],uniqueProductCodes:p=[],uniqueProductNames:r=[]})=>{te.useEffect(()=>{t(l=>({...l,documentType:"LOGISTICS"}))},[t]);const I=(l,w)=>{t(v=>({...v,[l]:w}))};return e.jsx("div",{className:"h-full overflow-auto p-6 bg-slate-50",children:e.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-slate-200 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-indigo-500"}),e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-slate-100",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-blue-50 text-blue-600 shadow-inner",children:e.jsx(ie,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"1. ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Return Request)"}),e.jsx("p",{className:"text-sm text-slate-500",children:"‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Header)"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö (Branch) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"relative",children:e.jsxs("select",{required:!0,value:a.branch||"",onChange:l=>I("branch",l.target.value),className:"w-full p-3 bg-slate-50 border border-slate-300 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none transition-all",children:[e.jsx("option",{value:"",disabled:!0,children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),e.jsx("option",{value:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å",children:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å"}),(rt&&Array.isArray(rt)?rt:["‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","‡∏Ñ‡∏•‡∏≠‡∏á 13","‡∏ã‡∏µ‡πÇ‡∏ô‡πà","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"]).filter(l=>l!=="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å").map(l=>e.jsx("option",{value:l,children:l},l)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("input",{type:"text",value:a.invoiceNo||"",onChange:l=>I("invoiceNo",l.target.value),placeholder:"INV-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:a.controlDate||a.date||"",onChange:l=>{I("controlDate",l.target.value),I("date",l.target.value)},className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡πÄ‡∏•‡∏Ç R)"}),e.jsx("input",{type:"text",value:a.documentNo||a.refNo||"",onChange:l=>{I("documentNo",l.target.value),I("refNo",l.target.value)},placeholder:"R-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM NO)"}),e.jsx("input",{type:"text",value:a.tmNo||"",onChange:l=>I("tmNo",l.target.value),placeholder:"TM-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",value:a.customerCode||"",onChange:l=>I("customerCode",l.target.value),placeholder:"CUS-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:a.customerName||"",onChange:l=>I("customerName",l.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",list:"customer-list"}),e.jsx("datalist",{id:"customer-list",children:m.map(l=>e.jsx("option",{value:l},l))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination Customer)"}),e.jsx("input",{type:"text",value:a.destinationCustomer||"",onChange:l=>I("destinationCustomer",l.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",list:"destination-list"}),e.jsx("datalist",{id:"destination-list",children:h.map(l=>e.jsx("option",{value:l},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (Province)"}),e.jsx("input",{type:"text",value:a.province||"",onChange:l=>I("province",l.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Address)"}),e.jsx("textarea",{rows:2,value:a.customerAddress||"",onChange:l=>I("customerAddress",l.target.value),placeholder:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (Notes)"}),e.jsx("textarea",{rows:3,value:a.notes||"",onChange:l=>I("notes",l.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡πÜ...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå (‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠)"}),e.jsx("input",{type:"text",value:a.contactPhone||"",onChange:l=>I("contactPhone",l.target.value),placeholder:"0xx-xxx-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),e.jsx("div",{className:"flex justify-end pt-8 mt-4 border-t border-slate-100",children:e.jsxs("button",{onClick:()=>{if(d.length===0){const l={...a,productName:"General Request",quantity:1,unit:"Lot"};g([l])}else g()},className:"px-8 py-4 bg-blue-600 text-white rounded-xl font-bold shadow-lg hover:bg-blue-700 hover:shadow-xl transition-all flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Request)"]})})]})})})};class ma extends te.Component{constructor(d){super(d),this.props=d,this.state={hasError:!1,error:null}}static getDerivedStateFromError(d){return{hasError:!0,error:d}}componentDidCatch(d,c){console.error("Uncaught error:",d,c)}render(){var d;return this.state.hasError?e.jsxs("div",{className:"p-8 text-center text-red-600 bg-red-50 h-screen flex flex-col items-center justify-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (System Error)"}),e.jsx("p",{className:"mb-4",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á:"}),e.jsx("pre",{className:"bg-white p-4 rounded shadow text-left text-sm font-mono overflow-auto max-w-2xl border border-red-200",children:(d=this.state.error)==null?void 0:d.toString()}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ (Reload)"})]}):this.props.children}}const pa=({onNavigate:a})=>{const{addReturnRecord:d,getNextReturnNumber:c,items:o,updateReturnRecord:t}=ge(),{state:s,derived:n,actions:b}=us(),[j,g]=N.useState(1),[m,h]=N.useState(!1),[p,r]=N.useState(""),I=()=>{if(p!=="1234"){T.fire({icon:"error",title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",confirmButtonColor:"#ef4444"});return}h(!1),r("")};return!s||!n||!b?e.jsx("div",{className:"p-6 text-center",children:"Loading System..."}):e.jsx(ma,{children:e.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-slate-900 text-white flex flex-col shadow-xl z-20",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800",children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Inbound Collection System"})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[{id:1,label:"1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Create)",icon:ie},{id:2,label:"2. ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job Accept)",icon:ot},{id:3,label:"3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Rx)",icon:ne},{id:4,label:"4. ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consolidate)",icon:os}].map(l=>e.jsxs("button",{onClick:()=>g(l.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all duration-200
                                    ${j===l.id?"bg-blue-600 text-white shadow-lg shadow-blue-900/50 translate-x-1":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.icon,{className:`w-5 h-5 ${j===l.id?"text-white":"text-slate-500"}`}),e.jsx("span",{children:l.label})]}),j===l.id&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse"})]},l.id))}),e.jsx("div",{className:"p-4 border-t border-slate-800",children:e.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö"}),e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm font-bold",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),"Online"]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[e.jsxs("header",{className:"bg-white border-b border-slate-200 h-16 flex items-center px-6 justify-between shadow-sm z-10",children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[j===1&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-5 h-5 text-blue-600"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Return Request)"]}),j===2&&e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Job Acceptance)"]}),j===3&&e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á (Physical Receive)"]}),j===4&&e.jsxs(e.Fragment,{children:[e.jsx(os,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consolidation)"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Data Entry Officer"})}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 border border-blue-200 flex items-center justify-center",children:e.jsx(xs,{className:"w-5 h-5 text-blue-600"})})]})]}),e.jsxs("main",{className:"flex-1 overflow-auto bg-slate-50 p-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5 pointer-events-none"}),j===1&&e.jsx(xa,{formData:s.formData,requestItems:s.requestItems,isCustomBranch:s.isCustomBranch,uniqueCustomers:n.uniqueCustomers,uniqueDestinations:n.uniqueDestinations,uniqueProductCodes:n.uniqueProductCodes,uniqueProductNames:n.uniqueProductNames,setFormData:b.setFormData,setIsCustomBranch:b.setIsCustomBranch,setRequestItems:b.setRequestItems,handleAddItem:b.handleAddItem,handleRemoveItem:b.handleRemoveItem,handleRequestSubmit:b.handleRequestSubmit}),j===2&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx(hs,{onComplete:()=>g(3)})}),j===3&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx(gs,{onComplete:()=>g(4)})}),j===4&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx(fs,{onComplete:()=>{a?a(re.OPERATIONS,2):T.fire({icon:"info",title:"Navigation Info",text:"Navigation not configured",timer:1500,showConfirmButton:!1})}})})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 p-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4 text-amber-400"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Authentication)"]}),e.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-white transition",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("input",{type:"password",autoFocus:!0,className:"w-full p-3 border border-slate-300 rounded-lg text-center text-2xl tracking-widest font-mono mb-4 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"PASSCODE",value:p,onChange:l=>r(l.target.value),onKeyDown:l=>l.key==="Enter"&&I()}),e.jsx("button",{onClick:I,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition shadow-lg shadow-slate-900/20",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)"})]})]})})]})})},vs=N.createContext(void 0),ba=({children:a})=>{const[d,c]=N.useState(null),[o,t]=N.useState(!0);N.useEffect(()=>{const b=Cl(cs,j=>{j&&c({uid:j.uid,email:j.email||"",displayName:j.displayName||"User",role:"ADMIN",photoURL:j.photoURL||void 0}),t(!1)});return()=>b()},[]);const s=async(b="ADMIN")=>{const j={uid:"mock-user-"+Date.now(),email:"admin@neosiam.com",displayName:"Admin User",role:b};c(j)},n=async()=>{await kl(cs).catch(b=>console.error("Firebase Signout Error",b)),c(null)};return e.jsx(vs.Provider,{value:{user:d,loading:o,login:s,logout:n},children:a})},ua=()=>{const a=N.useContext(vs);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},ha=()=>{const{user:a,login:d}=ua(),[c,o]=N.useState(re.DASHBOARD),[t,s]=N.useState(null),[n,b]=N.useState(void 0),j=h=>{s(h),o(re.OPERATIONS)},g=()=>{switch(c){case re.DASHBOARD:return e.jsx(is,{});case re.OPERATIONS:return e.jsx(ta,{initialData:t,onClearInitialData:()=>s(null),initialStep:n});case re.NCR:return e.jsx(la,{});case re.NCR_REPORT:return e.jsx(na,{onTransfer:j});case re.COL_REPORT:return e.jsx(ia,{});case re.INVENTORY:return e.jsx(da,{});case re.COLLECTION:return e.jsx(pa,{onNavigate:(h,p)=>{o(h),p&&b(p)}});default:return e.jsx(is,{})}},m=()=>{switch(c){case re.DASHBOARD:return"‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö (System Overview)";case re.OPERATIONS:return"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Operations Hub)";case re.NCR:return"‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (NCR System)";case re.NCR_REPORT:return"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR (NCR Report)";case re.COL_REPORT:return"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL (Collection Report)";case re.INVENTORY:return"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)";case re.COLLECTION:return"‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inbound Collection System)";default:return"ReturnNeosiam Pro"}};return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-slate-50 print:h-auto print:overflow-visible print:block",children:[e.jsx(Il,{currentView:c,onChangeView:o}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 print:h-auto print:overflow-visible",children:[e.jsxs("header",{className:"bg-white border-b border-slate-200 h-16 flex items-center justify-between px-8 shadow-sm z-10 print:hidden",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:m()}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"relative p-2 text-slate-500 hover:bg-slate-100 rounded-full transition-colors",children:[e.jsx(Rl,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1.5 right-2 w-2 h-2 bg-red-500 rounded-full border border-white"})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-slate-200",children:[e.jsxs("div",{className:"text-right hidden md:block cursor-pointer",onClick:()=>!a&&d("ADMIN"),title:a?"User Logged In":"Click to Mock Login",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800",children:a?a.displayName||"User":"Guest (Click to Login)"}),e.jsx("p",{className:"text-xs text-slate-500",children:a?a.role||"No Role":"Access Restricted"})]}),e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"User Logo",className:"w-9 h-9 rounded-full object-contain bg-white p-1 border border-slate-200"})]})]})]}),e.jsx("main",{className:"flex-1 overflow-auto print:overflow-visible print:h-auto",children:g()})]})]})},ga=()=>e.jsx(Tl,{children:e.jsx(ba,{children:e.jsx(ha,{})})}),ws=document.getElementById("root");if(!ws)throw new Error("Could not find root element to mount to");const fa=Sl.createRoot(ws);fa.render(e.jsx(te.StrictMode,{children:e.jsx(ga,{})}));
